var ou=e=>{throw TypeError(e)};var ql=(e,t,n)=>t.has(e)||ou("Cannot "+n);var w=(e,t,n)=>(ql(e,t,"read from private field"),n?n.call(e):t.get(e)),G=(e,t,n)=>t.has(e)?ou("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),$=(e,t,n,s)=>(ql(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ne=(e,t,n)=>(ql(e,t,"access private method"),n);var uo=(e,t,n,s)=>({set _(i){$(e,t,i,n)},get _(){return w(e,t,s)}});function Mx(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(s,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function _x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mp={exports:{}},Cl={},xp={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=Symbol.for("react.element"),Lx=Symbol.for("react.portal"),Ax=Symbol.for("react.fragment"),Ox=Symbol.for("react.strict_mode"),Wx=Symbol.for("react.profiler"),Bx=Symbol.for("react.provider"),$x=Symbol.for("react.context"),Ux=Symbol.for("react.forward_ref"),Vx=Symbol.for("react.suspense"),Hx=Symbol.for("react.memo"),qx=Symbol.for("react.lazy"),lu=Symbol.iterator;function Qx(e){return e===null||typeof e!="object"?null:(e=lu&&e[lu]||e["@@iterator"],typeof e=="function"?e:null)}var yp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gp=Object.assign,vp={};function As(e,t,n){this.props=e,this.context=t,this.refs=vp,this.updater=n||yp}As.prototype.isReactComponent={};As.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};As.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bp(){}bp.prototype=As.prototype;function Bc(e,t,n){this.props=e,this.context=t,this.refs=vp,this.updater=n||yp}var $c=Bc.prototype=new bp;$c.constructor=Bc;gp($c,As.prototype);$c.isPureReactComponent=!0;var au=Array.isArray,jp=Object.prototype.hasOwnProperty,Uc={current:null},Sp={key:!0,ref:!0,__self:!0,__source:!0};function wp(e,t,n){var s,i={},o=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)jp.call(t,s)&&!Sp.hasOwnProperty(s)&&(i[s]=t[s]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in a=e.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return{$$typeof:Ji,type:e,key:o,ref:l,props:i,_owner:Uc.current}}function Kx(e,t){return{$$typeof:Ji,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Vc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ji}function Gx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cu=/\/+/g;function Ql(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Gx(""+e.key):t.toString(36)}function zo(e,t,n,s,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ji:case Lx:l=!0}}if(l)return l=e,i=i(l),e=s===""?"."+Ql(l,0):s,au(i)?(n="",e!=null&&(n=e.replace(cu,"$&/")+"/"),zo(i,t,n,"",function(u){return u})):i!=null&&(Vc(i)&&(i=Kx(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(cu,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=s===""?".":s+":",au(e))for(var a=0;a<e.length;a++){o=e[a];var c=s+Ql(o,a);l+=zo(o,t,n,c,i)}else if(c=Qx(e),typeof c=="function")for(e=c.call(e),a=0;!(o=e.next()).done;)o=o.value,c=s+Ql(o,a++),l+=zo(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function fo(e,t,n){if(e==null)return e;var s=[],i=0;return zo(e,s,"","",function(o){return t.call(n,o,i++)}),s}function Yx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dt={current:null},Do={transition:null},Jx={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:Do,ReactCurrentOwner:Uc};function Cp(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:fo,forEach:function(e,t,n){fo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fo(e,function(){t++}),t},toArray:function(e){return fo(e,function(t){return t})||[]},only:function(e){if(!Vc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=As;oe.Fragment=Ax;oe.Profiler=Wx;oe.PureComponent=Bc;oe.StrictMode=Ox;oe.Suspense=Vx;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jx;oe.act=Cp;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=gp({},e.props),i=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=Uc.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)jp.call(t,c)&&!Sp.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:Ji,type:e.type,key:i,ref:o,props:s,_owner:l}};oe.createContext=function(e){return e={$$typeof:$x,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bx,_context:e},e.Consumer=e};oe.createElement=wp;oe.createFactory=function(e){var t=wp.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:Ux,render:e}};oe.isValidElement=Vc;oe.lazy=function(e){return{$$typeof:qx,_payload:{_status:-1,_result:e},_init:Yx}};oe.memo=function(e,t){return{$$typeof:Hx,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Do.transition;Do.transition={};try{e()}finally{Do.transition=t}};oe.unstable_act=Cp;oe.useCallback=function(e,t){return dt.current.useCallback(e,t)};oe.useContext=function(e){return dt.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return dt.current.useDeferredValue(e)};oe.useEffect=function(e,t){return dt.current.useEffect(e,t)};oe.useId=function(){return dt.current.useId()};oe.useImperativeHandle=function(e,t,n){return dt.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return dt.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return dt.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return dt.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return dt.current.useReducer(e,t,n)};oe.useRef=function(e){return dt.current.useRef(e)};oe.useState=function(e){return dt.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return dt.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return dt.current.useTransition()};oe.version="18.3.1";xp.exports=oe;var S=xp.exports;const se=_x(S),Xx=Mx({__proto__:null,default:se},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx=S,ey=Symbol.for("react.element"),ty=Symbol.for("react.fragment"),ny=Object.prototype.hasOwnProperty,ry=Zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sy={key:!0,ref:!0,__self:!0,__source:!0};function kp(e,t,n){var s,i={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)ny.call(t,s)&&!sy.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:ey,type:e,key:o,ref:l,props:i,_owner:ry.current}}Cl.Fragment=ty;Cl.jsx=kp;Cl.jsxs=kp;mp.exports=Cl;var r=mp.exports,Np={exports:{}},Tt={},Ep={exports:{}},Tp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,K){var X=A.length;A.push(K);e:for(;0<X;){var ae=X-1>>>1,ie=A[ae];if(0<i(ie,K))A[ae]=K,A[X]=ie,X=ae;else break e}}function n(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var K=A[0],X=A.pop();if(X!==K){A[0]=X;e:for(var ae=0,ie=A.length,Fe=ie>>>1;ae<Fe;){var Y=2*(ae+1)-1,me=A[Y],Oe=Y+1,L=A[Oe];if(0>i(me,X))Oe<ie&&0>i(L,me)?(A[ae]=L,A[Oe]=X,ae=Oe):(A[ae]=me,A[Y]=X,ae=Y);else if(Oe<ie&&0>i(L,X))A[ae]=L,A[Oe]=X,ae=Oe;else break e}}return K}function i(A,K){var X=A.sortIndex-K.sortIndex;return X!==0?X:A.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var c=[],u=[],d=1,f=null,h=3,x=!1,g=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(A){for(var K=n(u);K!==null;){if(K.callback===null)s(u);else if(K.startTime<=A)s(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(u)}}function j(A){if(b=!1,y(A),!g)if(n(c)!==null)g=!0,N(k);else{var K=n(u);K!==null&&ee(j,K.startTime-A)}}function k(A,K){g=!1,b&&(b=!1,p(R),R=-1),x=!0;var X=h;try{for(y(K),f=n(c);f!==null&&(!(f.expirationTime>K)||A&&!W());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,h=f.priorityLevel;var ie=ae(f.expirationTime<=K);K=e.unstable_now(),typeof ie=="function"?f.callback=ie:f===n(c)&&s(c),y(K)}else s(c);f=n(c)}if(f!==null)var Fe=!0;else{var Y=n(u);Y!==null&&ee(j,Y.startTime-K),Fe=!1}return Fe}finally{f=null,h=X,x=!1}}var D=!1,I=null,R=-1,_=5,T=-1;function W(){return!(e.unstable_now()-T<_)}function V(){if(I!==null){var A=e.unstable_now();T=A;var K=!0;try{K=I(!0,A)}finally{K?P():(D=!1,I=null)}}else D=!1}var P;if(typeof m=="function")P=function(){m(V)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,z=Z.port2;Z.port1.onmessage=V,P=function(){z.postMessage(null)}}else P=function(){v(V,0)};function N(A){I=A,D||(D=!0,P())}function ee(A,K){R=v(function(){A(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||x||(g=!0,N(k))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var X=h;h=K;try{return A()}finally{h=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,K){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var X=h;h=A;try{return K()}finally{h=X}},e.unstable_scheduleCallback=function(A,K,X){var ae=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ae+X:ae):X=ae,A){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=X+ie,A={id:d++,callback:K,priorityLevel:A,startTime:X,expirationTime:ie,sortIndex:-1},X>ae?(A.sortIndex=X,t(u,A),n(c)===null&&A===n(u)&&(b?(p(R),R=-1):b=!0,ee(j,X-ae))):(A.sortIndex=ie,t(c,A),g||x||(g=!0,N(k))),A},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(A){var K=h;return function(){var X=h;h=K;try{return A.apply(this,arguments)}finally{h=X}}}})(Tp);Ep.exports=Tp;var iy=Ep.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy=S,Nt=iy;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ip=new Set,ki={};function Ur(e,t){Ts(e,t),Ts(e+"Capture",t)}function Ts(e,t){for(ki[e]=t,e=0;e<t.length;e++)Ip.add(t[e])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ka=Object.prototype.hasOwnProperty,ly=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,du={},uu={};function ay(e){return ka.call(uu,e)?!0:ka.call(du,e)?!1:ly.test(e)?uu[e]=!0:(du[e]=!0,!1)}function cy(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dy(e,t,n,s){if(t===null||typeof t>"u"||cy(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ut(e,t,n,s,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ge[e]=new ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ge[t]=new ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ge[e]=new ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ge[e]=new ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ge[e]=new ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ge[e]=new ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ge[e]=new ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ge[e]=new ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ge[e]=new ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hc=/[\-:]([a-z])/g;function qc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hc,qc);Ge[t]=new ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hc,qc);Ge[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hc,qc);Ge[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ge[e]=new ut(e,1,!1,e.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ge[e]=new ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qc(e,t,n,s){var i=Ge.hasOwnProperty(t)?Ge[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dy(t,n,i,s)&&(n=null),s||i===null?ay(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var En=oy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,po=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),Kc=Symbol.for("react.strict_mode"),Na=Symbol.for("react.profiler"),Rp=Symbol.for("react.provider"),Fp=Symbol.for("react.context"),Gc=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Ta=Symbol.for("react.suspense_list"),Yc=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),zp=Symbol.for("react.offscreen"),fu=Symbol.iterator;function Gs(e){return e===null||typeof e!="object"?null:(e=fu&&e[fu]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,Kl;function li(e){if(Kl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Kl=t&&t[1]||""}return`
`+Kl+e}var Gl=!1;function Yl(e,t){if(!e||Gl)return"";Gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=s.stack.split(`
`),l=i.length-1,a=o.length-1;1<=l&&0<=a&&i[l]!==o[a];)a--;for(;1<=l&&0<=a;l--,a--)if(i[l]!==o[a]){if(l!==1||a!==1)do if(l--,a--,0>a||i[l]!==o[a]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=a);break}}}finally{Gl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?li(e):""}function uy(e){switch(e.tag){case 5:return li(e.type);case 16:return li("Lazy");case 13:return li("Suspense");case 19:return li("SuspenseList");case 0:case 2:case 15:return e=Yl(e.type,!1),e;case 11:return e=Yl(e.type.render,!1),e;case 1:return e=Yl(e.type,!0),e;default:return""}}function Ia(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zr:return"Fragment";case Xr:return"Portal";case Na:return"Profiler";case Kc:return"StrictMode";case Ea:return"Suspense";case Ta:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Fp:return(e.displayName||"Context")+".Consumer";case Rp:return(e._context.displayName||"Context")+".Provider";case Gc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yc:return t=e.displayName||null,t!==null?t:Ia(e.type)||"Memo";case Pn:t=e._payload,e=e._init;try{return Ia(e(t))}catch{}}return null}function fy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ia(t);case 8:return t===Kc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function py(e){var t=Dp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){s=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ho(e){e._valueTracker||(e._valueTracker=py(e))}function Pp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Dp(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function qo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ra(e,t){var n=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function pu(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=lr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Mp(e,t){t=t.checked,t!=null&&Qc(e,"checked",t,!1)}function Fa(e,t){Mp(e,t);var n=lr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?za(e,t.type,n):t.hasOwnProperty("defaultValue")&&za(e,t.type,lr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function za(e,t,n){(t!=="number"||qo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ai=Array.isArray;function ds(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+lr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Da(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(ai(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:lr(n)}}function _p(e,t){var n=lr(t.value),s=lr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function xu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mo,Ap=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mo=mo||document.createElement("div"),mo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ni(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hy=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(e){hy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fi[t]=fi[e]})});function Op(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||fi.hasOwnProperty(e)&&fi[e]?(""+t).trim():t+"px"}function Wp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=Op(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var my=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ma(e,t){if(t){if(my[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function _a(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=null;function Jc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Aa=null,us=null,fs=null;function yu(e){if(e=eo(e)){if(typeof Aa!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Il(t),Aa(e.stateNode,e.type,t))}}function Bp(e){us?fs?fs.push(e):fs=[e]:us=e}function $p(){if(us){var e=us,t=fs;if(fs=us=null,yu(e),t)for(e=0;e<t.length;e++)yu(t[e])}}function Up(e,t){return e(t)}function Vp(){}var Jl=!1;function Hp(e,t,n){if(Jl)return e(t,n);Jl=!0;try{return Up(e,t,n)}finally{Jl=!1,(us!==null||fs!==null)&&(Vp(),$p())}}function Ei(e,t){var n=e.stateNode;if(n===null)return null;var s=Il(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var Oa=!1;if(Sn)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{Oa=!1}function xy(e,t,n,s,i,o,l,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var pi=!1,Qo=null,Ko=!1,Wa=null,yy={onError:function(e){pi=!0,Qo=e}};function gy(e,t,n,s,i,o,l,a,c){pi=!1,Qo=null,xy.apply(yy,arguments)}function vy(e,t,n,s,i,o,l,a,c){if(gy.apply(this,arguments),pi){if(pi){var u=Qo;pi=!1,Qo=null}else throw Error(M(198));Ko||(Ko=!0,Wa=u)}}function Vr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gu(e){if(Vr(e)!==e)throw Error(M(188))}function by(e){var t=e.alternate;if(!t){if(t=Vr(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return gu(i),e;if(o===s)return gu(i),t;o=o.sibling}throw Error(M(188))}if(n.return!==s.return)n=i,s=o;else{for(var l=!1,a=i.child;a;){if(a===n){l=!0,n=i,s=o;break}if(a===s){l=!0,s=i,n=o;break}a=a.sibling}if(!l){for(a=o.child;a;){if(a===n){l=!0,n=o,s=i;break}if(a===s){l=!0,s=o,n=i;break}a=a.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==s)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function Qp(e){return e=by(e),e!==null?Kp(e):null}function Kp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Kp(e);if(t!==null)return t;e=e.sibling}return null}var Gp=Nt.unstable_scheduleCallback,vu=Nt.unstable_cancelCallback,jy=Nt.unstable_shouldYield,Sy=Nt.unstable_requestPaint,De=Nt.unstable_now,wy=Nt.unstable_getCurrentPriorityLevel,Xc=Nt.unstable_ImmediatePriority,Yp=Nt.unstable_UserBlockingPriority,Go=Nt.unstable_NormalPriority,Cy=Nt.unstable_LowPriority,Jp=Nt.unstable_IdlePriority,kl=null,ln=null;function ky(e){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Ty,Ny=Math.log,Ey=Math.LN2;function Ty(e){return e>>>=0,e===0?32:31-(Ny(e)/Ey|0)|0}var xo=64,yo=4194304;function ci(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yo(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~i;a!==0?s=ci(a):(o&=l,o!==0&&(s=ci(o)))}else l=n&~i,l!==0?s=ci(l):o!==0&&(s=ci(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Jt(t),i=1<<n,s|=e[n],t&=~i;return s}function Iy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ry(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Jt(o),a=1<<l,c=i[l];c===-1?(!(a&n)||a&s)&&(i[l]=Iy(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}function Ba(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xp(){var e=xo;return xo<<=1,!(xo&4194240)&&(xo=64),e}function Xl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Xi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=n}function Fy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Jt(n),o=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~o}}function Zc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Jt(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var he=0;function Zp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var eh,ed,th,nh,rh,$a=!1,go=[],Jn=null,Xn=null,Zn=null,Ti=new Map,Ii=new Map,Ln=[],zy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bu(e,t){switch(e){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":Ti.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(t.pointerId)}}function Js(e,t,n,s,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[i]},t!==null&&(t=eo(t),t!==null&&ed(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Dy(e,t,n,s,i){switch(t){case"focusin":return Jn=Js(Jn,e,t,n,s,i),!0;case"dragenter":return Xn=Js(Xn,e,t,n,s,i),!0;case"mouseover":return Zn=Js(Zn,e,t,n,s,i),!0;case"pointerover":var o=i.pointerId;return Ti.set(o,Js(Ti.get(o)||null,e,t,n,s,i)),!0;case"gotpointercapture":return o=i.pointerId,Ii.set(o,Js(Ii.get(o)||null,e,t,n,s,i)),!0}return!1}function sh(e){var t=br(e.target);if(t!==null){var n=Vr(t);if(n!==null){if(t=n.tag,t===13){if(t=qp(n),t!==null){e.blockedOn=t,rh(e.priority,function(){th(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ua(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);La=s,n.target.dispatchEvent(s),La=null}else return t=eo(n),t!==null&&ed(t),e.blockedOn=n,!1;t.shift()}return!0}function ju(e,t,n){Po(e)&&n.delete(t)}function Py(){$a=!1,Jn!==null&&Po(Jn)&&(Jn=null),Xn!==null&&Po(Xn)&&(Xn=null),Zn!==null&&Po(Zn)&&(Zn=null),Ti.forEach(ju),Ii.forEach(ju)}function Xs(e,t){e.blockedOn===t&&(e.blockedOn=null,$a||($a=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,Py)))}function Ri(e){function t(i){return Xs(i,e)}if(0<go.length){Xs(go[0],e);for(var n=1;n<go.length;n++){var s=go[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Jn!==null&&Xs(Jn,e),Xn!==null&&Xs(Xn,e),Zn!==null&&Xs(Zn,e),Ti.forEach(t),Ii.forEach(t),n=0;n<Ln.length;n++)s=Ln[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)sh(n),n.blockedOn===null&&Ln.shift()}var ps=En.ReactCurrentBatchConfig,Jo=!0;function My(e,t,n,s){var i=he,o=ps.transition;ps.transition=null;try{he=1,td(e,t,n,s)}finally{he=i,ps.transition=o}}function _y(e,t,n,s){var i=he,o=ps.transition;ps.transition=null;try{he=4,td(e,t,n,s)}finally{he=i,ps.transition=o}}function td(e,t,n,s){if(Jo){var i=Ua(e,t,n,s);if(i===null)aa(e,t,s,Xo,n),bu(e,s);else if(Dy(i,e,t,n,s))s.stopPropagation();else if(bu(e,s),t&4&&-1<zy.indexOf(e)){for(;i!==null;){var o=eo(i);if(o!==null&&eh(o),o=Ua(e,t,n,s),o===null&&aa(e,t,s,Xo,n),o===i)break;i=o}i!==null&&s.stopPropagation()}else aa(e,t,s,null,n)}}var Xo=null;function Ua(e,t,n,s){if(Xo=null,e=Jc(s),e=br(e),e!==null)if(t=Vr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xo=e,null}function ih(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wy()){case Xc:return 1;case Yp:return 4;case Go:case Cy:return 16;case Jp:return 536870912;default:return 16}default:return 16}}var Kn=null,nd=null,Mo=null;function oh(){if(Mo)return Mo;var e,t=nd,n=t.length,s,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===i[o-s];s++);return Mo=i.slice(e,1<s?1-s:void 0)}function _o(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vo(){return!0}function Su(){return!1}function It(e){function t(n,s,i,o,l){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?vo:Su,this.isPropagationStopped=Su,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),t}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rd=It(Os),Zi=Ee({},Os,{view:0,detail:0}),Ly=It(Zi),Zl,ea,Zs,Nl=Ee({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zs&&(Zs&&e.type==="mousemove"?(Zl=e.screenX-Zs.screenX,ea=e.screenY-Zs.screenY):ea=Zl=0,Zs=e),Zl)},movementY:function(e){return"movementY"in e?e.movementY:ea}}),wu=It(Nl),Ay=Ee({},Nl,{dataTransfer:0}),Oy=It(Ay),Wy=Ee({},Zi,{relatedTarget:0}),ta=It(Wy),By=Ee({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),$y=It(By),Uy=Ee({},Os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vy=It(Uy),Hy=Ee({},Os,{data:0}),Cu=It(Hy),qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ky={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ky[e])?!!t[e]:!1}function sd(){return Gy}var Yy=Ee({},Zi,{key:function(e){if(e.key){var t=qy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_o(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sd,charCode:function(e){return e.type==="keypress"?_o(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_o(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jy=It(Yy),Xy=Ee({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ku=It(Xy),Zy=Ee({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sd}),eg=It(Zy),tg=Ee({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),ng=It(tg),rg=Ee({},Nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sg=It(rg),ig=[9,13,27,32],id=Sn&&"CompositionEvent"in window,hi=null;Sn&&"documentMode"in document&&(hi=document.documentMode);var og=Sn&&"TextEvent"in window&&!hi,lh=Sn&&(!id||hi&&8<hi&&11>=hi),Nu=" ",Eu=!1;function ah(e,t){switch(e){case"keyup":return ig.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ch(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var es=!1;function lg(e,t){switch(e){case"compositionend":return ch(t);case"keypress":return t.which!==32?null:(Eu=!0,Nu);case"textInput":return e=t.data,e===Nu&&Eu?null:e;default:return null}}function ag(e,t){if(es)return e==="compositionend"||!id&&ah(e,t)?(e=oh(),Mo=nd=Kn=null,es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lh&&t.locale!=="ko"?null:t.data;default:return null}}var cg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cg[e.type]:t==="textarea"}function dh(e,t,n,s){Bp(s),t=Zo(t,"onChange"),0<t.length&&(n=new rd("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var mi=null,Fi=null;function dg(e){jh(e,0)}function El(e){var t=rs(e);if(Pp(t))return e}function ug(e,t){if(e==="change")return t}var uh=!1;if(Sn){var na;if(Sn){var ra="oninput"in document;if(!ra){var Iu=document.createElement("div");Iu.setAttribute("oninput","return;"),ra=typeof Iu.oninput=="function"}na=ra}else na=!1;uh=na&&(!document.documentMode||9<document.documentMode)}function Ru(){mi&&(mi.detachEvent("onpropertychange",fh),Fi=mi=null)}function fh(e){if(e.propertyName==="value"&&El(Fi)){var t=[];dh(t,Fi,e,Jc(e)),Hp(dg,t)}}function fg(e,t,n){e==="focusin"?(Ru(),mi=t,Fi=n,mi.attachEvent("onpropertychange",fh)):e==="focusout"&&Ru()}function pg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(Fi)}function hg(e,t){if(e==="click")return El(t)}function mg(e,t){if(e==="input"||e==="change")return El(t)}function xg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:xg;function zi(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!ka.call(t,i)||!Zt(e[i],t[i]))return!1}return!0}function Fu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zu(e,t){var n=Fu(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fu(n)}}function ph(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ph(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hh(){for(var e=window,t=qo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=qo(e.document)}return t}function od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yg(e){var t=hh(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ph(n.ownerDocument.documentElement,n)){if(s!==null&&od(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(s.start,i);s=s.end===void 0?o:Math.min(s.end,i),!e.extend&&o>s&&(i=s,s=o,o=i),i=zu(n,o);var l=zu(n,s);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gg=Sn&&"documentMode"in document&&11>=document.documentMode,ts=null,Va=null,xi=null,Ha=!1;function Du(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ha||ts==null||ts!==qo(s)||(s=ts,"selectionStart"in s&&od(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),xi&&zi(xi,s)||(xi=s,s=Zo(Va,"onSelect"),0<s.length&&(t=new rd("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ts)))}function bo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ns={animationend:bo("Animation","AnimationEnd"),animationiteration:bo("Animation","AnimationIteration"),animationstart:bo("Animation","AnimationStart"),transitionend:bo("Transition","TransitionEnd")},sa={},mh={};Sn&&(mh=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function Tl(e){if(sa[e])return sa[e];if(!ns[e])return e;var t=ns[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mh)return sa[e]=t[n];return e}var xh=Tl("animationend"),yh=Tl("animationiteration"),gh=Tl("animationstart"),vh=Tl("transitionend"),bh=new Map,Pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(e,t){bh.set(e,t),Ur(t,[e])}for(var ia=0;ia<Pu.length;ia++){var oa=Pu[ia],vg=oa.toLowerCase(),bg=oa[0].toUpperCase()+oa.slice(1);ur(vg,"on"+bg)}ur(xh,"onAnimationEnd");ur(yh,"onAnimationIteration");ur(gh,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(vh,"onTransitionEnd");Ts("onMouseEnter",["mouseout","mouseover"]);Ts("onMouseLeave",["mouseout","mouseover"]);Ts("onPointerEnter",["pointerout","pointerover"]);Ts("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jg=new Set("cancel close invalid load scroll toggle".split(" ").concat(di));function Mu(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,vy(s,t,void 0,e),e.currentTarget=null}function jh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var l=s.length-1;0<=l;l--){var a=s[l],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Mu(i,a,u),o=c}else for(l=0;l<s.length;l++){if(a=s[l],c=a.instance,u=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Mu(i,a,u),o=c}}}if(Ko)throw e=Wa,Ko=!1,Wa=null,e}function je(e,t){var n=t[Ya];n===void 0&&(n=t[Ya]=new Set);var s=e+"__bubble";n.has(s)||(Sh(t,e,2,!1),n.add(s))}function la(e,t,n){var s=0;t&&(s|=4),Sh(n,e,s,t)}var jo="_reactListening"+Math.random().toString(36).slice(2);function Di(e){if(!e[jo]){e[jo]=!0,Ip.forEach(function(n){n!=="selectionchange"&&(jg.has(n)||la(n,!1,e),la(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jo]||(t[jo]=!0,la("selectionchange",!1,t))}}function Sh(e,t,n,s){switch(ih(t)){case 1:var i=My;break;case 4:i=_y;break;default:i=td}n=i.bind(null,t,n,e),i=void 0,!Oa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function aa(e,t,n,s,i){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var a=s.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;a!==null;){if(l=br(a),l===null)return;if(c=l.tag,c===5||c===6){s=o=l;continue e}a=a.parentNode}}s=s.return}Hp(function(){var u=o,d=Jc(n),f=[];e:{var h=bh.get(e);if(h!==void 0){var x=rd,g=e;switch(e){case"keypress":if(_o(n)===0)break e;case"keydown":case"keyup":x=Jy;break;case"focusin":g="focus",x=ta;break;case"focusout":g="blur",x=ta;break;case"beforeblur":case"afterblur":x=ta;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=eg;break;case xh:case yh:case gh:x=$y;break;case vh:x=ng;break;case"scroll":x=Ly;break;case"wheel":x=sg;break;case"copy":case"cut":case"paste":x=Vy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=ku}var b=(t&4)!==0,v=!b&&e==="scroll",p=b?h!==null?h+"Capture":null:h;b=[];for(var m=u,y;m!==null;){y=m;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,p!==null&&(j=Ei(m,p),j!=null&&b.push(Pi(m,j,y)))),v)break;m=m.return}0<b.length&&(h=new x(h,g,null,n,d),f.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==La&&(g=n.relatedTarget||n.fromElement)&&(br(g)||g[wn]))break e;if((x||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,x?(g=n.relatedTarget||n.toElement,x=u,g=g?br(g):null,g!==null&&(v=Vr(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(x=null,g=u),x!==g)){if(b=wu,j="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(b=ku,j="onPointerLeave",p="onPointerEnter",m="pointer"),v=x==null?h:rs(x),y=g==null?h:rs(g),h=new b(j,m+"leave",x,n,d),h.target=v,h.relatedTarget=y,j=null,br(d)===u&&(b=new b(p,m+"enter",g,n,d),b.target=y,b.relatedTarget=v,j=b),v=j,x&&g)t:{for(b=x,p=g,m=0,y=b;y;y=Gr(y))m++;for(y=0,j=p;j;j=Gr(j))y++;for(;0<m-y;)b=Gr(b),m--;for(;0<y-m;)p=Gr(p),y--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=Gr(b),p=Gr(p)}b=null}else b=null;x!==null&&_u(f,h,x,b,!1),g!==null&&v!==null&&_u(f,v,g,b,!0)}}e:{if(h=u?rs(u):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var k=ug;else if(Tu(h))if(uh)k=mg;else{k=pg;var D=fg}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=hg);if(k&&(k=k(e,u))){dh(f,k,n,d);break e}D&&D(e,h,u),e==="focusout"&&(D=h._wrapperState)&&D.controlled&&h.type==="number"&&za(h,"number",h.value)}switch(D=u?rs(u):window,e){case"focusin":(Tu(D)||D.contentEditable==="true")&&(ts=D,Va=u,xi=null);break;case"focusout":xi=Va=ts=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,Du(f,n,d);break;case"selectionchange":if(gg)break;case"keydown":case"keyup":Du(f,n,d)}var I;if(id)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else es?ah(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(lh&&n.locale!=="ko"&&(es||R!=="onCompositionStart"?R==="onCompositionEnd"&&es&&(I=oh()):(Kn=d,nd="value"in Kn?Kn.value:Kn.textContent,es=!0)),D=Zo(u,R),0<D.length&&(R=new Cu(R,e,null,n,d),f.push({event:R,listeners:D}),I?R.data=I:(I=ch(n),I!==null&&(R.data=I)))),(I=og?lg(e,n):ag(e,n))&&(u=Zo(u,"onBeforeInput"),0<u.length&&(d=new Cu("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=I))}jh(f,t)})}function Pi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zo(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ei(e,n),o!=null&&s.unshift(Pi(e,o,i)),o=Ei(e,t),o!=null&&s.push(Pi(e,o,i))),e=e.return}return s}function Gr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _u(e,t,n,s,i){for(var o=t._reactName,l=[];n!==null&&n!==s;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&u!==null&&(a=u,i?(c=Ei(n,o),c!=null&&l.unshift(Pi(n,c,a))):i||(c=Ei(n,o),c!=null&&l.push(Pi(n,c,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Sg=/\r\n?/g,wg=/\u0000|\uFFFD/g;function Lu(e){return(typeof e=="string"?e:""+e).replace(Sg,`
`).replace(wg,"")}function So(e,t,n){if(t=Lu(t),Lu(e)!==t&&n)throw Error(M(425))}function el(){}var qa=null,Qa=null;function Ka(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ga=typeof setTimeout=="function"?setTimeout:void 0,Cg=typeof clearTimeout=="function"?clearTimeout:void 0,Au=typeof Promise=="function"?Promise:void 0,kg=typeof queueMicrotask=="function"?queueMicrotask:typeof Au<"u"?function(e){return Au.resolve(null).then(e).catch(Ng)}:Ga;function Ng(e){setTimeout(function(){throw e})}function ca(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),Ri(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);Ri(t)}function er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ou(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),on="__reactFiber$"+Ws,Mi="__reactProps$"+Ws,wn="__reactContainer$"+Ws,Ya="__reactEvents$"+Ws,Eg="__reactListeners$"+Ws,Tg="__reactHandles$"+Ws;function br(e){var t=e[on];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wn]||n[on]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ou(e);e!==null;){if(n=e[on])return n;e=Ou(e)}return t}e=n,n=e.parentNode}return null}function eo(e){return e=e[on]||e[wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Il(e){return e[Mi]||null}var Ja=[],ss=-1;function fr(e){return{current:e}}function Se(e){0>ss||(e.current=Ja[ss],Ja[ss]=null,ss--)}function ve(e,t){ss++,Ja[ss]=e.current,e.current=t}var ar={},et=fr(ar),yt=fr(!1),_r=ar;function Is(e,t){var n=e.type.contextTypes;if(!n)return ar;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function gt(e){return e=e.childContextTypes,e!=null}function tl(){Se(yt),Se(et)}function Wu(e,t,n){if(et.current!==ar)throw Error(M(168));ve(et,t),ve(yt,n)}function wh(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(M(108,fy(e)||"Unknown",i));return Ee({},n,s)}function nl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ar,_r=et.current,ve(et,e),ve(yt,yt.current),!0}function Bu(e,t,n){var s=e.stateNode;if(!s)throw Error(M(169));n?(e=wh(e,t,_r),s.__reactInternalMemoizedMergedChildContext=e,Se(yt),Se(et),ve(et,e)):Se(yt),ve(yt,n)}var fn=null,Rl=!1,da=!1;function Ch(e){fn===null?fn=[e]:fn.push(e)}function Ig(e){Rl=!0,Ch(e)}function pr(){if(!da&&fn!==null){da=!0;var e=0,t=he;try{var n=fn;for(he=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}fn=null,Rl=!1}catch(i){throw fn!==null&&(fn=fn.slice(e+1)),Gp(Xc,pr),i}finally{he=t,da=!1}}return null}var is=[],os=0,rl=null,sl=0,Pt=[],Mt=0,Lr=null,gn=1,vn="";function gr(e,t){is[os++]=sl,is[os++]=rl,rl=e,sl=t}function kh(e,t,n){Pt[Mt++]=gn,Pt[Mt++]=vn,Pt[Mt++]=Lr,Lr=e;var s=gn;e=vn;var i=32-Jt(s)-1;s&=~(1<<i),n+=1;var o=32-Jt(t)+i;if(30<o){var l=i-i%5;o=(s&(1<<l)-1).toString(32),s>>=l,i-=l,gn=1<<32-Jt(t)+i|n<<i|s,vn=o+e}else gn=1<<o|n<<i|s,vn=e}function ld(e){e.return!==null&&(gr(e,1),kh(e,1,0))}function ad(e){for(;e===rl;)rl=is[--os],is[os]=null,sl=is[--os],is[os]=null;for(;e===Lr;)Lr=Pt[--Mt],Pt[Mt]=null,vn=Pt[--Mt],Pt[Mt]=null,gn=Pt[--Mt],Pt[Mt]=null}var kt=null,wt=null,Ce=!1,Kt=null;function Nh(e,t){var n=_t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $u(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,wt=er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Lr!==null?{id:gn,overflow:vn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kt=e,wt=null,!0):!1;default:return!1}}function Xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Za(e){if(Ce){var t=wt;if(t){var n=t;if(!$u(e,t)){if(Xa(e))throw Error(M(418));t=er(n.nextSibling);var s=kt;t&&$u(e,t)?Nh(s,n):(e.flags=e.flags&-4097|2,Ce=!1,kt=e)}}else{if(Xa(e))throw Error(M(418));e.flags=e.flags&-4097|2,Ce=!1,kt=e}}}function Uu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function wo(e){if(e!==kt)return!1;if(!Ce)return Uu(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ka(e.type,e.memoizedProps)),t&&(t=wt)){if(Xa(e))throw Eh(),Error(M(418));for(;t;)Nh(e,t),t=er(t.nextSibling)}if(Uu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wt=er(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wt=null}}else wt=kt?er(e.stateNode.nextSibling):null;return!0}function Eh(){for(var e=wt;e;)e=er(e.nextSibling)}function Rs(){wt=kt=null,Ce=!1}function cd(e){Kt===null?Kt=[e]:Kt.push(e)}var Rg=En.ReactCurrentBatchConfig;function ei(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var s=n.stateNode}if(!s)throw Error(M(147,e));var i=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var a=i.refs;l===null?delete a[o]:a[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function Co(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vu(e){var t=e._init;return t(e._payload)}function Th(e){function t(p,m){if(e){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function s(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=sr(p,m),p.index=0,p.sibling=null,p}function o(p,m,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,y,j){return m===null||m.tag!==6?(m=ya(y,p.mode,j),m.return=p,m):(m=i(m,y),m.return=p,m)}function c(p,m,y,j){var k=y.type;return k===Zr?d(p,m,y.props.children,j,y.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Pn&&Vu(k)===m.type)?(j=i(m,y.props),j.ref=ei(p,m,y),j.return=p,j):(j=Uo(y.type,y.key,y.props,null,p.mode,j),j.ref=ei(p,m,y),j.return=p,j)}function u(p,m,y,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=ga(y,p.mode,j),m.return=p,m):(m=i(m,y.children||[]),m.return=p,m)}function d(p,m,y,j,k){return m===null||m.tag!==7?(m=Mr(y,p.mode,j,k),m.return=p,m):(m=i(m,y),m.return=p,m)}function f(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ya(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case po:return y=Uo(m.type,m.key,m.props,null,p.mode,y),y.ref=ei(p,null,m),y.return=p,y;case Xr:return m=ga(m,p.mode,y),m.return=p,m;case Pn:var j=m._init;return f(p,j(m._payload),y)}if(ai(m)||Gs(m))return m=Mr(m,p.mode,y,null),m.return=p,m;Co(p,m)}return null}function h(p,m,y,j){var k=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:a(p,m,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case po:return y.key===k?c(p,m,y,j):null;case Xr:return y.key===k?u(p,m,y,j):null;case Pn:return k=y._init,h(p,m,k(y._payload),j)}if(ai(y)||Gs(y))return k!==null?null:d(p,m,y,j,null);Co(p,y)}return null}function x(p,m,y,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(y)||null,a(m,p,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case po:return p=p.get(j.key===null?y:j.key)||null,c(m,p,j,k);case Xr:return p=p.get(j.key===null?y:j.key)||null,u(m,p,j,k);case Pn:var D=j._init;return x(p,m,y,D(j._payload),k)}if(ai(j)||Gs(j))return p=p.get(y)||null,d(m,p,j,k,null);Co(m,j)}return null}function g(p,m,y,j){for(var k=null,D=null,I=m,R=m=0,_=null;I!==null&&R<y.length;R++){I.index>R?(_=I,I=null):_=I.sibling;var T=h(p,I,y[R],j);if(T===null){I===null&&(I=_);break}e&&I&&T.alternate===null&&t(p,I),m=o(T,m,R),D===null?k=T:D.sibling=T,D=T,I=_}if(R===y.length)return n(p,I),Ce&&gr(p,R),k;if(I===null){for(;R<y.length;R++)I=f(p,y[R],j),I!==null&&(m=o(I,m,R),D===null?k=I:D.sibling=I,D=I);return Ce&&gr(p,R),k}for(I=s(p,I);R<y.length;R++)_=x(I,p,R,y[R],j),_!==null&&(e&&_.alternate!==null&&I.delete(_.key===null?R:_.key),m=o(_,m,R),D===null?k=_:D.sibling=_,D=_);return e&&I.forEach(function(W){return t(p,W)}),Ce&&gr(p,R),k}function b(p,m,y,j){var k=Gs(y);if(typeof k!="function")throw Error(M(150));if(y=k.call(y),y==null)throw Error(M(151));for(var D=k=null,I=m,R=m=0,_=null,T=y.next();I!==null&&!T.done;R++,T=y.next()){I.index>R?(_=I,I=null):_=I.sibling;var W=h(p,I,T.value,j);if(W===null){I===null&&(I=_);break}e&&I&&W.alternate===null&&t(p,I),m=o(W,m,R),D===null?k=W:D.sibling=W,D=W,I=_}if(T.done)return n(p,I),Ce&&gr(p,R),k;if(I===null){for(;!T.done;R++,T=y.next())T=f(p,T.value,j),T!==null&&(m=o(T,m,R),D===null?k=T:D.sibling=T,D=T);return Ce&&gr(p,R),k}for(I=s(p,I);!T.done;R++,T=y.next())T=x(I,p,R,T.value,j),T!==null&&(e&&T.alternate!==null&&I.delete(T.key===null?R:T.key),m=o(T,m,R),D===null?k=T:D.sibling=T,D=T);return e&&I.forEach(function(V){return t(p,V)}),Ce&&gr(p,R),k}function v(p,m,y,j){if(typeof y=="object"&&y!==null&&y.type===Zr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case po:e:{for(var k=y.key,D=m;D!==null;){if(D.key===k){if(k=y.type,k===Zr){if(D.tag===7){n(p,D.sibling),m=i(D,y.props.children),m.return=p,p=m;break e}}else if(D.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Pn&&Vu(k)===D.type){n(p,D.sibling),m=i(D,y.props),m.ref=ei(p,D,y),m.return=p,p=m;break e}n(p,D);break}else t(p,D);D=D.sibling}y.type===Zr?(m=Mr(y.props.children,p.mode,j,y.key),m.return=p,p=m):(j=Uo(y.type,y.key,y.props,null,p.mode,j),j.ref=ei(p,m,y),j.return=p,p=j)}return l(p);case Xr:e:{for(D=y.key;m!==null;){if(m.key===D)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=i(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=ga(y,p.mode,j),m.return=p,p=m}return l(p);case Pn:return D=y._init,v(p,m,D(y._payload),j)}if(ai(y))return g(p,m,y,j);if(Gs(y))return b(p,m,y,j);Co(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=i(m,y),m.return=p,p=m):(n(p,m),m=ya(y,p.mode,j),m.return=p,p=m),l(p)):n(p,m)}return v}var Fs=Th(!0),Ih=Th(!1),il=fr(null),ol=null,ls=null,dd=null;function ud(){dd=ls=ol=null}function fd(e){var t=il.current;Se(il),e._currentValue=t}function ec(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function hs(e,t){ol=e,dd=ls=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xt=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(dd!==e)if(e={context:e,memoizedValue:t,next:null},ls===null){if(ol===null)throw Error(M(308));ls=e,ol.dependencies={lanes:0,firstContext:e}}else ls=ls.next=e;return t}var jr=null;function pd(e){jr===null?jr=[e]:jr.push(e)}function Rh(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,pd(t)):(n.next=i.next,i.next=n),t.interleaved=n,Cn(e,s)}function Cn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function hd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tr(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ce&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Cn(e,n)}return i=s.interleaved,i===null?(t.next=t,pd(s)):(t.next=i.next,i.next=t),s.interleaved=t,Cn(e,n)}function Lo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Zc(e,n)}}function Hu(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ll(e,t,n,s){var i=e.updateQueue;Mn=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,l===null?o=u:l.next=u,l=c;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==l&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=i.baseState;l=0,d=u=c=null,a=o;do{var h=a.lane,x=a.eventTime;if((s&h)===h){d!==null&&(d=d.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,b=a;switch(h=t,x=n,b.tag){case 1:if(g=b.payload,typeof g=="function"){f=g.call(x,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=b.payload,h=typeof g=="function"?g.call(x,f,h):g,h==null)break e;f=Ee({},f,h);break e;case 2:Mn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else x={eventTime:x,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=x,c=f):d=d.next=x,l|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Or|=l,e.lanes=l,e.memoizedState=f}}function qu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(M(191,i));i.call(s)}}}var to={},an=fr(to),_i=fr(to),Li=fr(to);function Sr(e){if(e===to)throw Error(M(174));return e}function md(e,t){switch(ve(Li,t),ve(_i,e),ve(an,to),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pa(t,e)}Se(an),ve(an,t)}function zs(){Se(an),Se(_i),Se(Li)}function zh(e){Sr(Li.current);var t=Sr(an.current),n=Pa(t,e.type);t!==n&&(ve(_i,e),ve(an,n))}function xd(e){_i.current===e&&(Se(an),Se(_i))}var ke=fr(0);function al(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function yd(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var Ao=En.ReactCurrentDispatcher,fa=En.ReactCurrentBatchConfig,Ar=0,Ne=null,Be=null,He=null,cl=!1,yi=!1,Ai=0,Fg=0;function Je(){throw Error(M(321))}function gd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zt(e[n],t[n]))return!1;return!0}function vd(e,t,n,s,i,o){if(Ar=o,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ao.current=e===null||e.memoizedState===null?Mg:_g,e=n(s,i),yi){o=0;do{if(yi=!1,Ai=0,25<=o)throw Error(M(301));o+=1,He=Be=null,t.updateQueue=null,Ao.current=Lg,e=n(s,i)}while(yi)}if(Ao.current=dl,t=Be!==null&&Be.next!==null,Ar=0,He=Be=Ne=null,cl=!1,t)throw Error(M(300));return e}function bd(){var e=Ai!==0;return Ai=0,e}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ne.memoizedState=He=e:He=He.next=e,He}function Ot(){if(Be===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=He===null?Ne.memoizedState:He.next;if(t!==null)He=t,Be=e;else{if(e===null)throw Error(M(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},He===null?Ne.memoizedState=He=e:He=He.next=e}return He}function Oi(e,t){return typeof t=="function"?t(e):t}function pa(e){var t=Ot(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var s=Be,i=s.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}s.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,s=s.baseState;var a=l=null,c=null,u=o;do{var d=u.lane;if((Ar&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,l=s):c=c.next=f,Ne.lanes|=d,Or|=d}u=u.next}while(u!==null&&u!==o);c===null?l=s:c.next=a,Zt(s,t.memoizedState)||(xt=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ne.lanes|=o,Or|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ha(e){var t=Ot(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=e(o,l.action),l=l.next;while(l!==i);Zt(o,t.memoizedState)||(xt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function Dh(){}function Ph(e,t){var n=Ne,s=Ot(),i=t(),o=!Zt(s.memoizedState,i);if(o&&(s.memoizedState=i,xt=!0),s=s.queue,jd(Lh.bind(null,n,s,e),[e]),s.getSnapshot!==t||o||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,Wi(9,_h.bind(null,n,s,i,t),void 0,null),qe===null)throw Error(M(349));Ar&30||Mh(n,t,i)}return i}function Mh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _h(e,t,n,s){t.value=n,t.getSnapshot=s,Ah(t)&&Oh(e)}function Lh(e,t,n){return n(function(){Ah(t)&&Oh(e)})}function Ah(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zt(e,n)}catch{return!0}}function Oh(e){var t=Cn(e,1);t!==null&&Xt(t,e,1,-1)}function Qu(e){var t=tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:e},t.queue=e,e=e.dispatch=Pg.bind(null,Ne,e),[t.memoizedState,e]}function Wi(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Wh(){return Ot().memoizedState}function Oo(e,t,n,s){var i=tn();Ne.flags|=e,i.memoizedState=Wi(1|t,n,void 0,s===void 0?null:s)}function Fl(e,t,n,s){var i=Ot();s=s===void 0?null:s;var o=void 0;if(Be!==null){var l=Be.memoizedState;if(o=l.destroy,s!==null&&gd(s,l.deps)){i.memoizedState=Wi(t,n,o,s);return}}Ne.flags|=e,i.memoizedState=Wi(1|t,n,o,s)}function Ku(e,t){return Oo(8390656,8,e,t)}function jd(e,t){return Fl(2048,8,e,t)}function Bh(e,t){return Fl(4,2,e,t)}function $h(e,t){return Fl(4,4,e,t)}function Uh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vh(e,t,n){return n=n!=null?n.concat([e]):null,Fl(4,4,Uh.bind(null,t,e),n)}function Sd(){}function Hh(e,t){var n=Ot();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&gd(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function qh(e,t){var n=Ot();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&gd(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Qh(e,t,n){return Ar&21?(Zt(n,t)||(n=Xp(),Ne.lanes|=n,Or|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=n)}function zg(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var s=fa.transition;fa.transition={};try{e(!1),t()}finally{he=n,fa.transition=s}}function Kh(){return Ot().memoizedState}function Dg(e,t,n){var s=rr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Gh(e))Yh(t,n);else if(n=Rh(e,t,n,s),n!==null){var i=lt();Xt(n,e,s,i),Jh(n,t,s)}}function Pg(e,t,n){var s=rr(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gh(e))Yh(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,a=o(l,n);if(i.hasEagerState=!0,i.eagerState=a,Zt(a,l)){var c=t.interleaved;c===null?(i.next=i,pd(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=Rh(e,t,i,s),n!==null&&(i=lt(),Xt(n,e,s,i),Jh(n,t,s))}}function Gh(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function Yh(e,t){yi=cl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jh(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Zc(e,n)}}var dl={readContext:At,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Mg={readContext:At,useCallback:function(e,t){return tn().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:Ku,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Oo(4194308,4,Uh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=tn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=tn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Dg.bind(null,Ne,e),[s.memoizedState,e]},useRef:function(e){var t=tn();return e={current:e},t.memoizedState=e},useState:Qu,useDebugValue:Sd,useDeferredValue:function(e){return tn().memoizedState=e},useTransition:function(){var e=Qu(!1),t=e[0];return e=zg.bind(null,e[1]),tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ne,i=tn();if(Ce){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),qe===null)throw Error(M(349));Ar&30||Mh(s,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ku(Lh.bind(null,s,o,e),[e]),s.flags|=2048,Wi(9,_h.bind(null,s,o,n,t),void 0,null),n},useId:function(){var e=tn(),t=qe.identifierPrefix;if(Ce){var n=vn,s=gn;n=(s&~(1<<32-Jt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ai++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Fg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_g={readContext:At,useCallback:Hh,useContext:At,useEffect:jd,useImperativeHandle:Vh,useInsertionEffect:Bh,useLayoutEffect:$h,useMemo:qh,useReducer:pa,useRef:Wh,useState:function(){return pa(Oi)},useDebugValue:Sd,useDeferredValue:function(e){var t=Ot();return Qh(t,Be.memoizedState,e)},useTransition:function(){var e=pa(Oi)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:Dh,useSyncExternalStore:Ph,useId:Kh,unstable_isNewReconciler:!1},Lg={readContext:At,useCallback:Hh,useContext:At,useEffect:jd,useImperativeHandle:Vh,useInsertionEffect:Bh,useLayoutEffect:$h,useMemo:qh,useReducer:ha,useRef:Wh,useState:function(){return ha(Oi)},useDebugValue:Sd,useDeferredValue:function(e){var t=Ot();return Be===null?t.memoizedState=e:Qh(t,Be.memoizedState,e)},useTransition:function(){var e=ha(Oi)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:Dh,useSyncExternalStore:Ph,useId:Kh,unstable_isNewReconciler:!1};function Vt(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function tc(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zl={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=lt(),i=rr(e),o=bn(s,i);o.payload=t,n!=null&&(o.callback=n),t=tr(e,o,i),t!==null&&(Xt(t,e,i,s),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=lt(),i=rr(e),o=bn(s,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=tr(e,o,i),t!==null&&(Xt(t,e,i,s),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lt(),s=rr(e),i=bn(n,s);i.tag=2,t!=null&&(i.callback=t),t=tr(e,i,s),t!==null&&(Xt(t,e,s,n),Lo(t,e,s))}};function Gu(e,t,n,s,i,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,l):t.prototype&&t.prototype.isPureReactComponent?!zi(n,s)||!zi(i,o):!0}function Xh(e,t,n){var s=!1,i=ar,o=t.contextType;return typeof o=="object"&&o!==null?o=At(o):(i=gt(t)?_r:et.current,s=t.contextTypes,o=(s=s!=null)?Is(e,i):ar),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Yu(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&zl.enqueueReplaceState(t,t.state,null)}function nc(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},hd(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=At(o):(o=gt(t)?_r:et.current,i.context=Is(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(tc(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&zl.enqueueReplaceState(i,i.state,null),ll(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ds(e,t){try{var n="",s=t;do n+=uy(s),s=s.return;while(s);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function ma(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function rc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ag=typeof WeakMap=="function"?WeakMap:Map;function Zh(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){fl||(fl=!0,pc=s),rc(e,t)},n}function em(e,t,n){n=bn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){rc(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){rc(e,t),typeof s!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Ju(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Ag;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=Xg.bind(null,e,t,n),t.then(e,e))}function Xu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zu(e,t,n,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,tr(n,t,1))),n.lanes|=1),e)}var Og=En.ReactCurrentOwner,xt=!1;function st(e,t,n,s){t.child=e===null?Ih(t,null,n,s):Fs(t,e.child,n,s)}function ef(e,t,n,s,i){n=n.render;var o=t.ref;return hs(t,i),s=vd(e,t,n,s,o,i),n=bd(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kn(e,t,i)):(Ce&&n&&ld(t),t.flags|=1,st(e,t,s,i),t.child)}function tf(e,t,n,s,i){if(e===null){var o=n.type;return typeof o=="function"&&!Rd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,tm(e,t,o,s,i)):(e=Uo(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(l,s)&&e.ref===t.ref)return kn(e,t,i)}return t.flags|=1,e=sr(o,s),e.ref=t.ref,e.return=t,t.child=e}function tm(e,t,n,s,i){if(e!==null){var o=e.memoizedProps;if(zi(o,s)&&e.ref===t.ref)if(xt=!1,t.pendingProps=s=o,(e.lanes&i)!==0)e.flags&131072&&(xt=!0);else return t.lanes=e.lanes,kn(e,t,i)}return sc(e,t,n,s,i)}function nm(e,t,n){var s=t.pendingProps,i=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(cs,bt),bt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(cs,bt),bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,ve(cs,bt),bt|=s}else o!==null?(s=o.baseLanes|n,t.memoizedState=null):s=n,ve(cs,bt),bt|=s;return st(e,t,i,n),t.child}function rm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sc(e,t,n,s,i){var o=gt(n)?_r:et.current;return o=Is(t,o),hs(t,i),n=vd(e,t,n,s,o,i),s=bd(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kn(e,t,i)):(Ce&&s&&ld(t),t.flags|=1,st(e,t,n,i),t.child)}function nf(e,t,n,s,i){if(gt(n)){var o=!0;nl(t)}else o=!1;if(hs(t,i),t.stateNode===null)Wo(e,t),Xh(t,n,s),nc(t,n,s,i),s=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=At(u):(u=gt(n)?_r:et.current,u=Is(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==s||c!==u)&&Yu(t,l,s,u),Mn=!1;var h=t.memoizedState;l.state=h,ll(t,s,l,i),c=t.memoizedState,a!==s||h!==c||yt.current||Mn?(typeof d=="function"&&(tc(t,n,d,s),c=t.memoizedState),(a=Mn||Gu(t,n,a,s,h,c,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=u,s=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Fh(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Vt(t.type,a),l.props=u,f=t.pendingProps,h=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=At(c):(c=gt(n)?_r:et.current,c=Is(t,c));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==f||h!==c)&&Yu(t,l,s,c),Mn=!1,h=t.memoizedState,l.state=h,ll(t,s,l,i);var g=t.memoizedState;a!==f||h!==g||yt.current||Mn?(typeof x=="function"&&(tc(t,n,x,s),g=t.memoizedState),(u=Mn||Gu(t,n,u,s,h,g,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,g,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),l.props=s,l.state=g,l.context=c,s=u):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return ic(e,t,n,s,o,i)}function ic(e,t,n,s,i,o){rm(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return i&&Bu(t,n,!1),kn(e,t,o);s=t.stateNode,Og.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Fs(t,e.child,null,o),t.child=Fs(t,null,a,o)):st(e,t,a,o),t.memoizedState=s.state,i&&Bu(t,n,!0),t.child}function sm(e){var t=e.stateNode;t.pendingContext?Wu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wu(e,t.context,!1),md(e,t.containerInfo)}function rf(e,t,n,s,i){return Rs(),cd(i),t.flags|=256,st(e,t,n,s),t.child}var oc={dehydrated:null,treeContext:null,retryLane:0};function lc(e){return{baseLanes:e,cachePool:null,transitions:null}}function im(e,t,n){var s=t.pendingProps,i=ke.current,o=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ve(ke,i&1),e===null)return Za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Ml(l,s,0,null),e=Mr(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=lc(n),t.memoizedState=oc,e):wd(t,l));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Wg(e,t,l,s,a,i,n);if(o){o=s.fallback,l=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=sr(i,c),s.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=sr(a,o):(o=Mr(o,l,n,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=e.child.memoizedState,l=l===null?lc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=oc,s}return o=e.child,e=o.sibling,s=sr(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function wd(e,t){return t=Ml({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ko(e,t,n,s){return s!==null&&cd(s),Fs(t,e.child,null,n),e=wd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wg(e,t,n,s,i,o,l){if(n)return t.flags&256?(t.flags&=-257,s=ma(Error(M(422))),ko(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,i=t.mode,s=Ml({mode:"visible",children:s.children},i,0,null),o=Mr(o,i,l,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&Fs(t,e.child,null,l),t.child.memoizedState=lc(l),t.memoizedState=oc,o);if(!(t.mode&1))return ko(e,t,l,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var a=s.dgst;return s=a,o=Error(M(419)),s=ma(o,s,void 0),ko(e,t,l,s)}if(a=(l&e.childLanes)!==0,xt||a){if(s=qe,s!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Cn(e,i),Xt(s,e,i,-1))}return Id(),s=ma(Error(M(421))),ko(e,t,l,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Zg.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,wt=er(i.nextSibling),kt=t,Ce=!0,Kt=null,e!==null&&(Pt[Mt++]=gn,Pt[Mt++]=vn,Pt[Mt++]=Lr,gn=e.id,vn=e.overflow,Lr=t),t=wd(t,s.children),t.flags|=4096,t)}function sf(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ec(e.return,t,n)}function xa(e,t,n,s,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=i)}function om(e,t,n){var s=t.pendingProps,i=s.revealOrder,o=s.tail;if(st(e,t,s.children,n),s=ke.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sf(e,n,t);else if(e.tag===19)sf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ve(ke,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&al(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),xa(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&al(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}xa(t,!0,n,null,o);break;case"together":xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Bg(e,t,n){switch(t.tag){case 3:sm(t),Rs();break;case 5:zh(t);break;case 1:gt(t.type)&&nl(t);break;case 4:md(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;ve(il,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ve(ke,ke.current&1),t.flags|=128,null):n&t.child.childLanes?im(e,t,n):(ve(ke,ke.current&1),e=kn(e,t,n),e!==null?e.sibling:null);ve(ke,ke.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return om(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(ke,ke.current),s)break;return null;case 22:case 23:return t.lanes=0,nm(e,t,n)}return kn(e,t,n)}var lm,ac,am,cm;lm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ac=function(){};am=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Sr(an.current);var o=null;switch(n){case"input":i=Ra(e,i),s=Ra(e,s),o=[];break;case"select":i=Ee({},i,{value:void 0}),s=Ee({},s,{value:void 0}),o=[];break;case"textarea":i=Da(e,i),s=Da(e,s),o=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=el)}Ma(n,s);var l;n=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ki.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in s){var c=s[u];if(a=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ki.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&je("scroll",e),o||a===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};cm=function(e,t,n,s){n!==s&&(t.flags|=4)};function ti(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function $g(e,t,n){var s=t.pendingProps;switch(ad(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return gt(t.type)&&tl(),Xe(t),null;case 3:return s=t.stateNode,zs(),Se(yt),Se(et),yd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(wo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Kt!==null&&(xc(Kt),Kt=null))),ac(e,t),Xe(t),null;case 5:xd(t);var i=Sr(Li.current);if(n=t.type,e!==null&&t.stateNode!=null)am(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(M(166));return Xe(t),null}if(e=Sr(an.current),wo(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[on]=t,s[Mi]=o,e=(t.mode&1)!==0,n){case"dialog":je("cancel",s),je("close",s);break;case"iframe":case"object":case"embed":je("load",s);break;case"video":case"audio":for(i=0;i<di.length;i++)je(di[i],s);break;case"source":je("error",s);break;case"img":case"image":case"link":je("error",s),je("load",s);break;case"details":je("toggle",s);break;case"input":pu(s,o),je("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},je("invalid",s);break;case"textarea":mu(s,o),je("invalid",s)}Ma(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var a=o[l];l==="children"?typeof a=="string"?s.textContent!==a&&(o.suppressHydrationWarning!==!0&&So(s.textContent,a,e),i=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&So(s.textContent,a,e),i=["children",""+a]):ki.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&je("scroll",s)}switch(n){case"input":ho(s),hu(s,o,!0);break;case"textarea":ho(s),xu(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=el)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[on]=t,e[Mi]=s,lm(e,t,!1,!1),t.stateNode=e;e:{switch(l=_a(n,s),n){case"dialog":je("cancel",e),je("close",e),i=s;break;case"iframe":case"object":case"embed":je("load",e),i=s;break;case"video":case"audio":for(i=0;i<di.length;i++)je(di[i],e);i=s;break;case"source":je("error",e),i=s;break;case"img":case"image":case"link":je("error",e),je("load",e),i=s;break;case"details":je("toggle",e),i=s;break;case"input":pu(e,s),i=Ra(e,s),je("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=Ee({},s,{value:void 0}),je("invalid",e);break;case"textarea":mu(e,s),i=Da(e,s),je("invalid",e);break;default:i=s}Ma(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?Wp(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ap(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ni(e,c):typeof c=="number"&&Ni(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ki.hasOwnProperty(o)?c!=null&&o==="onScroll"&&je("scroll",e):c!=null&&Qc(e,o,c,l))}switch(n){case"input":ho(e),hu(e,s,!1);break;case"textarea":ho(e),xu(e);break;case"option":s.value!=null&&e.setAttribute("value",""+lr(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?ds(e,!!s.multiple,o,!1):s.defaultValue!=null&&ds(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=el)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)cm(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(M(166));if(n=Sr(Li.current),Sr(an.current),wo(t)){if(s=t.stateNode,n=t.memoizedProps,s[on]=t,(o=s.nodeValue!==n)&&(e=kt,e!==null))switch(e.tag){case 3:So(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&So(s.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[on]=t,t.stateNode=s}return Xe(t),null;case 13:if(Se(ke),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&wt!==null&&t.mode&1&&!(t.flags&128))Eh(),Rs(),t.flags|=98560,o=!1;else if(o=wo(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(M(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[on]=t}else Rs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),o=!1}else Kt!==null&&(xc(Kt),Kt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||ke.current&1?Ue===0&&(Ue=3):Id())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return zs(),ac(e,t),e===null&&Di(t.stateNode.containerInfo),Xe(t),null;case 10:return fd(t.type._context),Xe(t),null;case 17:return gt(t.type)&&tl(),Xe(t),null;case 19:if(Se(ke),o=t.memoizedState,o===null)return Xe(t),null;if(s=(t.flags&128)!==0,l=o.rendering,l===null)if(s)ti(o,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=al(e),l!==null){for(t.flags|=128,ti(o,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)o=n,e=s,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ve(ke,ke.current&1|2),t.child}e=e.sibling}o.tail!==null&&De()>Ps&&(t.flags|=128,s=!0,ti(o,!1),t.lanes=4194304)}else{if(!s)if(e=al(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ti(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ce)return Xe(t),null}else 2*De()-o.renderingStartTime>Ps&&n!==1073741824&&(t.flags|=128,s=!0,ti(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=De(),t.sibling=null,n=ke.current,ve(ke,s?n&1|2:n&1),t):(Xe(t),null);case 22:case 23:return Td(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?bt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function Ug(e,t){switch(ad(t),t.tag){case 1:return gt(t.type)&&tl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zs(),Se(yt),Se(et),yd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xd(t),null;case 13:if(Se(ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Rs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(ke),null;case 4:return zs(),null;case 10:return fd(t.type._context),null;case 22:case 23:return Td(),null;case 24:return null;default:return null}}var No=!1,Ze=!1,Vg=typeof WeakSet=="function"?WeakSet:Set,q=null;function as(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Re(e,t,s)}else n.current=null}function cc(e,t,n){try{n()}catch(s){Re(e,t,s)}}var of=!1;function Hg(e,t){if(qa=Jo,e=hh(),od(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,a=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var x;f!==n||i!==0&&f.nodeType!==3||(a=l+i),f!==o||s!==0&&f.nodeType!==3||(c=l+s),f.nodeType===3&&(l+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++u===i&&(a=l),h===o&&++d===s&&(c=l),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qa={focusedElem:e,selectionRange:n},Jo=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,v=g.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:Vt(t.type,b),v);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(j){Re(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return g=of,of=!1,g}function gi(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&cc(t,n,o)}i=i.next}while(i!==s)}}function Dl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function dc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function dm(e){var t=e.alternate;t!==null&&(e.alternate=null,dm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[on],delete t[Mi],delete t[Ya],delete t[Eg],delete t[Tg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function um(e){return e.tag===5||e.tag===3||e.tag===4}function lf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uc(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=el));else if(s!==4&&(e=e.child,e!==null))for(uc(e,t,n),e=e.sibling;e!==null;)uc(e,t,n),e=e.sibling}function fc(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(fc(e,t,n),e=e.sibling;e!==null;)fc(e,t,n),e=e.sibling}var Qe=null,Qt=!1;function zn(e,t,n){for(n=n.child;n!==null;)fm(e,t,n),n=n.sibling}function fm(e,t,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 5:Ze||as(n,t);case 6:var s=Qe,i=Qt;Qe=null,zn(e,t,n),Qe=s,Qt=i,Qe!==null&&(Qt?(e=Qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Qt?(e=Qe,n=n.stateNode,e.nodeType===8?ca(e.parentNode,n):e.nodeType===1&&ca(e,n),Ri(e)):ca(Qe,n.stateNode));break;case 4:s=Qe,i=Qt,Qe=n.stateNode.containerInfo,Qt=!0,zn(e,t,n),Qe=s,Qt=i;break;case 0:case 11:case 14:case 15:if(!Ze&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&cc(n,t,l),i=i.next}while(i!==s)}zn(e,t,n);break;case 1:if(!Ze&&(as(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Re(n,t,a)}zn(e,t,n);break;case 21:zn(e,t,n);break;case 22:n.mode&1?(Ze=(s=Ze)||n.memoizedState!==null,zn(e,t,n),Ze=s):zn(e,t,n);break;default:zn(e,t,n)}}function af(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Vg),t.forEach(function(s){var i=e0.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Ut(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var o=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:Qe=a.stateNode,Qt=!1;break e;case 3:Qe=a.stateNode.containerInfo,Qt=!0;break e;case 4:Qe=a.stateNode.containerInfo,Qt=!0;break e}a=a.return}if(Qe===null)throw Error(M(160));fm(o,l,i),Qe=null,Qt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Re(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pm(t,e),t=t.sibling}function pm(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ut(t,e),en(e),s&4){try{gi(3,e,e.return),Dl(3,e)}catch(b){Re(e,e.return,b)}try{gi(5,e,e.return)}catch(b){Re(e,e.return,b)}}break;case 1:Ut(t,e),en(e),s&512&&n!==null&&as(n,n.return);break;case 5:if(Ut(t,e),en(e),s&512&&n!==null&&as(n,n.return),e.flags&32){var i=e.stateNode;try{Ni(i,"")}catch(b){Re(e,e.return,b)}}if(s&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Mp(i,o),_a(a,l);var u=_a(a,o);for(l=0;l<c.length;l+=2){var d=c[l],f=c[l+1];d==="style"?Wp(i,f):d==="dangerouslySetInnerHTML"?Ap(i,f):d==="children"?Ni(i,f):Qc(i,d,f,u)}switch(a){case"input":Fa(i,o);break;case"textarea":_p(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?ds(i,!!o.multiple,x,!1):h!==!!o.multiple&&(o.defaultValue!=null?ds(i,!!o.multiple,o.defaultValue,!0):ds(i,!!o.multiple,o.multiple?[]:"",!1))}i[Mi]=o}catch(b){Re(e,e.return,b)}}break;case 6:if(Ut(t,e),en(e),s&4){if(e.stateNode===null)throw Error(M(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(b){Re(e,e.return,b)}}break;case 3:if(Ut(t,e),en(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ri(t.containerInfo)}catch(b){Re(e,e.return,b)}break;case 4:Ut(t,e),en(e);break;case 13:Ut(t,e),en(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Nd=De())),s&4&&af(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ze=(u=Ze)||d,Ut(t,e),Ze=u):Ut(t,e),en(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(q=e,d=e.child;d!==null;){for(f=q=d;q!==null;){switch(h=q,x=h.child,h.tag){case 0:case 11:case 14:case 15:gi(4,h,h.return);break;case 1:as(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(b){Re(s,n,b)}}break;case 5:as(h,h.return);break;case 22:if(h.memoizedState!==null){df(f);continue}}x!==null?(x.return=h,q=x):df(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Op("display",l))}catch(b){Re(e,e.return,b)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(b){Re(e,e.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ut(t,e),en(e),s&4&&af(e);break;case 21:break;default:Ut(t,e),en(e)}}function en(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(um(n)){var s=n;break e}n=n.return}throw Error(M(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Ni(i,""),s.flags&=-33);var o=lf(e);fc(e,o,i);break;case 3:case 4:var l=s.stateNode.containerInfo,a=lf(e);uc(e,a,l);break;default:throw Error(M(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qg(e,t,n){q=e,hm(e)}function hm(e,t,n){for(var s=(e.mode&1)!==0;q!==null;){var i=q,o=i.child;if(i.tag===22&&s){var l=i.memoizedState!==null||No;if(!l){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Ze;a=No;var u=Ze;if(No=l,(Ze=c)&&!u)for(q=i;q!==null;)l=q,c=l.child,l.tag===22&&l.memoizedState!==null?uf(i):c!==null?(c.return=l,q=c):uf(i);for(;o!==null;)q=o,hm(o),o=o.sibling;q=i,No=a,Ze=u}cf(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,q=o):cf(e)}}function cf(e){for(;q!==null;){var t=q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||Dl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ze)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Vt(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&qu(t,o,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qu(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ri(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ze||t.flags&512&&dc(t)}catch(h){Re(t,t.return,h)}}if(t===e){q=null;break}if(n=t.sibling,n!==null){n.return=t.return,q=n;break}q=t.return}}function df(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,q=n;break}q=t.return}}function uf(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Dl(4,t)}catch(c){Re(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){Re(t,i,c)}}var o=t.return;try{dc(t)}catch(c){Re(t,o,c)}break;case 5:var l=t.return;try{dc(t)}catch(c){Re(t,l,c)}}}catch(c){Re(t,t.return,c)}if(t===e){q=null;break}var a=t.sibling;if(a!==null){a.return=t.return,q=a;break}q=t.return}}var Qg=Math.ceil,ul=En.ReactCurrentDispatcher,Cd=En.ReactCurrentOwner,Lt=En.ReactCurrentBatchConfig,ce=0,qe=null,Le=null,Ke=0,bt=0,cs=fr(0),Ue=0,Bi=null,Or=0,Pl=0,kd=0,vi=null,mt=null,Nd=0,Ps=1/0,un=null,fl=!1,pc=null,nr=null,Eo=!1,Gn=null,pl=0,bi=0,hc=null,Bo=-1,$o=0;function lt(){return ce&6?De():Bo!==-1?Bo:Bo=De()}function rr(e){return e.mode&1?ce&2&&Ke!==0?Ke&-Ke:Rg.transition!==null?($o===0&&($o=Xp()),$o):(e=he,e!==0||(e=window.event,e=e===void 0?16:ih(e.type)),e):1}function Xt(e,t,n,s){if(50<bi)throw bi=0,hc=null,Error(M(185));Xi(e,n,s),(!(ce&2)||e!==qe)&&(e===qe&&(!(ce&2)&&(Pl|=n),Ue===4&&An(e,Ke)),vt(e,s),n===1&&ce===0&&!(t.mode&1)&&(Ps=De()+500,Rl&&pr()))}function vt(e,t){var n=e.callbackNode;Ry(e,t);var s=Yo(e,e===qe?Ke:0);if(s===0)n!==null&&vu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&vu(n),t===1)e.tag===0?Ig(ff.bind(null,e)):Ch(ff.bind(null,e)),kg(function(){!(ce&6)&&pr()}),n=null;else{switch(Zp(s)){case 1:n=Xc;break;case 4:n=Yp;break;case 16:n=Go;break;case 536870912:n=Jp;break;default:n=Go}n=Sm(n,mm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function mm(e,t){if(Bo=-1,$o=0,ce&6)throw Error(M(327));var n=e.callbackNode;if(ms()&&e.callbackNode!==n)return null;var s=Yo(e,e===qe?Ke:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=hl(e,s);else{t=s;var i=ce;ce|=2;var o=ym();(qe!==e||Ke!==t)&&(un=null,Ps=De()+500,Pr(e,t));do try{Yg();break}catch(a){xm(e,a)}while(!0);ud(),ul.current=o,ce=i,Le!==null?t=0:(qe=null,Ke=0,t=Ue)}if(t!==0){if(t===2&&(i=Ba(e),i!==0&&(s=i,t=mc(e,i))),t===1)throw n=Bi,Pr(e,0),An(e,s),vt(e,De()),n;if(t===6)An(e,s);else{if(i=e.current.alternate,!(s&30)&&!Kg(i)&&(t=hl(e,s),t===2&&(o=Ba(e),o!==0&&(s=o,t=mc(e,o))),t===1))throw n=Bi,Pr(e,0),An(e,s),vt(e,De()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(M(345));case 2:vr(e,mt,un);break;case 3:if(An(e,s),(s&130023424)===s&&(t=Nd+500-De(),10<t)){if(Yo(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){lt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ga(vr.bind(null,e,mt,un),t);break}vr(e,mt,un);break;case 4:if(An(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var l=31-Jt(s);o=1<<l,l=t[l],l>i&&(i=l),s&=~o}if(s=i,s=De()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Qg(s/1960))-s,10<s){e.timeoutHandle=Ga(vr.bind(null,e,mt,un),s);break}vr(e,mt,un);break;case 5:vr(e,mt,un);break;default:throw Error(M(329))}}}return vt(e,De()),e.callbackNode===n?mm.bind(null,e):null}function mc(e,t){var n=vi;return e.current.memoizedState.isDehydrated&&(Pr(e,t).flags|=256),e=hl(e,t),e!==2&&(t=mt,mt=n,t!==null&&xc(t)),e}function xc(e){mt===null?mt=e:mt.push.apply(mt,e)}function Kg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],o=i.getSnapshot;i=i.value;try{if(!Zt(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t){for(t&=~kd,t&=~Pl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jt(t),s=1<<n;e[n]=-1,t&=~s}}function ff(e){if(ce&6)throw Error(M(327));ms();var t=Yo(e,0);if(!(t&1))return vt(e,De()),null;var n=hl(e,t);if(e.tag!==0&&n===2){var s=Ba(e);s!==0&&(t=s,n=mc(e,s))}if(n===1)throw n=Bi,Pr(e,0),An(e,t),vt(e,De()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vr(e,mt,un),vt(e,De()),null}function Ed(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===0&&(Ps=De()+500,Rl&&pr())}}function Wr(e){Gn!==null&&Gn.tag===0&&!(ce&6)&&ms();var t=ce;ce|=1;var n=Lt.transition,s=he;try{if(Lt.transition=null,he=1,e)return e()}finally{he=s,Lt.transition=n,ce=t,!(ce&6)&&pr()}}function Td(){bt=cs.current,Se(cs)}function Pr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Cg(n)),Le!==null)for(n=Le.return;n!==null;){var s=n;switch(ad(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&tl();break;case 3:zs(),Se(yt),Se(et),yd();break;case 5:xd(s);break;case 4:zs();break;case 13:Se(ke);break;case 19:Se(ke);break;case 10:fd(s.type._context);break;case 22:case 23:Td()}n=n.return}if(qe=e,Le=e=sr(e.current,null),Ke=bt=t,Ue=0,Bi=null,kd=Pl=Or=0,mt=vi=null,jr!==null){for(t=0;t<jr.length;t++)if(n=jr[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,s.next=l}n.pending=s}jr=null}return e}function xm(e,t){do{var n=Le;try{if(ud(),Ao.current=dl,cl){for(var s=Ne.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}cl=!1}if(Ar=0,He=Be=Ne=null,yi=!1,Ai=0,Cd.current=null,n===null||n.return===null){Ue=1,Bi=t,Le=null;break}e:{var o=e,l=n.return,a=n,c=t;if(t=Ke,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=Xu(l);if(x!==null){x.flags&=-257,Zu(x,l,a,o,t),x.mode&1&&Ju(o,u,t),t=x,c=u;var g=t.updateQueue;if(g===null){var b=new Set;b.add(c),t.updateQueue=b}else g.add(c);break e}else{if(!(t&1)){Ju(o,u,t),Id();break e}c=Error(M(426))}}else if(Ce&&a.mode&1){var v=Xu(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Zu(v,l,a,o,t),cd(Ds(c,a));break e}}o=c=Ds(c,a),Ue!==4&&(Ue=2),vi===null?vi=[o]:vi.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=Zh(o,c,t);Hu(o,p);break e;case 1:a=c;var m=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(nr===null||!nr.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=em(o,a,t);Hu(o,j);break e}}o=o.return}while(o!==null)}vm(n)}catch(k){t=k,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function ym(){var e=ul.current;return ul.current=dl,e===null?dl:e}function Id(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),qe===null||!(Or&268435455)&&!(Pl&268435455)||An(qe,Ke)}function hl(e,t){var n=ce;ce|=2;var s=ym();(qe!==e||Ke!==t)&&(un=null,Pr(e,t));do try{Gg();break}catch(i){xm(e,i)}while(!0);if(ud(),ce=n,ul.current=s,Le!==null)throw Error(M(261));return qe=null,Ke=0,Ue}function Gg(){for(;Le!==null;)gm(Le)}function Yg(){for(;Le!==null&&!jy();)gm(Le)}function gm(e){var t=jm(e.alternate,e,bt);e.memoizedProps=e.pendingProps,t===null?vm(e):Le=t,Cd.current=null}function vm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ug(n,t),n!==null){n.flags&=32767,Le=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Le=null;return}}else if(n=$g(n,t,bt),n!==null){Le=n;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Ue===0&&(Ue=5)}function vr(e,t,n){var s=he,i=Lt.transition;try{Lt.transition=null,he=1,Jg(e,t,n,s)}finally{Lt.transition=i,he=s}return null}function Jg(e,t,n,s){do ms();while(Gn!==null);if(ce&6)throw Error(M(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Fy(e,o),e===qe&&(Le=qe=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eo||(Eo=!0,Sm(Go,function(){return ms(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Lt.transition,Lt.transition=null;var l=he;he=1;var a=ce;ce|=4,Cd.current=null,Hg(e,n),pm(n,e),yg(Qa),Jo=!!qa,Qa=qa=null,e.current=n,qg(n),Sy(),ce=a,he=l,Lt.transition=o}else e.current=n;if(Eo&&(Eo=!1,Gn=e,pl=i),o=e.pendingLanes,o===0&&(nr=null),ky(n.stateNode),vt(e,De()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(fl)throw fl=!1,e=pc,pc=null,e;return pl&1&&e.tag!==0&&ms(),o=e.pendingLanes,o&1?e===hc?bi++:(bi=0,hc=e):bi=0,pr(),null}function ms(){if(Gn!==null){var e=Zp(pl),t=Lt.transition,n=he;try{if(Lt.transition=null,he=16>e?16:e,Gn===null)var s=!1;else{if(e=Gn,Gn=null,pl=0,ce&6)throw Error(M(331));var i=ce;for(ce|=4,q=e.current;q!==null;){var o=q,l=o.child;if(q.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:gi(8,d,o)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var h=d.sibling,x=d.return;if(dm(d),d===u){q=null;break}if(h!==null){h.return=x,q=h;break}q=x}}}var g=o.alternate;if(g!==null){var b=g.child;if(b!==null){g.child=null;do{var v=b.sibling;b.sibling=null,b=v}while(b!==null)}}q=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,q=l;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gi(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,q=p;break e}q=o.return}}var m=e.current;for(q=m;q!==null;){l=q;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,q=y;else e:for(l=m;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dl(9,a)}}catch(k){Re(a,a.return,k)}if(a===l){q=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,q=j;break e}q=a.return}}if(ce=i,pr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(kl,e)}catch{}s=!0}return s}finally{he=n,Lt.transition=t}}return!1}function pf(e,t,n){t=Ds(n,t),t=Zh(e,t,1),e=tr(e,t,1),t=lt(),e!==null&&(Xi(e,1,t),vt(e,t))}function Re(e,t,n){if(e.tag===3)pf(e,e,n);else for(;t!==null;){if(t.tag===3){pf(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(nr===null||!nr.has(s))){e=Ds(n,e),e=em(t,e,1),t=tr(t,e,1),e=lt(),t!==null&&(Xi(t,1,e),vt(t,e));break}}t=t.return}}function Xg(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&n,qe===e&&(Ke&n)===n&&(Ue===4||Ue===3&&(Ke&130023424)===Ke&&500>De()-Nd?Pr(e,0):kd|=n),vt(e,t)}function bm(e,t){t===0&&(e.mode&1?(t=yo,yo<<=1,!(yo&130023424)&&(yo=4194304)):t=1);var n=lt();e=Cn(e,t),e!==null&&(Xi(e,t,n),vt(e,n))}function Zg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bm(e,n)}function e0(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(M(314))}s!==null&&s.delete(t),bm(e,n)}var jm;jm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)xt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return xt=!1,Bg(e,t,n);xt=!!(e.flags&131072)}else xt=!1,Ce&&t.flags&1048576&&kh(t,sl,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Wo(e,t),e=t.pendingProps;var i=Is(t,et.current);hs(t,n),i=vd(null,t,s,e,i,n);var o=bd();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(s)?(o=!0,nl(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hd(t),i.updater=zl,t.stateNode=i,i._reactInternals=t,nc(t,s,e,n),t=ic(null,t,s,!0,o,n)):(t.tag=0,Ce&&o&&ld(t),st(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=n0(s),e=Vt(s,e),i){case 0:t=sc(null,t,s,e,n);break e;case 1:t=nf(null,t,s,e,n);break e;case 11:t=ef(null,t,s,e,n);break e;case 14:t=tf(null,t,s,Vt(s.type,e),n);break e}throw Error(M(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Vt(s,i),sc(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Vt(s,i),nf(e,t,s,i,n);case 3:e:{if(sm(t),e===null)throw Error(M(387));s=t.pendingProps,o=t.memoizedState,i=o.element,Fh(e,t),ll(t,s,null,n);var l=t.memoizedState;if(s=l.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Ds(Error(M(423)),t),t=rf(e,t,s,n,i);break e}else if(s!==i){i=Ds(Error(M(424)),t),t=rf(e,t,s,n,i);break e}else for(wt=er(t.stateNode.containerInfo.firstChild),kt=t,Ce=!0,Kt=null,n=Ih(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rs(),s===i){t=kn(e,t,n);break e}st(e,t,s,n)}t=t.child}return t;case 5:return zh(t),e===null&&Za(t),s=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,l=i.children,Ka(s,i)?l=null:o!==null&&Ka(s,o)&&(t.flags|=32),rm(e,t),st(e,t,l,n),t.child;case 6:return e===null&&Za(t),null;case 13:return im(e,t,n);case 4:return md(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Fs(t,null,s,n):st(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Vt(s,i),ef(e,t,s,i,n);case 7:return st(e,t,t.pendingProps,n),t.child;case 8:return st(e,t,t.pendingProps.children,n),t.child;case 12:return st(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,ve(il,s._currentValue),s._currentValue=l,o!==null)if(Zt(o.value,l)){if(o.children===i.children&&!yt.current){t=kn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){l=o.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=bn(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ec(o.return,n,t),a.lanes|=n;break}c=c.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(M(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),ec(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}st(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,hs(t,n),i=At(i),s=s(i),t.flags|=1,st(e,t,s,n),t.child;case 14:return s=t.type,i=Vt(s,t.pendingProps),i=Vt(s.type,i),tf(e,t,s,i,n);case 15:return tm(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Vt(s,i),Wo(e,t),t.tag=1,gt(s)?(e=!0,nl(t)):e=!1,hs(t,n),Xh(t,s,i),nc(t,s,i,n),ic(null,t,s,!0,e,n);case 19:return om(e,t,n);case 22:return nm(e,t,n)}throw Error(M(156,t.tag))};function Sm(e,t){return Gp(e,t)}function t0(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,n,s){return new t0(e,t,n,s)}function Rd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function n0(e){if(typeof e=="function")return Rd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gc)return 11;if(e===Yc)return 14}return 2}function sr(e,t){var n=e.alternate;return n===null?(n=_t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uo(e,t,n,s,i,o){var l=2;if(s=e,typeof e=="function")Rd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Zr:return Mr(n.children,i,o,t);case Kc:l=8,i|=8;break;case Na:return e=_t(12,n,t,i|2),e.elementType=Na,e.lanes=o,e;case Ea:return e=_t(13,n,t,i),e.elementType=Ea,e.lanes=o,e;case Ta:return e=_t(19,n,t,i),e.elementType=Ta,e.lanes=o,e;case zp:return Ml(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rp:l=10;break e;case Fp:l=9;break e;case Gc:l=11;break e;case Yc:l=14;break e;case Pn:l=16,s=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=_t(l,n,t,i),t.elementType=e,t.type=s,t.lanes=o,t}function Mr(e,t,n,s){return e=_t(7,e,s,t),e.lanes=n,e}function Ml(e,t,n,s){return e=_t(22,e,s,t),e.elementType=zp,e.lanes=n,e.stateNode={isHidden:!1},e}function ya(e,t,n){return e=_t(6,e,null,t),e.lanes=n,e}function ga(e,t,n){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function r0(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fd(e,t,n,s,i,o,l,a,c){return e=new r0(e,t,n,a,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=_t(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hd(o),e}function s0(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function wm(e){if(!e)return ar;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(gt(n))return wh(e,n,t)}return t}function Cm(e,t,n,s,i,o,l,a,c){return e=Fd(n,s,!0,e,i,o,l,a,c),e.context=wm(null),n=e.current,s=lt(),i=rr(n),o=bn(s,i),o.callback=t??null,tr(n,o,i),e.current.lanes=i,Xi(e,i,s),vt(e,s),e}function _l(e,t,n,s){var i=t.current,o=lt(),l=rr(i);return n=wm(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(o,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=tr(i,t,l),e!==null&&(Xt(e,i,l,o),Lo(e,i,l)),l}function ml(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zd(e,t){hf(e,t),(e=e.alternate)&&hf(e,t)}function i0(){return null}var km=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dd(e){this._internalRoot=e}Ll.prototype.render=Dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));_l(e,t,null,null)};Ll.prototype.unmount=Dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){_l(null,e,null,null)}),t[wn]=null}};function Ll(e){this._internalRoot=e}Ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=nh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&t!==0&&t<Ln[n].priority;n++);Ln.splice(n,0,e),n===0&&sh(e)}};function Pd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Al(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mf(){}function o0(e,t,n,s,i){if(i){if(typeof s=="function"){var o=s;s=function(){var u=ml(l);o.call(u)}}var l=Cm(t,s,e,0,null,!1,!1,"",mf);return e._reactRootContainer=l,e[wn]=l.current,Di(e.nodeType===8?e.parentNode:e),Wr(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var a=s;s=function(){var u=ml(c);a.call(u)}}var c=Fd(e,0,!1,null,null,!1,!1,"",mf);return e._reactRootContainer=c,e[wn]=c.current,Di(e.nodeType===8?e.parentNode:e),Wr(function(){_l(t,c,n,s)}),c}function Ol(e,t,n,s,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var a=i;i=function(){var c=ml(l);a.call(c)}}_l(t,l,e,i)}else l=o0(n,t,e,i,s);return ml(l)}eh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ci(t.pendingLanes);n!==0&&(Zc(t,n|1),vt(t,De()),!(ce&6)&&(Ps=De()+500,pr()))}break;case 13:Wr(function(){var s=Cn(e,1);if(s!==null){var i=lt();Xt(s,e,1,i)}}),zd(e,1)}};ed=function(e){if(e.tag===13){var t=Cn(e,134217728);if(t!==null){var n=lt();Xt(t,e,134217728,n)}zd(e,134217728)}};th=function(e){if(e.tag===13){var t=rr(e),n=Cn(e,t);if(n!==null){var s=lt();Xt(n,e,t,s)}zd(e,t)}};nh=function(){return he};rh=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};Aa=function(e,t,n){switch(t){case"input":if(Fa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=Il(s);if(!i)throw Error(M(90));Pp(s),Fa(s,i)}}}break;case"textarea":_p(e,n);break;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}};Up=Ed;Vp=Wr;var l0={usingClientEntryPoint:!1,Events:[eo,rs,Il,Bp,$p,Ed]},ni={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a0={bundleType:ni.bundleType,version:ni.version,rendererPackageName:ni.rendererPackageName,rendererConfig:ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:En.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qp(e),e===null?null:e.stateNode},findFiberByHostInstance:ni.findFiberByHostInstance||i0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{kl=To.inject(a0),ln=To}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l0;Tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pd(t))throw Error(M(200));return s0(e,t,null,n)};Tt.createRoot=function(e,t){if(!Pd(e))throw Error(M(299));var n=!1,s="",i=km;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Fd(e,1,!1,null,null,n,!1,s,i),e[wn]=t.current,Di(e.nodeType===8?e.parentNode:e),new Dd(t)};Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=Qp(t),e=e===null?null:e.stateNode,e};Tt.flushSync=function(e){return Wr(e)};Tt.hydrate=function(e,t,n){if(!Al(t))throw Error(M(200));return Ol(null,e,t,!0,n)};Tt.hydrateRoot=function(e,t,n){if(!Pd(e))throw Error(M(405));var s=n!=null&&n.hydratedSources||null,i=!1,o="",l=km;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Cm(t,null,e,1,n??null,i,!1,o,l),e[wn]=t.current,Di(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ll(t)};Tt.render=function(e,t,n){if(!Al(t))throw Error(M(200));return Ol(null,e,t,!1,n)};Tt.unmountComponentAtNode=function(e){if(!Al(e))throw Error(M(40));return e._reactRootContainer?(Wr(function(){Ol(null,null,e,!1,function(){e._reactRootContainer=null,e[wn]=null})}),!0):!1};Tt.unstable_batchedUpdates=Ed;Tt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Al(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return Ol(e,t,n,!1,s)};Tt.version="18.3.1-next-f1338f8080-20240426";function Nm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nm)}catch(e){console.error(e)}}Nm(),Np.exports=Tt;var c0=Np.exports,Em,xf=c0;Em=xf.createRoot,xf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $i(){return $i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$i.apply(this,arguments)}var Yn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yn||(Yn={}));const yf="popstate";function d0(e){e===void 0&&(e={});function t(s,i){let{pathname:o,search:l,hash:a}=s.location;return yc("",{pathname:o,search:l,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:xl(i)}return f0(t,n,null,e)}function Pe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Tm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function u0(){return Math.random().toString(36).substr(2,8)}function gf(e,t){return{usr:e.state,key:e.key,idx:t}}function yc(e,t,n,s){return n===void 0&&(n=null),$i({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bs(t):t,{state:n,key:t&&t.key||s||u0()})}function xl(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Bs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function f0(e,t,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:o=!1}=s,l=i.history,a=Yn.Pop,c=null,u=d();u==null&&(u=0,l.replaceState($i({},l.state,{idx:u}),""));function d(){return(l.state||{idx:null}).idx}function f(){a=Yn.Pop;let v=d(),p=v==null?null:v-u;u=v,c&&c({action:a,location:b.location,delta:p})}function h(v,p){a=Yn.Push;let m=yc(b.location,v,p);u=d()+1;let y=gf(m,u),j=b.createHref(m);try{l.pushState(y,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(j)}o&&c&&c({action:a,location:b.location,delta:1})}function x(v,p){a=Yn.Replace;let m=yc(b.location,v,p);u=d();let y=gf(m,u),j=b.createHref(m);l.replaceState(y,"",j),o&&c&&c({action:a,location:b.location,delta:0})}function g(v){let p=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof v=="string"?v:xl(v);return m=m.replace(/ $/,"%20"),Pe(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let b={get action(){return a},get location(){return e(i,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(yf,f),c=v,()=>{i.removeEventListener(yf,f),c=null}},createHref(v){return t(i,v)},createURL:g,encodeLocation(v){let p=g(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:x,go(v){return l.go(v)}};return b}var vf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vf||(vf={}));function p0(e,t,n){return n===void 0&&(n="/"),h0(e,t,n)}function h0(e,t,n,s){let i=typeof t=="string"?Bs(t):t,o=Md(i.pathname||"/",n);if(o==null)return null;let l=Im(e);m0(l);let a=null;for(let c=0;a==null&&c<l.length;++c){let u=E0(o);a=C0(l[c],u)}return a}function Im(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(o,l,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Pe(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=ir([s,c.relativePath]),d=n.concat(c);o.children&&o.children.length>0&&(Pe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Im(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:S0(u,o.index),routesMeta:d})};return e.forEach((o,l)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,l);else for(let c of Rm(o.path))i(o,l,c)}),t}function Rm(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return i?[o,""]:[o];let l=Rm(s.join("/")),a=[];return a.push(...l.map(c=>c===""?o:[o,c].join("/"))),i&&a.push(...l),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function m0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:w0(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const x0=/^:[\w-]+$/,y0=3,g0=2,v0=1,b0=10,j0=-2,bf=e=>e==="*";function S0(e,t){let n=e.split("/"),s=n.length;return n.some(bf)&&(s+=j0),t&&(s+=g0),n.filter(i=>!bf(i)).reduce((i,o)=>i+(x0.test(o)?y0:o===""?v0:b0),s)}function w0(e,t){return e.length===t.length&&e.slice(0,-1).every((s,i)=>s===t[i])?e[e.length-1]-t[t.length-1]:0}function C0(e,t,n){let{routesMeta:s}=e,i={},o="/",l=[];for(let a=0;a<s.length;++a){let c=s[a],u=a===s.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=k0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(i,f.params),l.push({params:i,pathname:ir([o,f.pathname]),pathnameBase:F0(ir([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=ir([o,f.pathnameBase]))}return l}function k0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=N0(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:s.reduce((u,d,f)=>{let{paramName:h,isOptional:x}=d;if(h==="*"){let b=a[f]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const g=a[f];return x&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:l,pattern:e}}function N0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Tm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,a,c)=>(s.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function E0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Tm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Md(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function T0(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:i=""}=typeof e=="string"?Bs(e):e;return{pathname:n?n.startsWith("/")?n:I0(n,t):t,search:z0(s),hash:D0(i)}}function I0(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function va(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function R0(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _d(e,t){let n=R0(e);return t?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Ld(e,t,n,s){s===void 0&&(s=!1);let i;typeof e=="string"?i=Bs(e):(i=$i({},e),Pe(!i.pathname||!i.pathname.includes("?"),va("?","pathname","search",i)),Pe(!i.pathname||!i.pathname.includes("#"),va("#","pathname","hash",i)),Pe(!i.search||!i.search.includes("#"),va("#","search","hash",i)));let o=e===""||i.pathname==="",l=o?"/":i.pathname,a;if(l==null)a=n;else{let f=t.length-1;if(!s&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?t[f]:"/"}let c=T0(i,a),u=l&&l!=="/"&&l.endsWith("/"),d=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ir=e=>e.join("/").replace(/\/\/+/g,"/"),F0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,D0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function P0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Fm=["post","put","patch","delete"];new Set(Fm);const M0=["get",...Fm];new Set(M0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ui(){return Ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ui.apply(this,arguments)}const Ad=S.createContext(null),_0=S.createContext(null),hr=S.createContext(null),Wl=S.createContext(null),Tn=S.createContext({outlet:null,matches:[],isDataRoute:!1}),zm=S.createContext(null);function L0(e,t){let{relative:n}=t===void 0?{}:t;$s()||Pe(!1);let{basename:s,navigator:i}=S.useContext(hr),{hash:o,pathname:l,search:a}=Pm(e,{relative:n}),c=l;return s!=="/"&&(c=l==="/"?s:ir([s,l])),i.createHref({pathname:c,search:a,hash:o})}function $s(){return S.useContext(Wl)!=null}function mr(){return $s()||Pe(!1),S.useContext(Wl).location}function Dm(e){S.useContext(hr).static||S.useLayoutEffect(e)}function Me(){let{isDataRoute:e}=S.useContext(Tn);return e?Y0():A0()}function A0(){$s()||Pe(!1);let e=S.useContext(Ad),{basename:t,future:n,navigator:s}=S.useContext(hr),{matches:i}=S.useContext(Tn),{pathname:o}=mr(),l=JSON.stringify(_d(i,n.v7_relativeSplatPath)),a=S.useRef(!1);return Dm(()=>{a.current=!0}),S.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){s.go(u);return}let f=Ld(u,JSON.parse(l),o,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ir([t,f.pathname])),(d.replace?s.replace:s.push)(f,d.state,d)},[t,s,l,o,e])}function Bt(){let{matches:e}=S.useContext(Tn),t=e[e.length-1];return t?t.params:{}}function Pm(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=S.useContext(hr),{matches:i}=S.useContext(Tn),{pathname:o}=mr(),l=JSON.stringify(_d(i,s.v7_relativeSplatPath));return S.useMemo(()=>Ld(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function O0(e,t){return W0(e,t)}function W0(e,t,n,s){$s()||Pe(!1);let{navigator:i}=S.useContext(hr),{matches:o}=S.useContext(Tn),l=o[o.length-1],a=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=mr(),d;if(t){var f;let v=typeof t=="string"?Bs(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Pe(!1),d=v}else d=u;let h=d.pathname||"/",x=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=p0(e,{pathname:x}),b=H0(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:ir([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:ir([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,s);return t&&b?S.createElement(Wl.Provider,{value:{location:Ui({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Yn.Pop}},b):b}function B0(){let e=G0(),t=P0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:i},n):null,null)}const $0=S.createElement(B0,null);class U0 extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?S.createElement(Tn.Provider,{value:this.props.routeContext},S.createElement(zm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function V0(e){let{routeContext:t,match:n,children:s}=e,i=S.useContext(Ad);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Tn.Provider,{value:t},s)}function H0(e,t,n,s){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=l.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||Pe(!1),l=l.slice(0,Math.min(l.length,d+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<l.length;d++){let f=l[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:x}=n,g=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((d,f,h)=>{let x,g=!1,b=null,v=null;n&&(x=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||$0,c&&(u<0&&h===0?(J0("route-fallback"),g=!0,v=null):u===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,h+1)),m=()=>{let y;return x?y=b:g?y=v:f.route.Component?y=S.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,S.createElement(V0,{match:f,routeContext:{outlet:d,matches:p,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?S.createElement(U0,{location:n.location,revalidation:n.revalidation,component:b,error:x,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Mm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Mm||{}),_m=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_m||{});function q0(e){let t=S.useContext(Ad);return t||Pe(!1),t}function Q0(e){let t=S.useContext(_0);return t||Pe(!1),t}function K0(e){let t=S.useContext(Tn);return t||Pe(!1),t}function Lm(e){let t=K0(),n=t.matches[t.matches.length-1];return n.route.id||Pe(!1),n.route.id}function G0(){var e;let t=S.useContext(zm),n=Q0(),s=Lm();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function Y0(){let{router:e}=q0(Mm.UseNavigateStable),t=Lm(_m.UseNavigateStable),n=S.useRef(!1);return Dm(()=>{n.current=!0}),S.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ui({fromRouteId:t},o)))},[e,t])}const jf={};function J0(e,t,n){jf[e]||(jf[e]=!0)}function X0(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function _n(e){let{to:t,replace:n,state:s,relative:i}=e;$s()||Pe(!1);let{future:o,static:l}=S.useContext(hr),{matches:a}=S.useContext(Tn),{pathname:c}=mr(),u=Me(),d=Ld(t,_d(a,o.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return S.useEffect(()=>u(JSON.parse(f),{replace:n,state:s,relative:i}),[u,f,i,n,s]),null}function re(e){Pe(!1)}function Z0(e){let{basename:t="/",children:n=null,location:s,navigationType:i=Yn.Pop,navigator:o,static:l=!1,future:a}=e;$s()&&Pe(!1);let c=t.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:c,navigator:o,static:l,future:Ui({v7_relativeSplatPath:!1},a)}),[c,a,o,l]);typeof s=="string"&&(s=Bs(s));let{pathname:d="/",search:f="",hash:h="",state:x=null,key:g="default"}=s,b=S.useMemo(()=>{let v=Md(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:x,key:g},navigationType:i}},[c,d,f,h,x,g,i]);return b==null?null:S.createElement(hr.Provider,{value:u},S.createElement(Wl.Provider,{children:n,value:b}))}function Sf(e){let{children:t,location:n}=e;return O0(gc(t),n)}new Promise(()=>{});function gc(e,t){t===void 0&&(t=[]);let n=[];return S.Children.forEach(e,(s,i)=>{if(!S.isValidElement(s))return;let o=[...t,i];if(s.type===S.Fragment){n.push.apply(n,gc(s.props.children,o));return}s.type!==re&&Pe(!1),!s.props.index||!s.props.children||Pe(!1);let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=gc(s.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vc.apply(this,arguments)}function e1(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,o;for(o=0;o<s.length;o++)i=s[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function t1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function n1(e,t){return e.button===0&&(!t||t==="_self")&&!t1(e)}function bc(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function r1(e,t){let n=bc(e);return t&&t.forEach((s,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const s1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i1="6";try{window.__reactRouterVersion=i1}catch{}const o1="startTransition",wf=Xx[o1];function l1(e){let{basename:t,children:n,future:s,window:i}=e,o=S.useRef();o.current==null&&(o.current=d0({window:i,v5Compat:!0}));let l=o.current,[a,c]=S.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},d=S.useCallback(f=>{u&&wf?wf(()=>c(f)):c(f)},[c,u]);return S.useLayoutEffect(()=>l.listen(d),[l,d]),S.useEffect(()=>X0(s),[s]),S.createElement(Z0,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:l,future:s})}const a1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=S.forwardRef(function(t,n){let{onClick:s,relative:i,reloadDocument:o,replace:l,state:a,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=e1(t,s1),{basename:x}=S.useContext(hr),g,b=!1;if(typeof u=="string"&&c1.test(u)&&(g=u,a1))try{let y=new URL(window.location.href),j=u.startsWith("//")?new URL(y.protocol+u):new URL(u),k=Md(j.pathname,x);j.origin===y.origin&&k!=null?u=k+j.search+j.hash:b=!0}catch{}let v=L0(u,{relative:i}),p=d1(u,{replace:l,state:a,target:c,preventScrollReset:d,relative:i,viewTransition:f});function m(y){s&&s(y),y.defaultPrevented||p(y)}return S.createElement("a",vc({},h,{href:g||v,onClick:b||o?s:m,ref:n,target:c}))});var Cf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cf||(Cf={}));var kf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(kf||(kf={}));function d1(e,t){let{target:n,replace:s,state:i,preventScrollReset:o,relative:l,viewTransition:a}=t===void 0?{}:t,c=Me(),u=mr(),d=Pm(e,{relative:l});return S.useCallback(f=>{if(n1(f,n)){f.preventDefault();let h=s!==void 0?s:xl(u)===xl(d);c(e,{replace:h,state:i,preventScrollReset:o,relative:l,viewTransition:a})}},[u,c,d,s,i,n,e,o,l,a])}function Am(e){let t=S.useRef(bc(e)),n=S.useRef(!1),s=mr(),i=S.useMemo(()=>r1(s.search,n.current?null:t.current),[s.search]),o=Me(),l=S.useCallback((a,c)=>{const u=bc(typeof a=="function"?a(i):a);n.current=!0,o("?"+u,c)},[o,i]);return[i,l]}var Us=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},u1={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},On,Wc,sp,f1=(sp=class{constructor(){G(this,On,u1);G(this,Wc,!1)}setTimeoutProvider(e){$(this,On,e)}setTimeout(e,t){return w(this,On).setTimeout(e,t)}clearTimeout(e){w(this,On).clearTimeout(e)}setInterval(e,t){return w(this,On).setInterval(e,t)}clearInterval(e){w(this,On).clearInterval(e)}},On=new WeakMap,Wc=new WeakMap,sp),wr=new f1;function p1(e){setTimeout(e,0)}var Br=typeof window>"u"||"Deno"in globalThis;function it(){}function h1(e,t){return typeof e=="function"?e(t):e}function jc(e){return typeof e=="number"&&e>=0&&e!==1/0}function Om(e,t){return Math.max(e+(t||0)-Date.now(),0)}function or(e,t){return typeof e=="function"?e(t):e}function Dt(e,t){return typeof e=="function"?e(t):e}function Nf(e,t){const{type:n="all",exact:s,fetchStatus:i,predicate:o,queryKey:l,stale:a}=e;if(l){if(s){if(t.queryHash!==Od(l,t.options))return!1}else if(!Vi(t.queryKey,l))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function Ef(e,t){const{exact:n,status:s,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if($r(t.options.mutationKey)!==$r(o))return!1}else if(!Vi(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function Od(e,t){return((t==null?void 0:t.queryKeyHashFn)||$r)(e)}function $r(e){return JSON.stringify(e,(t,n)=>Sc(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function Vi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Vi(e[n],t[n])):!1}var m1=Object.prototype.hasOwnProperty;function Wm(e,t){if(e===t)return e;const n=Tf(e)&&Tf(t);if(!n&&!(Sc(e)&&Sc(t)))return t;const i=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),l=o.length,a=n?new Array(l):{};let c=0;for(let u=0;u<l;u++){const d=n?u:o[u],f=e[d],h=t[d];if(f===h){a[d]=f,(n?u<i:m1.call(e,d))&&c++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){a[d]=h;continue}const x=Wm(f,h);a[d]=x,x===f&&c++}return i===l&&c===i?e:a}function yl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Tf(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Sc(e){if(!If(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!If(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function If(e){return Object.prototype.toString.call(e)==="[object Object]"}function x1(e){return new Promise(t=>{wr.setTimeout(t,e)})}function wc(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Wm(e,t):t}function y1(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function g1(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var Wd=Symbol();function Bm(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Wd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function $m(e,t){return typeof e=="function"?e(...t):!!e}var kr,Wn,xs,ip,v1=(ip=class extends Us{constructor(){super();G(this,kr);G(this,Wn);G(this,xs);$(this,xs,t=>{if(!Br&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){w(this,Wn)||this.setEventListener(w(this,xs))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Wn))==null||t.call(this),$(this,Wn,void 0))}setEventListener(t){var n;$(this,xs,t),(n=w(this,Wn))==null||n.call(this),$(this,Wn,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){w(this,kr)!==t&&($(this,kr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof w(this,kr)=="boolean"?w(this,kr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},kr=new WeakMap,Wn=new WeakMap,xs=new WeakMap,ip),Bd=new v1;function Cc(){let e,t;const n=new Promise((i,o)=>{e=i,t=o});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},n.reject=i=>{s({status:"rejected",reason:i}),t(i)},n}var b1=p1;function j1(){let e=[],t=0,n=a=>{a()},s=a=>{a()},i=b1;const o=a=>{t?e.push(a):i(()=>{n(a)})},l=()=>{const a=e;e=[],a.length&&i(()=>{s(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;t++;try{c=a()}finally{t--,t||l()}return c},batchCalls:a=>(...c)=>{o(()=>{a(...c)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{i=a}}}var $e=j1(),ys,Bn,gs,op,S1=(op=class extends Us{constructor(){super();G(this,ys,!0);G(this,Bn);G(this,gs);$(this,gs,t=>{if(!Br&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){w(this,Bn)||this.setEventListener(w(this,gs))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Bn))==null||t.call(this),$(this,Bn,void 0))}setEventListener(t){var n;$(this,gs,t),(n=w(this,Bn))==null||n.call(this),$(this,Bn,t(this.setOnline.bind(this)))}setOnline(t){w(this,ys)!==t&&($(this,ys,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return w(this,ys)}},ys=new WeakMap,Bn=new WeakMap,gs=new WeakMap,op),gl=new S1;function w1(e){return Math.min(1e3*2**e,3e4)}function Um(e){return(e??"online")==="online"?gl.isOnline():!0}var kc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Vm(e){let t=!1,n=0,s;const i=Cc(),o=()=>i.status!=="pending",l=b=>{var v;if(!o()){const p=new kc(b);h(p),(v=e.onCancel)==null||v.call(e,p)}},a=()=>{t=!0},c=()=>{t=!1},u=()=>Bd.isFocused()&&(e.networkMode==="always"||gl.isOnline())&&e.canRun(),d=()=>Um(e.networkMode)&&e.canRun(),f=b=>{o()||(s==null||s(),i.resolve(b))},h=b=>{o()||(s==null||s(),i.reject(b))},x=()=>new Promise(b=>{var v;s=p=>{(o()||u())&&b(p)},(v=e.onPause)==null||v.call(e)}).then(()=>{var b;s=void 0,o()||(b=e.onContinue)==null||b.call(e)}),g=()=>{if(o())return;let b;const v=n===0?e.initialPromise:void 0;try{b=v??e.fn()}catch(p){b=Promise.reject(p)}Promise.resolve(b).then(f).catch(p=>{var D;if(o())return;const m=e.retry??(Br?0:3),y=e.retryDelay??w1,j=typeof y=="function"?y(n,p):y,k=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,p);if(t||!k){h(p);return}n++,(D=e.onFail)==null||D.call(e,n,p),x1(j).then(()=>u()?void 0:x()).then(()=>{t?h(p):g()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?g():x().then(g),i)}}var Nr,lp,Hm=(lp=class{constructor(){G(this,Nr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jc(this.gcTime)&&$(this,Nr,wr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Br?1/0:5*60*1e3))}clearGcTimeout(){w(this,Nr)&&(wr.clearTimeout(w(this,Nr)),$(this,Nr,void 0))}},Nr=new WeakMap,lp),Er,vs,zt,Tr,Ve,qi,Ir,Ht,dn,ap,C1=(ap=class extends Hm{constructor(t){super();G(this,Ht);G(this,Er);G(this,vs);G(this,zt);G(this,Tr);G(this,Ve);G(this,qi);G(this,Ir);$(this,Ir,!1),$(this,qi,t.defaultOptions),this.setOptions(t.options),this.observers=[],$(this,Tr,t.client),$(this,zt,w(this,Tr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,$(this,Er,Rf(this.options)),this.state=t.state??w(this,Er),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=w(this,Ve))==null?void 0:t.promise}setOptions(t){if(this.options={...w(this,qi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Rf(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),$(this,Er,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&w(this,zt).remove(this)}setData(t,n){const s=wc(this.state.data,t,this.options);return ne(this,Ht,dn).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){ne(this,Ht,dn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,i;const n=(s=w(this,Ve))==null?void 0:s.promise;return(i=w(this,Ve))==null||i.cancel(t),n?n.then(it).catch(it):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(w(this,Er))}isActive(){return this.observers.some(t=>Dt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Wd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>or(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Om(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ve))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ve))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),w(this,zt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(w(this,Ve)&&(w(this,Ir)?w(this,Ve).cancel({revert:!0}):w(this,Ve).cancelRetry()),this.scheduleGc()),w(this,zt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ne(this,Ht,dn).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,f,h,x,g,b,v,p,m,y;if(this.state.fetchStatus!=="idle"&&((c=w(this,Ve))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(w(this,Ve))return w(this,Ve).continueRetry(),w(this,Ve).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(k=>k.options.queryFn);j&&this.setOptions(j.options)}const s=new AbortController,i=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>($(this,Ir,!0),s.signal)})},o=()=>{const j=Bm(this.options,n),D=(()=>{const I={client:w(this,Tr),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return $(this,Ir,!1),this.options.persister?this.options.persister(j,D,this):j(D)},a=(()=>{const j={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:w(this,Tr),state:this.state,fetchFn:o};return i(j),j})();(u=this.options.behavior)==null||u.onFetch(a,this),$(this,vs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&ne(this,Ht,dn).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),$(this,Ve,Vm({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:j=>{j instanceof kc&&j.revert&&this.setState({...w(this,vs),fetchStatus:"idle"}),s.abort()},onFail:(j,k)=>{ne(this,Ht,dn).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{ne(this,Ht,dn).call(this,{type:"pause"})},onContinue:()=>{ne(this,Ht,dn).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const j=await w(this,Ve).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(x=(h=w(this,zt).config).onSuccess)==null||x.call(h,j,this),(b=(g=w(this,zt).config).onSettled)==null||b.call(g,j,this.state.error,this),j}catch(j){if(j instanceof kc){if(j.silent)return w(this,Ve).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw ne(this,Ht,dn).call(this,{type:"error",error:j}),(p=(v=w(this,zt).config).onError)==null||p.call(v,j,this),(y=(m=w(this,zt).config).onSettled)==null||y.call(m,this.state.data,j,this),j}finally{this.scheduleGc()}}},Er=new WeakMap,vs=new WeakMap,zt=new WeakMap,Tr=new WeakMap,Ve=new WeakMap,qi=new WeakMap,Ir=new WeakMap,Ht=new WeakSet,dn=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...qm(s.data,this.options),fetchMeta:t.meta??null};case"success":const i={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return $(this,vs,t.manual?i:void 0),i;case"error":const o=t.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),$e.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),w(this,zt).notify({query:this,type:"updated",action:t})})},ap);function qm(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Um(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Rf(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ft,le,Qi,nt,Rr,bs,pn,$n,Ki,js,Ss,Fr,zr,Un,ws,fe,ui,Nc,Ec,Tc,Ic,Rc,Fc,zc,Qm,cp,k1=(cp=class extends Us{constructor(t,n){super();G(this,fe);G(this,ft);G(this,le);G(this,Qi);G(this,nt);G(this,Rr);G(this,bs);G(this,pn);G(this,$n);G(this,Ki);G(this,js);G(this,Ss);G(this,Fr);G(this,zr);G(this,Un);G(this,ws,new Set);this.options=n,$(this,ft,t),$(this,$n,null),$(this,pn,Cc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(w(this,le).addObserver(this),Ff(w(this,le),this.options)?ne(this,fe,ui).call(this):this.updateResult(),ne(this,fe,Ic).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Dc(w(this,le),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Dc(w(this,le),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ne(this,fe,Rc).call(this),ne(this,fe,Fc).call(this),w(this,le).removeObserver(this)}setOptions(t){const n=this.options,s=w(this,le);if(this.options=w(this,ft).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Dt(this.options.enabled,w(this,le))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ne(this,fe,zc).call(this),w(this,le).setOptions(this.options),n._defaulted&&!yl(this.options,n)&&w(this,ft).getQueryCache().notify({type:"observerOptionsUpdated",query:w(this,le),observer:this});const i=this.hasListeners();i&&zf(w(this,le),s,this.options,n)&&ne(this,fe,ui).call(this),this.updateResult(),i&&(w(this,le)!==s||Dt(this.options.enabled,w(this,le))!==Dt(n.enabled,w(this,le))||or(this.options.staleTime,w(this,le))!==or(n.staleTime,w(this,le)))&&ne(this,fe,Nc).call(this);const o=ne(this,fe,Ec).call(this);i&&(w(this,le)!==s||Dt(this.options.enabled,w(this,le))!==Dt(n.enabled,w(this,le))||o!==w(this,Un))&&ne(this,fe,Tc).call(this,o)}getOptimisticResult(t){const n=w(this,ft).getQueryCache().build(w(this,ft),t),s=this.createResult(n,t);return E1(this,s)&&($(this,nt,s),$(this,bs,this.options),$(this,Rr,w(this,le).state)),s}getCurrentResult(){return w(this,nt)}trackResult(t,n){return new Proxy(t,{get:(s,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&!this.options.experimental_prefetchInRender&&w(this,pn).status==="pending"&&w(this,pn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,i))})}trackProp(t){w(this,ws).add(t)}getCurrentQuery(){return w(this,le)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=w(this,ft).defaultQueryOptions(t),s=w(this,ft).getQueryCache().build(w(this,ft),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return ne(this,fe,ui).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),w(this,nt)))}createResult(t,n){var _;const s=w(this,le),i=this.options,o=w(this,nt),l=w(this,Rr),a=w(this,bs),u=t!==s?t.state:w(this,Qi),{state:d}=t;let f={...d},h=!1,x;if(n._optimisticResults){const T=this.hasListeners(),W=!T&&Ff(t,n),V=T&&zf(t,s,n,i);(W||V)&&(f={...f,...qm(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:b,status:v}=f;x=f.data;let p=!1;if(n.placeholderData!==void 0&&x===void 0&&v==="pending"){let T;o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(T=o.data,p=!0):T=typeof n.placeholderData=="function"?n.placeholderData((_=w(this,Ss))==null?void 0:_.state.data,w(this,Ss)):n.placeholderData,T!==void 0&&(v="success",x=wc(o==null?void 0:o.data,T,n),h=!0)}if(n.select&&x!==void 0&&!p)if(o&&x===(l==null?void 0:l.data)&&n.select===w(this,Ki))x=w(this,js);else try{$(this,Ki,n.select),x=n.select(x),x=wc(o==null?void 0:o.data,x,n),$(this,js,x),$(this,$n,null)}catch(T){$(this,$n,T)}w(this,$n)&&(g=w(this,$n),x=w(this,js),b=Date.now(),v="error");const m=f.fetchStatus==="fetching",y=v==="pending",j=v==="error",k=y&&m,D=x!==void 0,R={status:v,fetchStatus:f.fetchStatus,isPending:y,isSuccess:v==="success",isError:j,isInitialLoading:k,isLoading:k,data:x,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:b,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!y,isLoadingError:j&&!D,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:j&&D,isStale:$d(t,n),refetch:this.refetch,promise:w(this,pn),isEnabled:Dt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=P=>{R.status==="error"?P.reject(R.error):R.data!==void 0&&P.resolve(R.data)},W=()=>{const P=$(this,pn,R.promise=Cc());T(P)},V=w(this,pn);switch(V.status){case"pending":t.queryHash===s.queryHash&&T(V);break;case"fulfilled":(R.status==="error"||R.data!==V.value)&&W();break;case"rejected":(R.status!=="error"||R.error!==V.reason)&&W();break}}return R}updateResult(){const t=w(this,nt),n=this.createResult(w(this,le),this.options);if($(this,Rr,w(this,le).state),$(this,bs,this.options),w(this,Rr).data!==void 0&&$(this,Ss,w(this,le)),yl(n,t))return;$(this,nt,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!w(this,ws).size)return!0;const l=new Set(o??w(this,ws));return this.options.throwOnError&&l.add("error"),Object.keys(w(this,nt)).some(a=>{const c=a;return w(this,nt)[c]!==t[c]&&l.has(c)})};ne(this,fe,Qm).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ne(this,fe,Ic).call(this)}},ft=new WeakMap,le=new WeakMap,Qi=new WeakMap,nt=new WeakMap,Rr=new WeakMap,bs=new WeakMap,pn=new WeakMap,$n=new WeakMap,Ki=new WeakMap,js=new WeakMap,Ss=new WeakMap,Fr=new WeakMap,zr=new WeakMap,Un=new WeakMap,ws=new WeakMap,fe=new WeakSet,ui=function(t){ne(this,fe,zc).call(this);let n=w(this,le).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(it)),n},Nc=function(){ne(this,fe,Rc).call(this);const t=or(this.options.staleTime,w(this,le));if(Br||w(this,nt).isStale||!jc(t))return;const s=Om(w(this,nt).dataUpdatedAt,t)+1;$(this,Fr,wr.setTimeout(()=>{w(this,nt).isStale||this.updateResult()},s))},Ec=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(w(this,le)):this.options.refetchInterval)??!1},Tc=function(t){ne(this,fe,Fc).call(this),$(this,Un,t),!(Br||Dt(this.options.enabled,w(this,le))===!1||!jc(w(this,Un))||w(this,Un)===0)&&$(this,zr,wr.setInterval(()=>{(this.options.refetchIntervalInBackground||Bd.isFocused())&&ne(this,fe,ui).call(this)},w(this,Un)))},Ic=function(){ne(this,fe,Nc).call(this),ne(this,fe,Tc).call(this,ne(this,fe,Ec).call(this))},Rc=function(){w(this,Fr)&&(wr.clearTimeout(w(this,Fr)),$(this,Fr,void 0))},Fc=function(){w(this,zr)&&(wr.clearInterval(w(this,zr)),$(this,zr,void 0))},zc=function(){const t=w(this,ft).getQueryCache().build(w(this,ft),this.options);if(t===w(this,le))return;const n=w(this,le);$(this,le,t),$(this,Qi,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Qm=function(t){$e.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(w(this,nt))}),w(this,ft).getQueryCache().notify({query:w(this,le),type:"observerResultsUpdated"})})},cp);function N1(e,t){return Dt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ff(e,t){return N1(e,t)||e.state.data!==void 0&&Dc(e,t,t.refetchOnMount)}function Dc(e,t,n){if(Dt(t.enabled,e)!==!1&&or(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&$d(e,t)}return!1}function zf(e,t,n,s){return(e!==t||Dt(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&$d(e,n)}function $d(e,t){return Dt(t.enabled,e)!==!1&&e.isStaleByTime(or(t.staleTime,e))}function E1(e,t){return!yl(e.getCurrentResult(),t)}function Df(e){return{onFetch:(t,n)=>{var d,f,h,x,g;const s=t.options,i=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,o=((x=t.state.data)==null?void 0:x.pages)||[],l=((g=t.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let b=!1;const v=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?b=!0:t.signal.addEventListener("abort",()=>{b=!0}),t.signal)})},p=Bm(t.options,t.fetchOptions),m=async(y,j,k)=>{if(b)return Promise.reject();if(j==null&&y.pages.length)return Promise.resolve(y);const I=(()=>{const W={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return v(W),W})(),R=await p(I),{maxPages:_}=t.options,T=k?g1:y1;return{pages:T(y.pages,R,_),pageParams:T(y.pageParams,j,_)}};if(i&&o.length){const y=i==="backward",j=y?T1:Pf,k={pages:o,pageParams:l},D=j(s,k);a=await m(k,D,y)}else{const y=e??o.length;do{const j=c===0?l[0]??s.initialPageParam:Pf(s,a);if(c>0&&j==null)break;a=await m(a,j),c++}while(c<y)}return a};t.options.persister?t.fetchFn=()=>{var b,v;return(v=(b=t.options).persister)==null?void 0:v.call(b,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Pf(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function T1(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Gi,nn,rt,Dr,rn,Dn,dp,I1=(dp=class extends Hm{constructor(t){super();G(this,rn);G(this,Gi);G(this,nn);G(this,rt);G(this,Dr);$(this,Gi,t.client),this.mutationId=t.mutationId,$(this,rt,t.mutationCache),$(this,nn,[]),this.state=t.state||Km(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){w(this,nn).includes(t)||(w(this,nn).push(t),this.clearGcTimeout(),w(this,rt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){$(this,nn,w(this,nn).filter(n=>n!==t)),this.scheduleGc(),w(this,rt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){w(this,nn).length||(this.state.status==="pending"?this.scheduleGc():w(this,rt).remove(this))}continue(){var t;return((t=w(this,Dr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,a,c,u,d,f,h,x,g,b,v,p,m,y,j,k,D,I,R,_;const n=()=>{ne(this,rn,Dn).call(this,{type:"continue"})},s={client:w(this,Gi),meta:this.options.meta,mutationKey:this.options.mutationKey};$(this,Dr,Vm({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(T,W)=>{ne(this,rn,Dn).call(this,{type:"failed",failureCount:T,error:W})},onPause:()=>{ne(this,rn,Dn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>w(this,rt).canRun(this)}));const i=this.state.status==="pending",o=!w(this,Dr).canStart();try{if(i)n();else{ne(this,rn,Dn).call(this,{type:"pending",variables:t,isPaused:o}),await((a=(l=w(this,rt).config).onMutate)==null?void 0:a.call(l,t,this,s));const W=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,s));W!==this.state.context&&ne(this,rn,Dn).call(this,{type:"pending",context:W,variables:t,isPaused:o})}const T=await w(this,Dr).start();return await((f=(d=w(this,rt).config).onSuccess)==null?void 0:f.call(d,T,t,this.state.context,this,s)),await((x=(h=this.options).onSuccess)==null?void 0:x.call(h,T,t,this.state.context,s)),await((b=(g=w(this,rt).config).onSettled)==null?void 0:b.call(g,T,null,this.state.variables,this.state.context,this,s)),await((p=(v=this.options).onSettled)==null?void 0:p.call(v,T,null,t,this.state.context,s)),ne(this,rn,Dn).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(m=w(this,rt).config).onError)==null?void 0:y.call(m,T,t,this.state.context,this,s)),await((k=(j=this.options).onError)==null?void 0:k.call(j,T,t,this.state.context,s)),await((I=(D=w(this,rt).config).onSettled)==null?void 0:I.call(D,void 0,T,this.state.variables,this.state.context,this,s)),await((_=(R=this.options).onSettled)==null?void 0:_.call(R,void 0,T,t,this.state.context,s)),T}finally{ne(this,rn,Dn).call(this,{type:"error",error:T})}}finally{w(this,rt).runNext(this)}}},Gi=new WeakMap,nn=new WeakMap,rt=new WeakMap,Dr=new WeakMap,rn=new WeakSet,Dn=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),$e.batch(()=>{w(this,nn).forEach(s=>{s.onMutationUpdate(t)}),w(this,rt).notify({mutation:this,type:"updated",action:t})})},dp);function Km(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hn,qt,Yi,up,R1=(up=class extends Us{constructor(t={}){super();G(this,hn);G(this,qt);G(this,Yi);this.config=t,$(this,hn,new Set),$(this,qt,new Map),$(this,Yi,0)}build(t,n,s){const i=new I1({client:t,mutationCache:this,mutationId:++uo(this,Yi)._,options:t.defaultMutationOptions(n),state:s});return this.add(i),i}add(t){w(this,hn).add(t);const n=Io(t);if(typeof n=="string"){const s=w(this,qt).get(n);s?s.push(t):w(this,qt).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(w(this,hn).delete(t)){const n=Io(t);if(typeof n=="string"){const s=w(this,qt).get(n);if(s)if(s.length>1){const i=s.indexOf(t);i!==-1&&s.splice(i,1)}else s[0]===t&&w(this,qt).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Io(t);if(typeof n=="string"){const s=w(this,qt).get(n),i=s==null?void 0:s.find(o=>o.state.status==="pending");return!i||i===t}else return!0}runNext(t){var s;const n=Io(t);if(typeof n=="string"){const i=(s=w(this,qt).get(n))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$e.batch(()=>{w(this,hn).forEach(t=>{this.notify({type:"removed",mutation:t})}),w(this,hn).clear(),w(this,qt).clear()})}getAll(){return Array.from(w(this,hn))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Ef(n,s))}findAll(t={}){return this.getAll().filter(n=>Ef(t,n))}notify(t){$e.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return $e.batch(()=>Promise.all(t.map(n=>n.continue().catch(it))))}},hn=new WeakMap,qt=new WeakMap,Yi=new WeakMap,up);function Io(e){var t;return(t=e.options.scope)==null?void 0:t.id}var mn,Vn,pt,xn,jn,Vo,Pc,fp,F1=(fp=class extends Us{constructor(n,s){super();G(this,jn);G(this,mn);G(this,Vn);G(this,pt);G(this,xn);$(this,mn,n),this.setOptions(s),this.bindMethods(),ne(this,jn,Vo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const s=this.options;this.options=w(this,mn).defaultMutationOptions(n),yl(this.options,s)||w(this,mn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:w(this,pt),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&$r(s.mutationKey)!==$r(this.options.mutationKey)?this.reset():((i=w(this,pt))==null?void 0:i.state.status)==="pending"&&w(this,pt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=w(this,pt))==null||n.removeObserver(this)}onMutationUpdate(n){ne(this,jn,Vo).call(this),ne(this,jn,Pc).call(this,n)}getCurrentResult(){return w(this,Vn)}reset(){var n;(n=w(this,pt))==null||n.removeObserver(this),$(this,pt,void 0),ne(this,jn,Vo).call(this),ne(this,jn,Pc).call(this)}mutate(n,s){var i;return $(this,xn,s),(i=w(this,pt))==null||i.removeObserver(this),$(this,pt,w(this,mn).getMutationCache().build(w(this,mn),this.options)),w(this,pt).addObserver(this),w(this,pt).execute(n)}},mn=new WeakMap,Vn=new WeakMap,pt=new WeakMap,xn=new WeakMap,jn=new WeakSet,Vo=function(){var s;const n=((s=w(this,pt))==null?void 0:s.state)??Km();$(this,Vn,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Pc=function(n){$e.batch(()=>{var s,i,o,l,a,c,u,d;if(w(this,xn)&&this.hasListeners()){const f=w(this,Vn).variables,h=w(this,Vn).context,x={client:w(this,mn),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(s=w(this,xn)).onSuccess)==null||i.call(s,n.data,f,h,x),(l=(o=w(this,xn)).onSettled)==null||l.call(o,n.data,null,f,h,x)):(n==null?void 0:n.type)==="error"&&((c=(a=w(this,xn)).onError)==null||c.call(a,n.error,f,h,x),(d=(u=w(this,xn)).onSettled)==null||d.call(u,void 0,n.error,f,h,x))}this.listeners.forEach(f=>{f(w(this,Vn))})})},fp),sn,pp,z1=(pp=class extends Us{constructor(t={}){super();G(this,sn);this.config=t,$(this,sn,new Map)}build(t,n,s){const i=n.queryKey,o=n.queryHash??Od(i,n);let l=this.get(o);return l||(l=new C1({client:t,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(l)),l}add(t){w(this,sn).has(t.queryHash)||(w(this,sn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=w(this,sn).get(t.queryHash);n&&(t.destroy(),n===t&&w(this,sn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$e.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return w(this,sn).get(t)}getAll(){return[...w(this,sn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Nf(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>Nf(t,s)):n}notify(t){$e.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){$e.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$e.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},sn=new WeakMap,pp),Ie,Hn,qn,Cs,ks,Qn,Ns,Es,hp,D1=(hp=class{constructor(e={}){G(this,Ie);G(this,Hn);G(this,qn);G(this,Cs);G(this,ks);G(this,Qn);G(this,Ns);G(this,Es);$(this,Ie,e.queryCache||new z1),$(this,Hn,e.mutationCache||new R1),$(this,qn,e.defaultOptions||{}),$(this,Cs,new Map),$(this,ks,new Map),$(this,Qn,0)}mount(){uo(this,Qn)._++,w(this,Qn)===1&&($(this,Ns,Bd.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Ie).onFocus())})),$(this,Es,gl.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Ie).onOnline())})))}unmount(){var e,t;uo(this,Qn)._--,w(this,Qn)===0&&((e=w(this,Ns))==null||e.call(this),$(this,Ns,void 0),(t=w(this,Es))==null||t.call(this),$(this,Es,void 0))}isFetching(e){return w(this,Ie).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return w(this,Hn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Ie).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=w(this,Ie).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(or(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return w(this,Ie).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),i=w(this,Ie).get(s.queryHash),o=i==null?void 0:i.state.data,l=h1(t,o);if(l!==void 0)return w(this,Ie).build(this,s).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return $e.batch(()=>w(this,Ie).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Ie).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=w(this,Ie);$e.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=w(this,Ie);return $e.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=$e.batch(()=>w(this,Ie).findAll(e).map(i=>i.cancel(n)));return Promise.all(s).then(it).catch(it)}invalidateQueries(e,t={}){return $e.batch(()=>(w(this,Ie).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=$e.batch(()=>w(this,Ie).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(it)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(it)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=w(this,Ie).build(this,t);return n.isStaleByTime(or(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(it).catch(it)}fetchInfiniteQuery(e){return e.behavior=Df(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(it).catch(it)}ensureInfiniteQueryData(e){return e.behavior=Df(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gl.isOnline()?w(this,Hn).resumePausedMutations():Promise.resolve()}getQueryCache(){return w(this,Ie)}getMutationCache(){return w(this,Hn)}getDefaultOptions(){return w(this,qn)}setDefaultOptions(e){$(this,qn,e)}setQueryDefaults(e,t){w(this,Cs).set($r(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...w(this,Cs).values()],n={};return t.forEach(s=>{Vi(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){w(this,ks).set($r(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...w(this,ks).values()],n={};return t.forEach(s=>{Vi(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...w(this,qn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Od(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Wd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...w(this,qn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){w(this,Ie).clear(),w(this,Hn).clear()}},Ie=new WeakMap,Hn=new WeakMap,qn=new WeakMap,Cs=new WeakMap,ks=new WeakMap,Qn=new WeakMap,Ns=new WeakMap,Es=new WeakMap,hp),Gm=S.createContext(void 0),be=e=>{const t=S.useContext(Gm);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},P1=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(Gm.Provider,{value:e,children:t})),Ym=S.createContext(!1),M1=()=>S.useContext(Ym);Ym.Provider;function _1(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var L1=S.createContext(_1()),A1=()=>S.useContext(L1),O1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},W1=e=>{S.useEffect(()=>{e.clearReset()},[e])},B1=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&e.data===void 0||$m(n,[e.error,s])),$1=e=>{if(e.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...i)=>n(s(...i)):n(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},U1=(e,t)=>e.isLoading&&e.isFetching&&!t,V1=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Mf=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function H1(e,t,n){var f,h,x,g,b;const s=M1(),i=A1(),o=be(),l=o.defaultQueryOptions(e);(h=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,l),l._optimisticResults=s?"isRestoring":"optimistic",$1(l),O1(l,i),W1(i);const a=!o.getQueryCache().get(l.queryHash),[c]=S.useState(()=>new t(o,l)),u=c.getOptimisticResult(l),d=!s&&e.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(v=>{const p=d?c.subscribe($e.batchCalls(v)):it;return c.updateResult(),p},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),S.useEffect(()=>{c.setOptions(l)},[l,c]),V1(l,u))throw Mf(l,c,i);if(B1({result:u,errorResetBoundary:i,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw u.error;if((g=(x=o.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||g.call(x,l,u),l.experimental_prefetchInRender&&!Br&&U1(u,s)){const v=a?Mf(l,c,i):(b=o.getQueryCache().get(l.queryHash))==null?void 0:b.promise;v==null||v.catch(it).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?u:c.trackResult(u)}function Ye(e,t){return H1(e,k1)}function Te(e,t){const n=be(),[s]=S.useState(()=>new F1(n,e));S.useEffect(()=>{s.setOptions(e)},[s,e]);const i=S.useSyncExternalStore(S.useCallback(l=>s.subscribe($e.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=S.useCallback((l,a)=>{s.mutate(l,a).catch(it)},[s]);if(i.error&&$m(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}const q1=({children:e})=>r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:e}),Q1=({domain:e,recordCount:t,isLoading:n})=>{const s=Me(),i=e.icon,o=()=>{e.enabled&&s(`/${e.id}-new`)};return r.jsxs("div",{onClick:o,className:`
        relative p-6 rounded-xl border transition-all
        ${e.enabled?"cursor-pointer hover:shadow-lg hover:-translate-y-1 border-slate-200 bg-white":"cursor-not-allowed opacity-50 border-slate-100 bg-slate-50"}
      `,children:[!e.enabled&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 rounded-xl",children:r.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Coming Soon"})}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx(i,{className:"w-6 h-6 text-slate-700"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-1",children:e.name}),r.jsx("p",{className:"text-sm text-slate-600 mb-3",children:e.description}),e.enabled&&r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-xs font-medium text-slate-500",children:n?"...":`${t} records`})})]})]})]})};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),_f=e=>{const t=G1(e);return t.charAt(0).toUpperCase()+t.slice(1)},Jm=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),Y1=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var J1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:l,...a},c)=>S.createElement("svg",{ref:c,...J1,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:Jm("lucide",i),...!o&&!Y1(a)&&{"aria-hidden":"true"},...a},[...l.map(([u,d])=>S.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(e,t)=>{const n=S.forwardRef(({className:s,...i},o)=>S.createElement(X1,{ref:o,iconNode:t,className:Jm(`lucide-${K1(_f(e))}`,`lucide-${e}`,s),...i}));return n.displayName=_f(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ev=Q("activity",Z1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],no=Q("arrow-left",tv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],rv=Q("banknote",nv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],xr=Q("briefcase",sv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ji=Q("building-2",iv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Nn=Q("calendar",ov);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Wt=Q("car",lv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bl=Q("chevron-down",av);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dv=Q("chevron-left",cv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ms=Q("chevron-right",uv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],pv=Q("chevron-up",fv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],at=Q("circle-alert",hv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_s=Q("circle-check-big",mv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xm=Q("circle-check",xv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],gv=Q("circle-x",yv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bv=Q("circle",vv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ls=Q("clock",jv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wv=Q("copy",Sv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],kv=Q("database",Cv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Zm=Q("download",Nv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Tv=Q("ellipsis-vertical",Ev);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Rv=Q("ellipsis",Iv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ro=Q("external-link",Fv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dv=Q("eye",zv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ct=Q("file-text",Pv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ex=Q("funnel",Mv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],In=Q("house",_v);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Av=Q("image",Lv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Hr=Q("landmark",Ov);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Bv=Q("layout-dashboard",Wv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Hi=Q("list",$v);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Mc=Q("loader-circle",Uv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Hv=Q("lock",Vv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Qv=Q("log-out",qv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tx=Q("mail",Kv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Yv=Q("map-pin",Gv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Xv=Q("paperclip",Jv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],eb=Q("pen",Zv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Vs=Q("pencil",tb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],nx=Q("phone",nb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],sb=Q("piggy-bank",rb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ct=Q("plus",ib);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],lb=Q("printer",ob);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],cb=Q("receipt",ab);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lf=Q("refresh-cw",db);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],$l=Q("scale",ub);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rx=Q("search",fb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ud=Q("settings",pb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cr=Q("shield",hb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],sx=Q("sparkles",mb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ix=Q("square-pen",xb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$t=Q("trash-2",yb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],vl=Q("trending-up",gb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Si=Q("triangle-alert",vb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],so=Q("upload",bb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Sb=Q("user",jb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Cb=Q("wallet",wb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Rn=Q("wrench",kb);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Et=Q("x",Nb),Eb=async()=>{const e=await fetch("/api/renewals/summary",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch renewal summary");return e.json()},Tb=async e=>{const t=new URLSearchParams;e!=null&&e.domain&&e.domain!=="all"&&t.append("domain",e.domain),e!=null&&e.priority&&e.priority!=="all"&&t.append("priority",e.priority),e!=null&&e.from&&t.append("from",e.from),e!=null&&e.to&&t.append("to",e.to);const n=`/api/renewals/timeline${t.toString()?`?${t.toString()}`:""}`,s=await fetch(n,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch renewal timeline");return s.json()},Ib=()=>Ye({queryKey:["renewals","summary"],queryFn:Eb,refetchInterval:5*60*1e3}),Rb=()=>{const{data:e,isLoading:t}=Ib();return t||!e||e.total===0?null:r.jsxs("div",{className:"p-6 rounded-xl border border-slate-200 bg-white mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Nn,{className:"w-6 h-6 text-slate-700"}),r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Upcoming Renewals"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.overdue>0&&r.jsxs(ge,{to:"/renewals?filter=overdue",className:"text-center p-3 rounded-lg bg-red-50 hover:bg-red-100 transition",children:[r.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[r.jsx(at,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{className:"text-2xl font-semibold text-red-600",children:e.overdue})]}),r.jsx("p",{className:"text-xs text-red-700",children:"Overdue"})]}),r.jsxs(ge,{to:"/renewals?filter=7days",className:"text-center p-3 rounded-lg bg-amber-50 hover:bg-amber-100 transition",children:[r.jsx("div",{className:"text-2xl font-semibold text-amber-600 mb-1",children:e.next7Days}),r.jsx("p",{className:"text-xs text-amber-700",children:"Next 7 Days"})]}),r.jsxs(ge,{to:"/renewals?filter=30days",className:"text-center p-3 rounded-lg bg-blue-50 hover:bg-blue-100 transition",children:[r.jsx("div",{className:"text-2xl font-semibold text-blue-600 mb-1",children:e.next30Days}),r.jsx("p",{className:"text-xs text-blue-700",children:"Next 30 Days"})]})]}),r.jsx(ge,{to:"/renewals",className:"block w-full text-center py-2 px-4 rounded-lg bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-medium transition",children:"View All Renewals"})]})},Fb=async()=>{const e=await fetch("/api/v2/stats",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch domain stats");return e.json()},zb=()=>Ye({queryKey:["domain-stats"],queryFn:Fb,staleTime:3e4,refetchOnWindowFocus:!0}),Db=[{id:"vehicles",name:"Vehicles",description:"Manage vehicles and track insurance, finance, MOT, and service history",icon:Wt,enabled:!0},{id:"properties",name:"Properties",description:"Manage properties and track insurance, utilities, and maintenance",icon:In,enabled:!0},{id:"employments",name:"Employments",description:"Manage employment details and track pensions, benefits, and contacts",icon:xr,enabled:!0},{id:"services",name:"Service Providers",description:"Manage tradespeople and service providers for easy access in emergencies",icon:Rn,enabled:!0},{id:"finance",name:"Finance",description:"Manage bank accounts, credit cards, investments, pensions, and loans",icon:Hr,enabled:!0}],Pb=()=>{const{data:e,isLoading:t}=zb();return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("header",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Life Domains"}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Organize your household information by life area"})]}),r.jsx(Rb,{}),r.jsx(q1,{children:Db.map(n=>r.jsx(Q1,{domain:n,recordCount:(e==null?void 0:e[n.id])||0,isLoading:t},n.id))})]})},we="/api/domains",Mb=async e=>{const t=await fetch(`${we}/property/records/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch property record");return t.json()},_b=async e=>{const t=await fetch(`${we}/property/records`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create record")}return t.json()},Lb=async e=>{if(!(await fetch(`${we}/property/records/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete record")},Ab=async e=>{const t=await fetch(`${we}/vehicles/records/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch vehicle record");return t.json()},Ob=async e=>{const t=await fetch(`${we}/vehicles/records`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create vehicle record")}return t.json()},Wb=async e=>{if(!(await fetch(`${we}/vehicles/records/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete vehicle record")},Bb=async()=>{const e=await fetch(`${we}/government/records`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch government records");return e.json()},$b=async e=>{const t=await fetch(`${we}/government/records/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch government record");return t.json()},Ub=async e=>{const t=await fetch(`${we}/government/records`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create government record")}return t.json()},Vb=async(e,t)=>{const n=await fetch(`${we}/government/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update government record");return n.json()},Hb=async e=>{if(!(await fetch(`${we}/government/records/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete government record")},qb=async()=>{const e=await fetch(`${we}/insurance/records`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch insurance records");return e.json()},Qb=async e=>{const t=await fetch(`${we}/insurance/records/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch insurance record");return t.json()},Kb=async e=>{const t=await fetch(`${we}/insurance/records`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create insurance record")}return t.json()},Gb=async(e,t)=>{const n=await fetch(`${we}/insurance/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update insurance record");return n.json()},Yb=async e=>{if(!(await fetch(`${we}/insurance/records/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete insurance record")},Jb=async()=>{const e=await fetch(`${we}/legal/records`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch legal records");return e.json()},Xb=async e=>{const t=await fetch(`${we}/legal/records/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch legal record");return t.json()},Zb=async e=>{const t=await fetch(`${we}/legal/records`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create legal record")}return t.json()},e2=async(e,t)=>{const n=await fetch(`${we}/legal/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update legal record");return n.json()},t2=async e=>{if(!(await fetch(`${we}/legal/records/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete legal record")},n2=async e=>{const t=await fetch(`${we}/services/records/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch services record");return t.json()},r2=async e=>{const t=await fetch(`${we}/services/records`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create services record")}return t.json()},s2=async(e,t)=>{const n=await fetch(`${we}/services/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update services record");return n.json()},i2=async e=>{if(!(await fetch(`${we}/services/records/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete services record")},o2=e=>Ye({queryKey:["property-record",e],queryFn:()=>Mb(e),enabled:!!e}),l2=()=>{const e=be();return Te({mutationFn:_b,onSuccess:()=>{e.invalidateQueries({queryKey:["property-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},a2=()=>{const e=be();return Te({mutationFn:Lb,onSuccess:()=>{e.invalidateQueries({queryKey:["property-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},c2=e=>e?/^[A-Z]{1,2}\d[A-Z\d]?\s?\d[A-Z]{2}$/i.test(e):!1,d2=e=>{if(!e)return!1;const t=e.replace(/\s/g,"").toUpperCase();if(!/^[A-CEGHJ-PR-TW-Z]{2}\d{6}[A-D]?$/.test(t))return!1;const s=["BG","GB","NK","KN","TN","NT","ZZ"],i=t.substring(0,2);return!s.includes(i)},u2=e=>{if(!e)return!1;const t=e.replace(/\s/g,"").toUpperCase(),n=/^[A-Z]{2}[0-9]{2}[A-Z]{3}$/,s=/^[A-Z][0-9]{1,3}[A-Z]{3}$/,i=/^[A-Z]{3}[0-9]{1,3}[A-Z]$/,o=/^[A-Z]{1,3}[0-9]{1,4}$/,l=/^[I-N][A-Z]{1,2}[0-9]{1,4}$/;return n.test(t)||s.test(t)||i.test(t)||o.test(t)||l.test(t)};async function Ro(e){if(e.status===401)throw window.location.pathname.includes("/login")||(window.location.href="/login"),new Error("unauthenticated");if(!e.ok)try{const t=await e.json();throw new Error(t.error||`API error ${e.status}`)}catch{throw new Error(`API error ${e.status}`)}return e.json()}const Hs=e=>{const[t,n]=S.useState([]),[s,i]=S.useState(!0),[o,l]=S.useState(null);return S.useEffect(()=>{(async()=>{try{i(!0);const f=e?`/api/record-types?domain=${encodeURIComponent(e)}`:"/api/record-types",h=await fetch(f,{credentials:"include"}),x=await Ro(h);n(x.recordTypes||x)}catch(f){l(f.message||"Failed to fetch record types"),console.error(f)}finally{i(!1)}})()},[e]),{recordTypes:t,loading:s,error:o,addRecordType:async d=>{try{const f=await fetch("/api/record-types",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),h=await Ro(f),x=h.recordType||h;return n([...t,x]),x}catch(f){throw console.error("Failed to add record type:",f),f}},updateRecordType:async(d,f)=>{try{const h=await fetch(`/api/record-types/${d}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),x=await Ro(h),g=x.recordType||x;return n(t.map(b=>b._id===d?g:b)),g}catch(h){throw console.error("Failed to update record type:",h),h}},deleteRecordType:async d=>{try{const f=await fetch(`/api/record-types/${d}`,{method:"DELETE",credentials:"include"});await Ro(f),n(t.filter(h=>h._id!==d))}catch(f){throw console.error("Failed to delete record type:",f),f}}}},f2=({isOpen:e,onClose:t,onSuccess:n})=>{const{recordTypes:s,loading:i}=Hs("Property"),o=l2(),[l,a]=S.useState({name:"",recordType:"",provider:"",accountNumber:"",postcode:"",contactPhone:"",contactEmail:"",monthlyAmount:void 0,renewalDate:"",priority:"Standard",notes:""}),[c,u]=S.useState({}),d=(p,m)=>{a(y=>({...y,[p]:m})),c[p]&&u(y=>{const j={...y};return delete j[p],j})},f=()=>{var m;const p={};return(m=l.name)!=null&&m.trim()||(p.name="Name is required"),l.recordType||(p.recordType="Record type is required"),l.postcode&&!c2(l.postcode)&&(p.postcode="Invalid UK postcode format"),u(p),Object.keys(p).length===0},h=async p=>{if(p.preventDefault(),!!f())try{await o.mutateAsync(l),a({name:"",recordType:"",provider:"",accountNumber:"",postcode:"",contactPhone:"",contactEmail:"",monthlyAmount:void 0,renewalDate:"",priority:"Standard",notes:""}),u({}),n(),t()}catch(m){u({submit:m.message||"Failed to create record"})}};if(!e)return null;const x={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},g={backgroundColor:"white",borderRadius:"16px",width:"95%",maxWidth:"700px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},b={width:"100%",padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"15px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#0f172a",backgroundColor:"#ffffff"},v={display:"block",fontSize:"14px",fontWeight:"500",color:"#334155",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"};return r.jsx("div",{style:x,onClick:t,children:r.jsxs("div",{style:g,onClick:p=>p.stopPropagation(),children:[r.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #f1f5f9"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#0f172a",margin:0},children:"Add Property Record"}),r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Et,{size:24,color:"#64748b"})})]})}),r.jsxs("form",{onSubmit:h,style:{padding:"24px"},children:[c.submit&&r.jsx("div",{style:{padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:"14px",marginBottom:"20px"},children:c.submit}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Name *"}),r.jsx("input",{type:"text",value:l.name,onChange:p=>d("name",p.target.value),style:b,placeholder:"e.g., Main Mortgage, Electric Bill"}),c.name&&r.jsx("p",{style:{color:"#dc2626",fontSize:"13px",marginTop:"4px"},children:c.name})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Record Type *"}),r.jsxs("select",{value:l.recordType,onChange:p=>d("recordType",p.target.value),style:b,disabled:i,children:[r.jsx("option",{value:"",children:"Select type..."}),s.map(p=>r.jsx("option",{value:p.name,children:p.name},p._id))]}),c.recordType&&r.jsx("p",{style:{color:"#dc2626",fontSize:"13px",marginTop:"4px"},children:c.recordType})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Provider"}),r.jsx("input",{type:"text",value:l.provider,onChange:p=>d("provider",p.target.value),style:b,placeholder:"e.g., Santander, British Gas"})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Account Number"}),r.jsx("input",{type:"text",value:l.accountNumber,onChange:p=>d("accountNumber",p.target.value),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Postcode"}),r.jsx("input",{type:"text",value:l.postcode,onChange:p=>d("postcode",p.target.value),style:b,placeholder:"e.g., SW1A 1AA"}),c.postcode&&r.jsx("p",{style:{color:"#dc2626",fontSize:"13px",marginTop:"4px"},children:c.postcode})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Contact Phone"}),r.jsx("input",{type:"tel",value:l.contactPhone,onChange:p=>d("contactPhone",p.target.value),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Contact Email"}),r.jsx("input",{type:"email",value:l.contactEmail,onChange:p=>d("contactEmail",p.target.value),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Monthly Amount ()"}),r.jsx("input",{type:"number",step:"0.01",value:l.monthlyAmount||"",onChange:p=>d("monthlyAmount",p.target.value?parseFloat(p.target.value):void 0),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Renewal Date"}),r.jsx("input",{type:"date",value:l.renewalDate,onChange:p=>d("renewalDate",p.target.value),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Priority"}),r.jsxs("select",{value:l.priority,onChange:p=>d("priority",p.target.value),style:b,children:[r.jsx("option",{value:"Standard",children:"Standard"}),r.jsx("option",{value:"Important",children:"Important"}),r.jsx("option",{value:"Critical",children:"Critical"})]})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:v,children:"Notes"}),r.jsx("textarea",{value:l.notes,onChange:p=>d("notes",p.target.value),rows:3,style:{...b,resize:"vertical"}})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",onClick:t,style:{padding:"10px 20px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#ffffff",color:"#64748b",fontSize:"14px",fontWeight:"500",cursor:"pointer",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:o.isPending,style:{padding:"10px 20px",border:"none",borderRadius:"8px",backgroundColor:"#0f172a",color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:o.isPending?"not-allowed":"pointer",opacity:o.isPending?.6:1,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:o.isPending?"Saving...":"Save Record"})]})]})]})})},p2=()=>{var x;const{recordId:e}=Bt(),t=Me(),{data:n,isLoading:s}=o2(e),i=a2(),[o,l]=S.useState(!1),[a,c]=S.useState(!1),u=async()=>{if(e)try{await i.mutateAsync(e),t("/property")}catch(g){console.error("Delete failed:",g)}},d=g=>g?new Date(g).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}):"Not set",f=g=>{switch(g){case"Critical":return{bg:"#fef2f2",text:"#dc2626",border:"#fecaca"};case"Important":return{bg:"#fff7ed",text:"#ea580c",border:"#fed7aa"};default:return{bg:"#f8fafc",text:"#475569",border:"#e2e8f0"}}};if(s)return r.jsx("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1000px"},children:r.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#64748b"},children:"Loading record..."})});if(!n)return r.jsx("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1000px"},children:r.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#64748b"},children:"Record not found"})});const h=f(n.priority);return r.jsxs("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1000px"},children:[r.jsxs("div",{style:{marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"#64748b"},children:[r.jsx(ge,{to:"/",style:{color:"#64748b",textDecoration:"none"},children:"Home"}),r.jsx(Ms,{size:16}),r.jsx(ge,{to:"/property",style:{color:"#64748b",textDecoration:"none"},children:"Property"}),r.jsx(Ms,{size:16}),r.jsx("span",{style:{color:"#0f172a",fontWeight:"500"},children:n.name})]}),r.jsx("header",{style:{backgroundColor:"#ffffff",padding:"32px",borderRadius:"16px",border:"1px solid #f1f5f9",marginBottom:"24px",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"16px"},children:[r.jsx("div",{style:{padding:"16px",borderRadius:"12px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(In,{size:32,color:"#0f172a",strokeWidth:1.5})}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#0f172a",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif",letterSpacing:"-0.025em"},children:n.name}),n.provider&&r.jsx("p",{style:{fontSize:"16px",color:"#64748b",margin:"0 0 12px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:n.provider}),r.jsx("span",{style:{padding:"6px 12px",fontSize:"13px",fontWeight:"500",borderRadius:"8px",backgroundColor:h.bg,color:h.text,border:`1px solid ${h.border}`,display:"inline-block"},children:n.priority})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>c(!0),style:{padding:"10px 20px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#ffffff",color:"#64748b",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx(Vs,{size:16}),"Edit"]}),r.jsxs("button",{onClick:()=>l(!0),style:{padding:"10px 20px",border:"1px solid #fecaca",borderRadius:"8px",backgroundColor:"#fef2f2",color:"#dc2626",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx($t,{size:16}),"Delete"]})]})]})}),r.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"32px",borderRadius:"16px",border:"1px solid #f1f5f9",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",marginBottom:"24px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Record Details"}),r.jsxs("div",{style:{display:"grid",gap:"24px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Record Type"}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,textTransform:"capitalize",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:((x=n.recordType)==null?void 0:x.replace("-"," "))||"Not specified"})]}),n.accountNumber&&r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Account Number"}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:n.accountNumber})]}),n.postcode&&r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx(Yv,{size:14,style:{display:"inline",marginRight:"4px"}}),"Postcode"]}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:n.postcode})]}),n.contactPhone&&r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx(nx,{size:14,style:{display:"inline",marginRight:"4px"}}),"Contact Phone"]}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:n.contactPhone})]}),n.contactEmail&&r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx(tx,{size:14,style:{display:"inline",marginRight:"4px"}}),"Contact Email"]}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:n.contactEmail})]}),n.monthlyAmount!==void 0&&r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Monthly Amount"}),r.jsxs("p",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["",n.monthlyAmount.toFixed(2)]})]}),n.renewalDate&&r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx(Nn,{size:14,style:{display:"inline",marginRight:"4px"}}),"Renewal Date"]}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:d(n.renewalDate)})]}),n.notes&&r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Notes"}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif",whiteSpace:"pre-wrap"},children:n.notes})]})]})]}),a&&n&&r.jsx(f2,{isOpen:a,onClose:()=>c(!1),record:n}),o&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"32px",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[r.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",marginBottom:"12px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Delete Property Record?"}),r.jsxs("p",{style:{fontSize:"15px",color:"#64748b",marginBottom:"24px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:['Are you sure you want to delete "',n.name,'"? This action cannot be undone.']}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>l(!1),style:{padding:"10px 20px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#ffffff",color:"#64748b",fontSize:"14px",fontWeight:"500",cursor:"pointer",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Cancel"}),r.jsx("button",{onClick:u,disabled:i.isPending,style:{padding:"10px 20px",border:"none",borderRadius:"8px",backgroundColor:"#dc2626",color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:i.isPending?"not-allowed":"pointer",opacity:i.isPending?.6:1,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:i.isPending?"Deleting...":"Delete"})]})]})})]})},h2=e=>Ye({queryKey:["vehicle-record",e],queryFn:()=>Ab(e),enabled:!!e}),m2=()=>{const e=be();return Te({mutationFn:Ob,onSuccess:()=>{e.invalidateQueries({queryKey:["vehicle-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},x2=()=>{const e=be();return Te({mutationFn:Wb,onSuccess:()=>{e.invalidateQueries({queryKey:["vehicle-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},y2=({isOpen:e,onClose:t,onSuccess:n})=>{const{recordTypes:s,loading:i}=Hs("Vehicle"),o=m2(),[l,a]=S.useState({name:"",recordType:"",registration:"",make:"",model:"",purchaseDate:"",financeProvider:"",financeMonthlyPayment:void 0,motExpiryDate:"",insuranceRenewalDate:"",roadTaxExpiryDate:"",priority:"Standard",notes:""}),[c,u]=S.useState({}),d=(p,m)=>{a(y=>({...y,[p]:m})),c[p]&&u(y=>{const j={...y};return delete j[p],j})},f=()=>{var m;const p={};return(m=l.name)!=null&&m.trim()||(p.name="Name is required"),l.recordType||(p.recordType="Record type is required"),l.registration&&!u2(l.registration)&&(p.registration="Invalid UK/NI registration plate format"),u(p),Object.keys(p).length===0},h=async p=>{if(p.preventDefault(),!!f())try{await o.mutateAsync(l),n(),t()}catch(m){u({submit:m.message||"Failed to create vehicle record"})}};if(!e)return null;const x={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},g={backgroundColor:"white",borderRadius:"16px",width:"95%",maxWidth:"700px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},b={width:"100%",padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"15px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#0f172a",backgroundColor:"#ffffff"},v={display:"block",fontSize:"14px",fontWeight:"500",color:"#334155",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"};return r.jsx("div",{style:x,onClick:t,children:r.jsxs("div",{style:g,onClick:p=>p.stopPropagation(),children:[r.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #f1f5f9"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#0f172a",margin:0},children:"Add Vehicle Record"}),r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Et,{size:24,color:"#64748b"})})]})}),r.jsxs("form",{onSubmit:h,style:{padding:"24px"},children:[c.submit&&r.jsx("div",{style:{padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:"14px",marginBottom:"20px"},children:c.submit}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Name *"}),r.jsx("input",{type:"text",value:l.name,onChange:p=>d("name",p.target.value),style:b,placeholder:"e.g., Family Car, Work Van"}),c.name&&r.jsx("p",{style:{color:"#dc2626",fontSize:"13px",marginTop:"4px"},children:c.name})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Record Type *"}),r.jsxs("select",{value:l.recordType,onChange:p=>d("recordType",p.target.value),style:b,disabled:i,children:[r.jsx("option",{value:"",children:"Select type..."}),s.map(p=>r.jsx("option",{value:p.name,children:p.name},p._id))]}),c.recordType&&r.jsx("p",{style:{color:"#dc2626",fontSize:"13px",marginTop:"4px"},children:c.recordType})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Registration"}),r.jsx("input",{type:"text",value:l.registration,onChange:p=>d("registration",p.target.value.toUpperCase()),style:b,placeholder:"e.g., AB12 CDE"}),c.registration&&r.jsx("p",{style:{color:"#dc2626",fontSize:"13px",marginTop:"4px"},children:c.registration})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:v,children:"Make"}),r.jsx("input",{type:"text",value:l.make,onChange:p=>d("make",p.target.value),style:b,placeholder:"e.g., Ford"})]}),r.jsxs("div",{children:[r.jsx("label",{style:v,children:"Model"}),r.jsx("input",{type:"text",value:l.model,onChange:p=>d("model",p.target.value),style:b,placeholder:"e.g., Focus"})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Purchase Date"}),r.jsx("input",{type:"date",value:l.purchaseDate,onChange:p=>d("purchaseDate",p.target.value),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Finance Provider"}),r.jsx("input",{type:"text",value:l.financeProvider,onChange:p=>d("financeProvider",p.target.value),style:b,placeholder:"e.g., Santander Consumer Finance"})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Finance Monthly Payment ()"}),r.jsx("input",{type:"number",step:"0.01",value:l.financeMonthlyPayment||"",onChange:p=>d("financeMonthlyPayment",p.target.value?parseFloat(p.target.value):void 0),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"MOT Expiry Date"}),r.jsx("input",{type:"date",value:l.motExpiryDate,onChange:p=>d("motExpiryDate",p.target.value),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Insurance Renewal Date"}),r.jsx("input",{type:"date",value:l.insuranceRenewalDate,onChange:p=>d("insuranceRenewalDate",p.target.value),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Road Tax Expiry Date"}),r.jsx("input",{type:"date",value:l.roadTaxExpiryDate,onChange:p=>d("roadTaxExpiryDate",p.target.value),style:b})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:v,children:"Priority"}),r.jsxs("select",{value:l.priority,onChange:p=>d("priority",p.target.value),style:b,children:[r.jsx("option",{value:"Standard",children:"Standard"}),r.jsx("option",{value:"Important",children:"Important"}),r.jsx("option",{value:"Critical",children:"Critical"})]})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:v,children:"Notes"}),r.jsx("textarea",{value:l.notes,onChange:p=>d("notes",p.target.value),rows:3,style:{...b,resize:"vertical"}})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",onClick:t,style:{padding:"10px 20px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#ffffff",color:"#64748b",fontSize:"14px",fontWeight:"500",cursor:"pointer",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:o.isPending,style:{padding:"10px 20px",border:"none",borderRadius:"8px",backgroundColor:"#0f172a",color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:o.isPending?"not-allowed":"pointer",opacity:o.isPending?.6:1,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:o.isPending?"Saving...":"Save Vehicle"})]})]})]})})},g2=()=>{var p;const{recordId:e}=Bt(),t=Me(),{data:n,isLoading:s}=h2(e),i=x2(),[o,l]=S.useState(!1),[a,c]=S.useState(!1),u=async()=>{if(e)try{await i.mutateAsync(e),t("/vehicles")}catch(m){console.error("Delete failed:",m)}},d=m=>m?new Date(m).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}):"Not set",f=m=>{switch(m){case"Critical":return{bg:"#fef2f2",text:"#dc2626",border:"#fecaca"};case"Important":return{bg:"#fff7ed",text:"#ea580c",border:"#fed7aa"};default:return{bg:"#f8fafc",text:"#475569",border:"#e2e8f0"}}},h=m=>{if(!m)return null;const y=new Date(m),j=new Date,k=Math.floor((y.getTime()-j.getTime())/(1e3*60*60*24));return k<0?{icon:at,color:"#dc2626",bg:"#fef2f2",border:"#fecaca",label:"Expired"}:k<=30?{icon:Ls,color:"#ea580c",bg:"#fff7ed",border:"#fed7aa",label:`Expiring in ${k} days`}:{icon:_s,color:"#16a34a",bg:"#f0fdf4",border:"#bbf7d0",label:"Valid"}};if(s)return r.jsx("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1000px"},children:r.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#64748b"},children:"Loading vehicle..."})});if(!n)return r.jsx("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1000px"},children:r.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#64748b"},children:"Vehicle record not found"})});const x=f(n.priority),g=h(n.motExpiryDate),b=h(n.insuranceRenewalDate),v=h(n.roadTaxExpiryDate);return r.jsxs("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1000px"},children:[r.jsxs("div",{style:{marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"#64748b"},children:[r.jsx(ge,{to:"/",style:{color:"#64748b",textDecoration:"none"},children:"Home"}),r.jsx(Ms,{size:16}),r.jsx(ge,{to:"/vehicles",style:{color:"#64748b",textDecoration:"none"},children:"Vehicles"}),r.jsx(Ms,{size:16}),r.jsx("span",{style:{color:"#0f172a",fontWeight:"500"},children:n.name})]}),r.jsx("header",{style:{backgroundColor:"#ffffff",padding:"32px",borderRadius:"16px",border:"1px solid #f1f5f9",marginBottom:"24px",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"16px"},children:[r.jsx("div",{style:{padding:"16px",borderRadius:"12px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Wt,{size:32,color:"#0f172a",strokeWidth:1.5})}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#0f172a",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif",letterSpacing:"-0.025em"},children:n.name}),n.registration&&r.jsx("p",{style:{fontSize:"16px",fontFamily:"monospace",color:"#64748b",margin:"0 0 8px 0"},children:n.registration}),n.make&&n.model&&r.jsxs("p",{style:{fontSize:"15px",color:"#64748b",margin:"0 0 12px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[n.make," ",n.model]}),r.jsx("span",{style:{padding:"6px 12px",fontSize:"13px",fontWeight:"500",borderRadius:"8px",backgroundColor:x.bg,color:x.text,border:`1px solid ${x.border}`,display:"inline-block"},children:n.priority})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>c(!0),style:{padding:"10px 20px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#ffffff",color:"#64748b",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx(Vs,{size:16}),"Edit"]}),r.jsxs("button",{onClick:()=>l(!0),style:{padding:"10px 20px",border:"1px solid #fecaca",borderRadius:"8px",backgroundColor:"#fef2f2",color:"#dc2626",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx($t,{size:16}),"Delete"]})]})]})}),(g||b||v)&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"24px"},children:[g&&r.jsx("div",{style:{backgroundColor:g.bg,border:`1px solid ${g.border}`,borderRadius:"12px",padding:"20px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(g.icon,{size:24,color:g.color}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"4px"},children:"MOT"}),r.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:g.color},children:g.label}),r.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"2px"},children:d(n.motExpiryDate)})]})]})}),b&&r.jsx("div",{style:{backgroundColor:b.bg,border:`1px solid ${b.border}`,borderRadius:"12px",padding:"20px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(b.icon,{size:24,color:b.color}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"4px"},children:"Insurance"}),r.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:b.color},children:b.label}),r.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"2px"},children:d(n.insuranceRenewalDate)})]})]})}),v&&r.jsx("div",{style:{backgroundColor:v.bg,border:`1px solid ${v.border}`,borderRadius:"12px",padding:"20px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(v.icon,{size:24,color:v.color}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"4px"},children:"Road Tax"}),r.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:v.color},children:v.label}),r.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"2px"},children:d(n.roadTaxExpiryDate)})]})]})})]}),r.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"32px",borderRadius:"16px",border:"1px solid #f1f5f9",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",marginBottom:"24px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Vehicle Details"}),r.jsxs("div",{style:{display:"grid",gap:"24px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Record Type"}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,textTransform:"capitalize",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:((p=n.recordType)==null?void 0:p.replace("-"," "))||"Not specified"})]}),n.purchaseDate&&r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx(Nn,{size:14,style:{display:"inline",marginRight:"4px"}}),"Purchase Date"]}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:d(n.purchaseDate)})]}),n.financeProvider&&r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Finance Provider"}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:n.financeProvider})]}),n.financeMonthlyPayment!==void 0&&r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Monthly Finance Payment"}),r.jsxs("p",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["",n.financeMonthlyPayment.toFixed(2)]})]}),n.notes&&r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#64748b",marginBottom:"6px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Notes"}),r.jsx("p",{style:{fontSize:"15px",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif",whiteSpace:"pre-wrap"},children:n.notes})]})]})]}),a&&n&&r.jsx(y2,{isOpen:a,onClose:()=>c(!1),record:n}),o&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"32px",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[r.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",marginBottom:"12px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Delete Vehicle Record?"}),r.jsxs("p",{style:{fontSize:"15px",color:"#64748b",marginBottom:"24px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:['Are you sure you want to delete "',n.name,'"? This action cannot be undone.']}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>l(!1),style:{padding:"10px 20px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#ffffff",color:"#64748b",fontSize:"14px",fontWeight:"500",cursor:"pointer",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Cancel"}),r.jsx("button",{onClick:u,disabled:i.isPending,style:{padding:"10px 20px",border:"none",borderRadius:"8px",backgroundColor:"#dc2626",color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:i.isPending?"not-allowed":"pointer",opacity:i.isPending?.6:1,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:i.isPending?"Deleting...":"Delete"})]})]})})]})},v2={"ni-number":"National Insurance",tax:"Tax",passport:"Passport","driving-licence":"Driving Licence","vehicle-tax":"Vehicle Tax","tv-licence":"TV Licence","other-licence":"Other Licence"},b2=({record:e})=>{const t=Me(),n=l=>{switch(l){case"Critical":return"bg-red-100 text-red-800";case"Important":return"bg-amber-100 text-amber-800";default:return"bg-slate-100 text-slate-600"}},s=l=>l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):null,i=l=>{if(!l)return!1;const a=new Date(l),c=new Date,u=Math.ceil((a.getTime()-c.getTime())/(1e3*60*60*24));return u<=30&&u>=0},o=l=>l?new Date(l)<new Date:!1;return r.jsxs("div",{onClick:()=>t(`/government/${e._id}`),className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-slate-100",children:r.jsx(Ct,{className:"w-5 h-5 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:e.name}),r.jsx("p",{className:"text-sm text-slate-600",children:v2[e.recordType]||e.recordType})]})]}),e.priority!=="Standard"&&r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n(e.priority)}`,children:e.priority})]}),r.jsxs("div",{className:"space-y-2",children:[e.referenceNumber&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Reference: "}),r.jsx("span",{className:"text-slate-900 font-medium",children:e.referenceNumber})]}),e.expiryDate&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Expiry: "}),r.jsx("span",{className:`font-medium ${o(e.expiryDate)?"text-red-700":i(e.expiryDate)?"text-amber-700":"text-slate-900"}`,children:s(e.expiryDate)}),o(e.expiryDate)&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded-full",children:"Expired"}),!o(e.expiryDate)&&i(e.expiryDate)&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full",children:"Expiring Soon"})]}),e.niNumber&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"NI Number: "}),r.jsx("span",{className:"text-slate-900 font-medium",children:e.niNumber})]})]})]})};var io=e=>e.type==="checkbox",Cr=e=>e instanceof Date,ot=e=>e==null;const ox=e=>typeof e=="object";var Ae=e=>!ot(e)&&!Array.isArray(e)&&ox(e)&&!Cr(e),lx=e=>Ae(e)&&e.target?io(e.target)?e.target.checked:e.target.value:e,j2=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ax=(e,t)=>e.has(j2(t)),S2=e=>{const t=e.constructor&&e.constructor.prototype;return Ae(t)&&t.hasOwnProperty("isPrototypeOf")},Vd=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function We(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Vd&&(e instanceof Blob||s))&&(n||Ae(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!S2(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=We(e[i]));else return e;return t}var Ul=e=>/^\w*$/.test(e),ze=e=>e===void 0,Hd=e=>Array.isArray(e)?e.filter(Boolean):[],qd=e=>Hd(e.replace(/["|']|\]/g,"").split(/\.|\[/)),U=(e,t,n)=>{if(!t||!Ae(e))return n;const s=(Ul(t)?[t]:qd(t)).reduce((i,o)=>ot(i)?i:i[o],e);return ze(s)||s===e?ze(e[t])?n:e[t]:s},jt=e=>typeof e=="boolean",ye=(e,t,n)=>{let s=-1;const i=Ul(t)?[t]:qd(t),o=i.length,l=o-1;for(;++s<o;){const a=i[s];let c=n;if(s!==l){const u=e[a];c=Ae(u)||Array.isArray(u)?u:isNaN(+i[s+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=c,e=e[a]}};const bl={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Gt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},cn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},cx=se.createContext(null);cx.displayName="HookFormContext";const Qd=()=>se.useContext(cx);var dx=(e,t,n,s=!0)=>{const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const l=o;return t._proxyFormState[l]!==Gt.all&&(t._proxyFormState[l]=!s||Gt.all),n&&(n[l]=!0),e[l]}});return i};const Kd=typeof window<"u"?se.useLayoutEffect:se.useEffect;function w2(e){const t=Qd(),{control:n=t.control,disabled:s,name:i,exact:o}=e||{},[l,a]=se.useState(n._formState),c=se.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Kd(()=>n._subscribe({name:i,formState:c.current,exact:o,callback:u=>{!s&&a({...n._formState,...u})}}),[i,s,o]),se.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),se.useMemo(()=>dx(l,n,c.current,!1),[l,n])}var St=e=>typeof e=="string",ux=(e,t,n,s,i)=>St(e)?(s&&t.watch.add(e),U(n,e,i)):Array.isArray(e)?e.map(o=>(s&&t.watch.add(o),U(n,o))):(s&&(t.watchAll=!0),n),_c=e=>ot(e)||!ox(e);function yn(e,t,n=new WeakSet){if(_c(e)||_c(t))return e===t;if(Cr(e)&&Cr(t))return e.getTime()===t.getTime();const s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of s){const l=e[o];if(!i.includes(o))return!1;if(o!=="ref"){const a=t[o];if(Cr(l)&&Cr(a)||Ae(l)&&Ae(a)||Array.isArray(l)&&Array.isArray(a)?!yn(l,a,n):l!==a)return!1}}return!0}function C2(e){const t=Qd(),{control:n=t.control,name:s,defaultValue:i,disabled:o,exact:l,compute:a}=e||{},c=se.useRef(i),u=se.useRef(a),d=se.useRef(void 0);u.current=a;const f=se.useMemo(()=>n._getWatch(s,c.current),[n,s]),[h,x]=se.useState(u.current?u.current(f):f);return Kd(()=>n._subscribe({name:s,formState:{values:!0},exact:l,callback:g=>{if(!o){const b=ux(s,n._names,g.values||n._formValues,!1,c.current);if(u.current){const v=u.current(b);yn(v,d.current)||(x(v),d.current=v)}else x(b)}}}),[n,o,s,l]),se.useEffect(()=>n._removeUnmounted()),h}function k2(e){const t=Qd(),{name:n,disabled:s,control:i=t.control,shouldUnregister:o,defaultValue:l}=e,a=ax(i._names.array,n),c=se.useMemo(()=>U(i._formValues,n,U(i._defaultValues,n,l)),[i,n,l]),u=C2({control:i,name:n,defaultValue:c,exact:!0}),d=w2({control:i,name:n,exact:!0}),f=se.useRef(e),h=se.useRef(void 0),x=se.useRef(i.register(n,{...e.rules,value:u,...jt(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const g=se.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!U(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!U(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!U(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!U(d.validatingFields,n)},error:{enumerable:!0,get:()=>U(d.errors,n)}}),[d,n]),b=se.useCallback(y=>x.current.onChange({target:{value:lx(y),name:n},type:bl.CHANGE}),[n]),v=se.useCallback(()=>x.current.onBlur({target:{value:U(i._formValues,n),name:n},type:bl.BLUR}),[n,i._formValues]),p=se.useCallback(y=>{const j=U(i._fields,n);j&&y&&(j._f.ref={focus:()=>y.focus&&y.focus(),select:()=>y.select&&y.select(),setCustomValidity:k=>y.setCustomValidity(k),reportValidity:()=>y.reportValidity()})},[i._fields,n]),m=se.useMemo(()=>({name:n,value:u,...jt(s)||d.disabled?{disabled:d.disabled||s}:{},onChange:b,onBlur:v,ref:p}),[n,s,d.disabled,b,v,p,u]);return se.useEffect(()=>{const y=i._options.shouldUnregister||o,j=h.current;j&&j!==n&&!a&&i.unregister(j),i.register(n,{...f.current.rules,...jt(f.current.disabled)?{disabled:f.current.disabled}:{}});const k=(D,I)=>{const R=U(i._fields,D);R&&R._f&&(R._f.mount=I)};if(k(n,!0),y){const D=We(U(i._options.defaultValues,n,f.current.defaultValue));ye(i._defaultValues,n,D),ze(U(i._formValues,n))&&ye(i._formValues,n,D)}return!a&&i.register(n),h.current=n,()=>{(a?y&&!i._state.action:y)?i.unregister(n):k(n,!1)}},[n,i,a,o]),se.useEffect(()=>{i._setDisabledField({disabled:s,name:n})},[s,n,i]),se.useMemo(()=>({field:m,formState:d,fieldState:g}),[m,d,g])}const tt=e=>e.render(k2(e));var N2=(e,t,n,s,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:i||!0}}:{},wi=e=>Array.isArray(e)?e:[e],Af=()=>{let e=[];return{get observers(){return e},next:i=>{for(const o of e)o.next&&o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}};function fx(e,t){const n={};for(const s in e)if(e.hasOwnProperty(s)){const i=e[s],o=t[s];if(i&&Ae(i)&&o){const l=fx(i,o);Ae(l)&&(n[s]=l)}else e[s]&&(n[s]=o)}return n}var ht=e=>Ae(e)&&!Object.keys(e).length,Gd=e=>e.type==="file",Yt=e=>typeof e=="function",jl=e=>{if(!Vd)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},px=e=>e.type==="select-multiple",Yd=e=>e.type==="radio",E2=e=>Yd(e)||io(e),ba=e=>jl(e)&&e.isConnected;function T2(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=ze(e)?s++:e[t[s++]];return e}function I2(e){for(const t in e)if(e.hasOwnProperty(t)&&!ze(e[t]))return!1;return!0}function _e(e,t){const n=Array.isArray(t)?t:Ul(t)?[t]:qd(t),s=n.length===1?e:T2(e,n),i=n.length-1,o=n[i];return s&&delete s[o],i!==0&&(Ae(s)&&ht(s)||Array.isArray(s)&&I2(s))&&_e(e,n.slice(0,-1)),e}var R2=e=>{for(const t in e)if(Yt(e[t]))return!0;return!1};function hx(e){return Array.isArray(e)||Ae(e)&&!R2(e)}function Lc(e,t={}){for(const n in e)hx(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Lc(e[n],t[n])):ot(e[n])||(t[n]=!0);return t}function Jr(e,t,n){n||(n=Lc(t));for(const s in e)hx(e[s])?ze(t)||_c(n[s])?n[s]=Lc(e[s],Array.isArray(e[s])?[]:{}):Jr(e[s],ot(t)?{}:t[s],n[s]):n[s]=!yn(e[s],t[s]);return n}const Of={value:!1,isValid:!1},Wf={value:!0,isValid:!0};var mx=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ze(e[0].attributes.value)?ze(e[0].value)||e[0].value===""?Wf:{value:e[0].value,isValid:!0}:Wf:Of}return Of},xx=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>ze(e)?e:t?e===""?NaN:e&&+e:n&&St(e)?new Date(e):s?s(e):e;const Bf={isValid:!1,value:null};var yx=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,Bf):Bf;function $f(e){const t=e.ref;return Gd(t)?t.files:Yd(t)?yx(e.refs).value:px(t)?[...t.selectedOptions].map(({value:n})=>n):io(t)?mx(e.refs).value:xx(ze(t.value)?e.ref.value:t.value,e)}var F2=(e,t,n,s)=>{const i={};for(const o of e){const l=U(t,o);l&&ye(i,o,l._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:s}},Sl=e=>e instanceof RegExp,ri=e=>ze(e)?e:Sl(e)?e.source:Ae(e)?Sl(e.value)?e.value.source:e.value:e,Uf=e=>({isOnSubmit:!e||e===Gt.onSubmit,isOnBlur:e===Gt.onBlur,isOnChange:e===Gt.onChange,isOnAll:e===Gt.all,isOnTouch:e===Gt.onTouched});const Vf="AsyncFunction";var z2=e=>!!e&&!!e.validate&&!!(Yt(e.validate)&&e.validate.constructor.name===Vf||Ae(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Vf)),D2=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Hf=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Ci=(e,t,n,s)=>{for(const i of n||Object.keys(e)){const o=U(e,i);if(o){const{_f:l,...a}=o;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],i)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(Ci(a,t))break}else if(Ae(a)&&Ci(a,t))break}}};function qf(e,t,n){const s=U(e,n);if(s||Ul(n))return{error:s,name:n};const i=n.split(".");for(;i.length;){const o=i.join("."),l=U(t,o),a=U(e,o);if(l&&!Array.isArray(l)&&n!==o)return{name:n};if(a&&a.type)return{name:o,error:a};if(a&&a.root&&a.root.type)return{name:`${o}.root`,error:a.root};i.pop()}return{name:n}}var P2=(e,t,n,s)=>{n(e);const{name:i,...o}=e;return ht(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(l=>t[l]===(!s||Gt.all))},M2=(e,t,n)=>!e||!t||e===t||wi(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),_2=(e,t,n,s,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?s.isOnBlur:i.isOnBlur)?!e:(n?s.isOnChange:i.isOnChange)?e:!0,L2=(e,t)=>!Hd(U(e,t)).length&&_e(e,t),A2=(e,t,n)=>{const s=wi(U(e,n));return ye(s,"root",t[n]),ye(e,n,s),e};function Qf(e,t,n="validate"){if(St(e)||Array.isArray(e)&&e.every(St)||jt(e)&&!e)return{type:n,message:St(e)?e:"",ref:t}}var Yr=e=>Ae(e)&&!Sl(e)?e:{value:e,message:""},Kf=async(e,t,n,s,i,o)=>{const{ref:l,refs:a,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:x,validate:g,name:b,valueAsNumber:v,mount:p}=e._f,m=U(n,b);if(!p||t.has(b))return{};const y=a?a[0]:l,j=V=>{i&&y.reportValidity&&(y.setCustomValidity(jt(V)?"":V||""),y.reportValidity())},k={},D=Yd(l),I=io(l),R=D||I,_=(v||Gd(l))&&ze(l.value)&&ze(m)||jl(l)&&l.value===""||m===""||Array.isArray(m)&&!m.length,T=N2.bind(null,b,s,k),W=(V,P,Z,z=cn.maxLength,N=cn.minLength)=>{const ee=V?P:Z;k[b]={type:V?z:N,message:ee,ref:l,...T(V?z:N,ee)}};if(o?!Array.isArray(m)||!m.length:c&&(!R&&(_||ot(m))||jt(m)&&!m||I&&!mx(a).isValid||D&&!yx(a).isValid)){const{value:V,message:P}=St(c)?{value:!!c,message:c}:Yr(c);if(V&&(k[b]={type:cn.required,message:P,ref:y,...T(cn.required,P)},!s))return j(P),k}if(!_&&(!ot(f)||!ot(h))){let V,P;const Z=Yr(h),z=Yr(f);if(!ot(m)&&!isNaN(m)){const N=l.valueAsNumber||m&&+m;ot(Z.value)||(V=N>Z.value),ot(z.value)||(P=N<z.value)}else{const N=l.valueAsDate||new Date(m),ee=X=>new Date(new Date().toDateString()+" "+X),A=l.type=="time",K=l.type=="week";St(Z.value)&&m&&(V=A?ee(m)>ee(Z.value):K?m>Z.value:N>new Date(Z.value)),St(z.value)&&m&&(P=A?ee(m)<ee(z.value):K?m<z.value:N<new Date(z.value))}if((V||P)&&(W(!!V,Z.message,z.message,cn.max,cn.min),!s))return j(k[b].message),k}if((u||d)&&!_&&(St(m)||o&&Array.isArray(m))){const V=Yr(u),P=Yr(d),Z=!ot(V.value)&&m.length>+V.value,z=!ot(P.value)&&m.length<+P.value;if((Z||z)&&(W(Z,V.message,P.message),!s))return j(k[b].message),k}if(x&&!_&&St(m)){const{value:V,message:P}=Yr(x);if(Sl(V)&&!m.match(V)&&(k[b]={type:cn.pattern,message:P,ref:l,...T(cn.pattern,P)},!s))return j(P),k}if(g){if(Yt(g)){const V=await g(m,n),P=Qf(V,y);if(P&&(k[b]={...P,...T(cn.validate,P.message)},!s))return j(P.message),k}else if(Ae(g)){let V={};for(const P in g){if(!ht(V)&&!s)break;const Z=Qf(await g[P](m,n),y,P);Z&&(V={...Z,...T(P,Z.message)},j(Z.message),s&&(k[b]=V))}if(!ht(V)&&(k[b]={ref:y,...V},!s))return k}}return j(!0),k};const O2={mode:Gt.onSubmit,reValidateMode:Gt.onChange,shouldFocusError:!0};function W2(e={}){let t={...O2,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Yt(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},i=Ae(t.defaultValues)||Ae(t.values)?We(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:We(i),l={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:Af(),state:Af()},x=t.criteriaMode===Gt.all,g=C=>E=>{clearTimeout(u),u=setTimeout(C,E)},b=async C=>{if(!t.disabled&&(d.isValid||f.isValid||C)){const E=t.resolver?ht((await I()).errors):await _(s,!0);E!==n.isValid&&h.state.next({isValid:E})}},v=(C,E)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((C||Array.from(a.mount)).forEach(F=>{F&&(E?ye(n.validatingFields,F,E):_e(n.validatingFields,F))}),h.state.next({validatingFields:n.validatingFields,isValidating:!ht(n.validatingFields)}))},p=(C,E=[],F,H,B=!0,O=!0)=>{if(H&&F&&!t.disabled){if(l.action=!0,O&&Array.isArray(U(s,C))){const J=F(U(s,C),H.argA,H.argB);B&&ye(s,C,J)}if(O&&Array.isArray(U(n.errors,C))){const J=F(U(n.errors,C),H.argA,H.argB);B&&ye(n.errors,C,J),L2(n.errors,C)}if((d.touchedFields||f.touchedFields)&&O&&Array.isArray(U(n.touchedFields,C))){const J=F(U(n.touchedFields,C),H.argA,H.argB);B&&ye(n.touchedFields,C,J)}(d.dirtyFields||f.dirtyFields)&&(n.dirtyFields=Jr(i,o)),h.state.next({name:C,isDirty:W(C,E),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ye(o,C,E)},m=(C,E)=>{ye(n.errors,C,E),h.state.next({errors:n.errors})},y=C=>{n.errors=C,h.state.next({errors:n.errors,isValid:!1})},j=(C,E,F,H)=>{const B=U(s,C);if(B){const O=U(o,C,ze(F)?U(i,C):F);ze(O)||H&&H.defaultChecked||E?ye(o,C,E?O:$f(B._f)):Z(C,O),l.mount&&b()}},k=(C,E,F,H,B)=>{let O=!1,J=!1;const pe={name:C};if(!t.disabled){if(!F||H){(d.isDirty||f.isDirty)&&(J=n.isDirty,n.isDirty=pe.isDirty=W(),O=J!==pe.isDirty);const xe=yn(U(i,C),E);J=!!U(n.dirtyFields,C),xe?_e(n.dirtyFields,C):ye(n.dirtyFields,C,!0),pe.dirtyFields=n.dirtyFields,O=O||(d.dirtyFields||f.dirtyFields)&&J!==!xe}if(F){const xe=U(n.touchedFields,C);xe||(ye(n.touchedFields,C,F),pe.touchedFields=n.touchedFields,O=O||(d.touchedFields||f.touchedFields)&&xe!==F)}O&&B&&h.state.next(pe)}return O?pe:{}},D=(C,E,F,H)=>{const B=U(n.errors,C),O=(d.isValid||f.isValid)&&jt(E)&&n.isValid!==E;if(t.delayError&&F?(c=g(()=>m(C,F)),c(t.delayError)):(clearTimeout(u),c=null,F?ye(n.errors,C,F):_e(n.errors,C)),(F?!yn(B,F):B)||!ht(H)||O){const J={...H,...O&&jt(E)?{isValid:E}:{},errors:n.errors,name:C};n={...n,...J},h.state.next(J)}},I=async C=>{v(C,!0);const E=await t.resolver(o,t.context,F2(C||a.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return v(C),E},R=async C=>{const{errors:E}=await I(C);if(C)for(const F of C){const H=U(E,F);H?ye(n.errors,F,H):_e(n.errors,F)}else n.errors=E;return E},_=async(C,E,F={valid:!0})=>{for(const H in C){const B=C[H];if(B){const{_f:O,...J}=B;if(O){const pe=a.array.has(O.name),xe=B._f&&z2(B._f);xe&&d.validatingFields&&v([O.name],!0);const Ft=await Kf(B,a.disabled,o,x,t.shouldUseNativeValidation&&!E,pe);if(xe&&d.validatingFields&&v([O.name]),Ft[O.name]&&(F.valid=!1,E))break;!E&&(U(Ft,O.name)?pe?A2(n.errors,Ft,O.name):ye(n.errors,O.name,Ft[O.name]):_e(n.errors,O.name))}!ht(J)&&await _(J,E,F)}}return F.valid},T=()=>{for(const C of a.unMount){const E=U(s,C);E&&(E._f.refs?E._f.refs.every(F=>!ba(F)):!ba(E._f.ref))&&L(C)}a.unMount=new Set},W=(C,E)=>!t.disabled&&(C&&E&&ye(o,C,E),!yn(X(),i)),V=(C,E,F)=>ux(C,a,{...l.mount?o:ze(E)?i:St(C)?{[C]:E}:E},F,E),P=C=>Hd(U(l.mount?o:i,C,t.shouldUnregister?U(i,C,[]):[])),Z=(C,E,F={})=>{const H=U(s,C);let B=E;if(H){const O=H._f;O&&(!O.disabled&&ye(o,C,xx(E,O)),B=jl(O.ref)&&ot(E)?"":E,px(O.ref)?[...O.ref.options].forEach(J=>J.selected=B.includes(J.value)):O.refs?io(O.ref)?O.refs.forEach(J=>{(!J.defaultChecked||!J.disabled)&&(Array.isArray(B)?J.checked=!!B.find(pe=>pe===J.value):J.checked=B===J.value||!!B)}):O.refs.forEach(J=>J.checked=J.value===B):Gd(O.ref)?O.ref.value="":(O.ref.value=B,O.ref.type||h.state.next({name:C,values:We(o)})))}(F.shouldDirty||F.shouldTouch)&&k(C,B,F.shouldTouch,F.shouldDirty,!0),F.shouldValidate&&K(C)},z=(C,E,F)=>{for(const H in E){if(!E.hasOwnProperty(H))return;const B=E[H],O=C+"."+H,J=U(s,O);(a.array.has(C)||Ae(B)||J&&!J._f)&&!Cr(B)?z(O,B,F):Z(O,B,F)}},N=(C,E,F={})=>{const H=U(s,C),B=a.array.has(C),O=We(E);ye(o,C,O),B?(h.array.next({name:C,values:We(o)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&F.shouldDirty&&h.state.next({name:C,dirtyFields:Jr(i,o),isDirty:W(C,O)})):H&&!H._f&&!ot(O)?z(C,O,F):Z(C,O,F),Hf(C,a)&&h.state.next({...n,name:C}),h.state.next({name:l.mount?C:void 0,values:We(o)})},ee=async C=>{l.mount=!0;const E=C.target;let F=E.name,H=!0;const B=U(s,F),O=xe=>{H=Number.isNaN(xe)||Cr(xe)&&isNaN(xe.getTime())||yn(xe,U(o,F,xe))},J=Uf(t.mode),pe=Uf(t.reValidateMode);if(B){let xe,Ft;const co=E.type?$f(B._f):lx(C),Fn=C.type===bl.BLUR||C.type===bl.FOCUS_OUT,zx=!D2(B._f)&&!t.resolver&&!U(n.errors,F)&&!B._f.deps||_2(Fn,U(n.touchedFields,F),n.isSubmitted,pe,J),Vl=Hf(F,a,Fn);ye(o,F,co),Fn?(!E||!E.readOnly)&&(B._f.onBlur&&B._f.onBlur(C),c&&c(0)):B._f.onChange&&B._f.onChange(C);const Hl=k(F,co,Fn),Dx=!ht(Hl)||Vl;if(!Fn&&h.state.next({name:F,type:C.type,values:We(o)}),zx)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Fn&&b():Fn||b()),Dx&&h.state.next({name:F,...Vl?{}:Hl});if(!Fn&&Vl&&h.state.next({...n}),t.resolver){const{errors:su}=await I([F]);if(O(co),H){const Px=qf(n.errors,s,F),iu=qf(su,s,Px.name||F);xe=iu.error,F=iu.name,Ft=ht(su)}}else v([F],!0),xe=(await Kf(B,a.disabled,o,x,t.shouldUseNativeValidation))[F],v([F]),O(co),H&&(xe?Ft=!1:(d.isValid||f.isValid)&&(Ft=await _(s,!0)));H&&(B._f.deps&&(!Array.isArray(B._f.deps)||B._f.deps.length>0)&&K(B._f.deps),D(F,Ft,xe,Hl))}},A=(C,E)=>{if(U(n.errors,E)&&C.focus)return C.focus(),1},K=async(C,E={})=>{let F,H;const B=wi(C);if(t.resolver){const O=await R(ze(C)?C:B);F=ht(O),H=C?!B.some(J=>U(O,J)):F}else C?(H=(await Promise.all(B.map(async O=>{const J=U(s,O);return await _(J&&J._f?{[O]:J}:J)}))).every(Boolean),!(!H&&!n.isValid)&&b()):H=F=await _(s);return h.state.next({...!St(C)||(d.isValid||f.isValid)&&F!==n.isValid?{}:{name:C},...t.resolver||!C?{isValid:F}:{},errors:n.errors}),E.shouldFocus&&!H&&Ci(s,A,C?B:a.mount),H},X=(C,E)=>{let F={...l.mount?o:i};return E&&(F=fx(E.dirtyFields?n.dirtyFields:n.touchedFields,F)),ze(C)?F:St(C)?U(F,C):C.map(H=>U(F,H))},ae=(C,E)=>({invalid:!!U((E||n).errors,C),isDirty:!!U((E||n).dirtyFields,C),error:U((E||n).errors,C),isValidating:!!U(n.validatingFields,C),isTouched:!!U((E||n).touchedFields,C)}),ie=C=>{C&&wi(C).forEach(E=>_e(n.errors,E)),h.state.next({errors:C?n.errors:{}})},Fe=(C,E,F)=>{const H=(U(s,C,{_f:{}})._f||{}).ref,B=U(n.errors,C)||{},{ref:O,message:J,type:pe,...xe}=B;ye(n.errors,C,{...xe,...E,ref:H}),h.state.next({name:C,errors:n.errors,isValid:!1}),F&&F.shouldFocus&&H&&H.focus&&H.focus()},Y=(C,E)=>Yt(C)?h.state.subscribe({next:F=>"values"in F&&C(V(void 0,E),F)}):V(C,E,!0),me=C=>h.state.subscribe({next:E=>{M2(C.name,E.name,C.exact)&&P2(E,C.formState||d,Fx,C.reRenderRoot)&&C.callback({values:{...o},...n,...E,defaultValues:i})}}).unsubscribe,Oe=C=>(l.mount=!0,f={...f,...C.formState},me({...C,formState:f})),L=(C,E={})=>{for(const F of C?wi(C):a.mount)a.mount.delete(F),a.array.delete(F),E.keepValue||(_e(s,F),_e(o,F)),!E.keepError&&_e(n.errors,F),!E.keepDirty&&_e(n.dirtyFields,F),!E.keepTouched&&_e(n.touchedFields,F),!E.keepIsValidating&&_e(n.validatingFields,F),!t.shouldUnregister&&!E.keepDefaultValue&&_e(i,F);h.state.next({values:We(o)}),h.state.next({...n,...E.keepDirty?{isDirty:W()}:{}}),!E.keepIsValid&&b()},de=({disabled:C,name:E})=>{(jt(C)&&l.mount||C||a.disabled.has(E))&&(C?a.disabled.add(E):a.disabled.delete(E))},te=(C,E={})=>{let F=U(s,C);const H=jt(E.disabled)||jt(t.disabled);return ye(s,C,{...F||{},_f:{...F&&F._f?F._f:{ref:{name:C}},name:C,mount:!0,...E}}),a.mount.add(C),F?de({disabled:jt(E.disabled)?E.disabled:t.disabled,name:C}):j(C,!0,E.value),{...H?{disabled:E.disabled||t.disabled}:{},...t.progressive?{required:!!E.required,min:ri(E.min),max:ri(E.max),minLength:ri(E.minLength),maxLength:ri(E.maxLength),pattern:ri(E.pattern)}:{},name:C,onChange:ee,onBlur:ee,ref:B=>{if(B){te(C,E),F=U(s,C);const O=ze(B.value)&&B.querySelectorAll&&B.querySelectorAll("input,select,textarea")[0]||B,J=E2(O),pe=F._f.refs||[];if(J?pe.find(xe=>xe===O):O===F._f.ref)return;ye(s,C,{_f:{...F._f,...J?{refs:[...pe.filter(ba),O,...Array.isArray(U(i,C))?[{}]:[]],ref:{type:O.type,name:C}}:{ref:O}}}),j(C,!1,void 0,O)}else F=U(s,C,{}),F._f&&(F._f.mount=!1),(t.shouldUnregister||E.shouldUnregister)&&!(ax(a.array,C)&&l.action)&&a.unMount.add(C)}}},Rt=()=>t.shouldFocusError&&Ci(s,A,a.mount),Tx=C=>{jt(C)&&(h.state.next({disabled:C}),Ci(s,(E,F)=>{const H=U(s,F);H&&(E.disabled=H._f.disabled||C,Array.isArray(H._f.refs)&&H._f.refs.forEach(B=>{B.disabled=H._f.disabled||C}))},0,!1))},eu=(C,E)=>async F=>{let H;F&&(F.preventDefault&&F.preventDefault(),F.persist&&F.persist());let B=We(o);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:O,values:J}=await I();n.errors=O,B=We(J)}else await _(s);if(a.disabled.size)for(const O of a.disabled)_e(B,O);if(_e(n.errors,"root"),ht(n.errors)){h.state.next({errors:{}});try{await C(B,F)}catch(O){H=O}}else E&&await E({...n.errors},F),Rt(),setTimeout(Rt);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ht(n.errors)&&!H,submitCount:n.submitCount+1,errors:n.errors}),H)throw H},Ix=(C,E={})=>{U(s,C)&&(ze(E.defaultValue)?N(C,We(U(i,C))):(N(C,E.defaultValue),ye(i,C,We(E.defaultValue))),E.keepTouched||_e(n.touchedFields,C),E.keepDirty||(_e(n.dirtyFields,C),n.isDirty=E.defaultValue?W(C,We(U(i,C))):W()),E.keepError||(_e(n.errors,C),d.isValid&&b()),h.state.next({...n}))},tu=(C,E={})=>{const F=C?We(C):i,H=We(F),B=ht(C),O=B?i:H;if(E.keepDefaultValues||(i=F),!E.keepValues){if(E.keepDirtyValues){const J=new Set([...a.mount,...Object.keys(Jr(i,o))]);for(const pe of Array.from(J))U(n.dirtyFields,pe)?ye(O,pe,U(o,pe)):N(pe,U(O,pe))}else{if(Vd&&ze(C))for(const J of a.mount){const pe=U(s,J);if(pe&&pe._f){const xe=Array.isArray(pe._f.refs)?pe._f.refs[0]:pe._f.ref;if(jl(xe)){const Ft=xe.closest("form");if(Ft){Ft.reset();break}}}}if(E.keepFieldsRef)for(const J of a.mount)N(J,U(O,J));else s={}}o=t.shouldUnregister?E.keepDefaultValues?We(i):{}:We(O),h.array.next({values:{...O}}),h.state.next({values:{...O}})}a={mount:E.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!d.isValid||!!E.keepIsValid||!!E.keepDirtyValues,l.watch=!!t.shouldUnregister,h.state.next({submitCount:E.keepSubmitCount?n.submitCount:0,isDirty:B?!1:E.keepDirty?n.isDirty:!!(E.keepDefaultValues&&!yn(C,i)),isSubmitted:E.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:B?{}:E.keepDirtyValues?E.keepDefaultValues&&o?Jr(i,o):n.dirtyFields:E.keepDefaultValues&&C?Jr(i,C):E.keepDirty?n.dirtyFields:{},touchedFields:E.keepTouched?n.touchedFields:{},errors:E.keepErrors?n.errors:{},isSubmitSuccessful:E.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},nu=(C,E)=>tu(Yt(C)?C(o):C,E),Rx=(C,E={})=>{const F=U(s,C),H=F&&F._f;if(H){const B=H.refs?H.refs[0]:H.ref;B.focus&&(B.focus(),E.shouldSelect&&Yt(B.select)&&B.select())}},Fx=C=>{n={...n,...C}},ru={control:{register:te,unregister:L,getFieldState:ae,handleSubmit:eu,setError:Fe,_subscribe:me,_runSchema:I,_focusError:Rt,_getWatch:V,_getDirty:W,_setValid:b,_setFieldArray:p,_setDisabledField:de,_setErrors:y,_getFieldArray:P,_reset:tu,_resetDefaultValues:()=>Yt(t.defaultValues)&&t.defaultValues().then(C=>{nu(C,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:Tx,_subjects:h,_proxyFormState:d,get _fields(){return s},get _formValues(){return o},get _state(){return l},set _state(C){l=C},get _defaultValues(){return i},get _names(){return a},set _names(C){a=C},get _formState(){return n},get _options(){return t},set _options(C){t={...t,...C}}},subscribe:Oe,trigger:K,register:te,handleSubmit:eu,watch:Y,setValue:N,getValues:X,reset:nu,resetField:Ix,clearErrors:ie,unregister:L,setError:Fe,setFocus:Rx,getFieldState:ae};return{...ru,formControl:ru}}function qs(e={}){const t=se.useRef(void 0),n=se.useRef(void 0),[s,i]=se.useState({isDirty:!1,isValidating:!1,isLoading:Yt(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Yt(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Yt(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...a}=W2(e);t.current={...a,formState:s}}const o=t.current.control;return o._options=e,Kd(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>i({...o._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),o._formState.isReady=!0,l},[o]),se.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),se.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),se.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),se.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),se.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==s.isDirty&&o._subjects.state.next({isDirty:l})}},[o,s.isDirty]),se.useEffect(()=>{e.values&&!yn(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=e.values,i(l=>({...l}))):o._resetDefaultValues()},[o,e.values]),se.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=dx(s,o),t.current}const B2=()=>Ye({queryKey:["government-records"],queryFn:Bb}),$2=e=>Ye({queryKey:["government-record",e],queryFn:()=>$b(e),enabled:!!e}),U2=()=>{const e=be();return Te({mutationFn:Ub,onSuccess:()=>{e.invalidateQueries({queryKey:["government-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},V2=()=>{const e=be();return Te({mutationFn:({recordId:t,data:n})=>Vb(t,n),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["government-records"]}),e.invalidateQueries({queryKey:["government-record",n.recordId]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},H2=()=>{const e=be();return Te({mutationFn:Hb,onSuccess:()=>{e.invalidateQueries({queryKey:["government-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},gx=({onSuccess:e,onCancel:t,initialData:n})=>{const{recordTypes:s,loading:i}=Hs("Government"),{register:o,handleSubmit:l,watch:a,formState:{errors:c}}=qs({defaultValues:n||{priority:"Standard"}}),[u,d]=S.useState(""),[f,h]=S.useState(""),x=U2(),g=V2(),b=!!(n!=null&&n._id);a("niNumber");const v=y=>y?d2(y)?(h(""),!0):(h("Invalid NI number format"),!1):(h(""),!0),p=async y=>{if(d(""),!(y.niNumber&&!v(y.niNumber)))try{b?await g.mutateAsync({recordId:n._id,data:y}):await x.mutateAsync(y),e()}catch(j){d(j.message||"Failed to save government record")}},m=x.isPending||g.isPending;return r.jsxs("form",{onSubmit:l(p),className:"space-y-4",children:[u&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:u}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Record Name *"}),r.jsx("input",{...o("name",{required:"Record name is required"}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"e.g., Current Passport"}),c.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name.message})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Record Type *"}),r.jsxs("select",{...o("recordType",{required:"Record type is required"}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",disabled:i,children:[r.jsx("option",{value:"",children:"Select type..."}),s.map(y=>r.jsx("option",{value:y.name,children:y.name},y._id))]}),c.recordType&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.recordType.message})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Reference Number"}),r.jsx("input",{...o("referenceNumber"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Document or reference number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"National Insurance Number"}),r.jsx("input",{...o("niNumber"),onBlur:y=>v(y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"AB 12 34 56 C"}),f&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Issue Date"}),r.jsx("input",{type:"date",...o("issueDate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Expiry Date"}),r.jsx("input",{type:"date",...o("expiryDate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Renewal Date"}),r.jsx("input",{type:"date",...o("renewalDate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone"}),r.jsx("input",{type:"tel",...o("contactPhone"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"01234 567890"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email"}),r.jsx("input",{type:"email",...o("contactEmail"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"contact@gov.uk"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),r.jsxs("select",{...o("priority"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",children:[r.jsx("option",{value:"Critical",children:"Critical"}),r.jsx("option",{value:"Important",children:"Important"}),r.jsx("option",{value:"Standard",children:"Standard"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),r.jsx("textarea",{...o("notes"),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Additional information..."})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-700 hover:text-slate-900",disabled:m,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Saving...":b?"Update":"Create"})]})]})},qr=({isOpen:e,onClose:t,title:n,children:s})=>(S.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:n}),r.jsx("button",{onClick:t,className:"p-1 text-slate-400 hover:text-slate-600 rounded-lg transition-colors",children:r.jsx(Et,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-6",children:s})]})]}):null),q2=()=>{const[e,t]=S.useState(!1),{data:n,isLoading:s}=B2();return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("header",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx(Ct,{className:"w-8 h-8 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-semibold text-slate-900 mb-2",children:"Government"}),r.jsx("p",{className:"text-slate-600",children:"Manage NI, tax, passport, licences"})]})]}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[r.jsx(ct,{className:"w-5 h-5"}),"Add Record"]})]}),s?r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading records..."}):(n==null?void 0:n.length)===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600 mb-4",children:"No government records yet. Add your first record to get started."}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 mx-auto px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[r.jsx(ct,{className:"w-5 h-5"}),"Add First Record"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n==null?void 0:n.map(i=>r.jsx(b2,{record:i},i._id))}),r.jsx(qr,{isOpen:e,onClose:()=>t(!1),title:"Add Government Record",children:r.jsx(gx,{onSuccess:()=>t(!1),onCancel:()=>t(!1)})})]})},Q2={"ni-number":"National Insurance",tax:"Tax",passport:"Passport","driving-licence":"Driving Licence","vehicle-tax":"Vehicle Tax","tv-licence":"TV Licence","other-licence":"Other Licence"},K2=({record:e,onEdit:t,onDelete:n})=>{const[s,i]=S.useState(!1),o=d=>d?new Date(d).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}):null,l=d=>{switch(d){case"Critical":return"bg-red-100 text-red-800";case"Important":return"bg-amber-100 text-amber-800";default:return"bg-slate-100 text-slate-600"}},a=d=>{if(!d)return!1;const f=new Date(d),h=new Date,x=Math.ceil((f.getTime()-h.getTime())/(1e3*60*60*24));return x<=30&&x>=0},c=d=>d?new Date(d)<new Date:!1,u=()=>{s?n():(i(!0),setTimeout(()=>i(!1),3e3))};return r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx(Ct,{className:"w-8 h-8 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:e.name}),r.jsx("p",{className:"text-slate-600 mt-1",children:Q2[e.recordType]||e.recordType})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:t,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(Vs,{className:"w-5 h-5"})}),r.jsx("button",{onClick:u,className:`p-2 rounded-lg transition-colors ${s?"bg-red-100 text-red-700 hover:bg-red-200":"text-slate-600 hover:text-red-700 hover:bg-red-50"}`,children:r.jsx($t,{className:"w-5 h-5"})})]})]}),e.priority!=="Standard"&&r.jsx("div",{className:"mb-6",children:r.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${l(e.priority)}`,children:e.priority})}),e.expiryDate&&r.jsxs("div",{className:"mb-6",children:[c(e.expiryDate)&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("p",{className:"text-red-800 font-medium",children:["This document expired on ",o(e.expiryDate)]})}),!c(e.expiryDate)&&a(e.expiryDate)&&r.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:r.jsxs("p",{className:"text-amber-800 font-medium",children:["This document expires soon on ",o(e.expiryDate)]})})]}),r.jsxs("div",{className:"space-y-6",children:[(e.referenceNumber||e.niNumber)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Document Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.referenceNumber&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Reference Number"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.referenceNumber})]}),e.niNumber&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"National Insurance Number"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.niNumber})]})]})]}),(e.issueDate||e.expiryDate||e.renewalDate)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Date Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.issueDate&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Issue Date"}),r.jsx("p",{className:"text-slate-900 font-medium",children:o(e.issueDate)})]}),e.expiryDate&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Expiry Date"}),r.jsx("p",{className:`font-medium ${c(e.expiryDate)?"text-red-700":a(e.expiryDate)?"text-amber-700":"text-slate-900"}`,children:o(e.expiryDate)})]}),e.renewalDate&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Renewal Date"}),r.jsx("p",{className:"text-slate-900 font-medium",children:o(e.renewalDate)})]})]})]}),(e.contactPhone||e.contactEmail)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.contactPhone&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Phone"}),r.jsx("p",{className:"text-slate-900",children:e.contactPhone})]}),e.contactEmail&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Email"}),r.jsx("p",{className:"text-slate-900",children:e.contactEmail})]})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Notes"}),r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:e.notes})]})]})]})},G2=()=>{const{recordId:e}=Bt(),t=Me(),[n,s]=S.useState(!1),{data:i,isLoading:o}=$2(e),l=H2(),a=async()=>{if(e)try{await l.mutateAsync(e),t("/government")}catch(c){console.error("Failed to delete record:",c)}};return o?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading..."})}):i?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("button",{onClick:()=>t("/government"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[r.jsx(no,{className:"w-5 h-5"}),"Back to Government"]}),r.jsx(K2,{record:i,onEdit:()=>s(!0),onDelete:a}),r.jsx(qr,{isOpen:n,onClose:()=>s(!1),title:"Edit Government Record",children:r.jsx(gx,{initialData:i,onSuccess:()=>s(!1),onCancel:()=>s(!1)})})]}):r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Record not found"})})},Y2={"life-insurance":"Life Insurance","income-protection":"Income Protection","critical-illness":"Critical Illness Cover",warranty:"Warranty","gap-insurance":"GAP Insurance"},J2=({record:e})=>{const t=Me(),n=o=>{switch(o){case"Critical":return"bg-red-100 text-red-800";case"Important":return"bg-amber-100 text-amber-800";default:return"bg-slate-100 text-slate-600"}},s=o=>o==null?null:new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(o),i=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):null;return r.jsxs("div",{onClick:()=>t(`/insurance/${e._id}`),className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-slate-100",children:r.jsx(cr,{className:"w-5 h-5 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:e.name}),r.jsx("p",{className:"text-sm text-slate-600",children:Y2[e.recordType]||e.recordType})]})]}),e.priority!=="Standard"&&r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n(e.priority)}`,children:e.priority})]}),r.jsxs("div",{className:"space-y-2",children:[e.provider&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Provider: "}),r.jsx("span",{className:"text-slate-900 font-medium",children:e.provider})]}),e.policyNumber&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Policy: "}),r.jsx("span",{className:"text-slate-900",children:e.policyNumber})]}),e.coverageAmount!==void 0&&e.coverageAmount!==null&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Coverage: "}),r.jsx("span",{className:"text-slate-900 font-semibold",children:s(e.coverageAmount)})]}),e.monthlyPremium!==void 0&&e.monthlyPremium!==null&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Premium: "}),r.jsxs("span",{className:"text-slate-900 font-semibold",children:[s(e.monthlyPremium),"/month"]})]}),e.renewalDate&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Renewal: "}),r.jsx("span",{className:"text-slate-900",children:i(e.renewalDate)})]})]})]})},X2=()=>Ye({queryKey:["insurance-records"],queryFn:qb}),Z2=e=>Ye({queryKey:["insurance-record",e],queryFn:()=>Qb(e),enabled:!!e}),ej=()=>{const e=be();return Te({mutationFn:Kb,onSuccess:()=>{e.invalidateQueries({queryKey:["insurance-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},tj=()=>{const e=be();return Te({mutationFn:({recordId:t,data:n})=>Gb(t,n),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["insurance-records"]}),e.invalidateQueries({queryKey:["insurance-record",n.recordId]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},nj=()=>{const e=be();return Te({mutationFn:Yb,onSuccess:()=>{e.invalidateQueries({queryKey:["insurance-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},vx=({onSuccess:e,onCancel:t,initialData:n})=>{const{recordTypes:s,loading:i}=Hs("Insurance"),{register:o,handleSubmit:l,formState:{errors:a}}=qs({defaultValues:n||{priority:"Standard"}}),[c,u]=S.useState(""),d=ej(),f=tj(),h=!!(n!=null&&n._id),x=async b=>{u("");try{h?await f.mutateAsync({recordId:n._id,data:b}):await d.mutateAsync(b),e()}catch(v){u(v.message||"Failed to save insurance record")}},g=d.isPending||f.isPending;return r.jsxs("form",{onSubmit:l(x),className:"space-y-4",children:[c&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:c}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Record Name *"}),r.jsx("input",{...o("name",{required:"Record name is required"}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"e.g., Life Insurance Policy"}),a.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name.message})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Record Type *"}),r.jsxs("select",{...o("recordType",{required:"Record type is required"}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",disabled:i,children:[r.jsx("option",{value:"",children:"Select type..."}),s.map(b=>r.jsx("option",{value:b.name,children:b.name},b._id))]}),a.recordType&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.recordType.message})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Provider"}),r.jsx("input",{...o("provider"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Insurance company"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Policy Number"}),r.jsx("input",{...o("policyNumber"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Policy reference"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Coverage Amount ()"}),r.jsx("input",{type:"number",step:"0.01",...o("coverageAmount"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Monthly Premium ()"}),r.jsx("input",{type:"number",step:"0.01",...o("monthlyPremium"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"0.00"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Date"}),r.jsx("input",{type:"date",...o("startDate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Renewal Date"}),r.jsx("input",{type:"date",...o("renewalDate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone"}),r.jsx("input",{type:"tel",...o("contactPhone"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"01234 567890"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email"}),r.jsx("input",{type:"email",...o("contactEmail"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"support@provider.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),r.jsxs("select",{...o("priority"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",children:[r.jsx("option",{value:"Critical",children:"Critical"}),r.jsx("option",{value:"Important",children:"Important"}),r.jsx("option",{value:"Standard",children:"Standard"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),r.jsx("textarea",{...o("notes"),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Additional information..."})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-700 hover:text-slate-900",disabled:g,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":h?"Update":"Create"})]})]})},rj=()=>{const[e,t]=S.useState(!1),{data:n,isLoading:s}=X2();return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("header",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx(cr,{className:"w-8 h-8 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-semibold text-slate-900 mb-2",children:"Insurance"}),r.jsx("p",{className:"text-slate-600",children:"Manage life, income protection, critical illness cover"})]})]}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[r.jsx(ct,{className:"w-5 h-5"}),"Add Record"]})]}),s?r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading records..."}):(n==null?void 0:n.length)===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600 mb-4",children:"No insurance records yet. Add your first record to get started."}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 mx-auto px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[r.jsx(ct,{className:"w-5 h-5"}),"Add First Record"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n==null?void 0:n.map(i=>r.jsx(J2,{record:i},i._id))}),r.jsx(qr,{isOpen:e,onClose:()=>t(!1),title:"Add Insurance Record",children:r.jsx(vx,{onSuccess:()=>t(!1),onCancel:()=>t(!1)})})]})},sj={"life-insurance":"Life Insurance","income-protection":"Income Protection","critical-illness":"Critical Illness Cover",warranty:"Warranty","gap-insurance":"GAP Insurance"},ij=({record:e,onEdit:t,onDelete:n})=>{const[s,i]=S.useState(!1),o=u=>u==null?null:new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:2}).format(u),l=u=>u?new Date(u).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}):null,a=u=>{switch(u){case"Critical":return"bg-red-100 text-red-800";case"Important":return"bg-amber-100 text-amber-800";default:return"bg-slate-100 text-slate-600"}},c=()=>{s?n():(i(!0),setTimeout(()=>i(!1),3e3))};return r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx(cr,{className:"w-8 h-8 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:e.name}),r.jsx("p",{className:"text-slate-600 mt-1",children:sj[e.recordType]||e.recordType})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:t,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(Vs,{className:"w-5 h-5"})}),r.jsx("button",{onClick:c,className:`p-2 rounded-lg transition-colors ${s?"bg-red-100 text-red-700 hover:bg-red-200":"text-slate-600 hover:text-red-700 hover:bg-red-50"}`,children:r.jsx($t,{className:"w-5 h-5"})})]})]}),e.priority!=="Standard"&&r.jsx("div",{className:"mb-6",children:r.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${a(e.priority)}`,children:e.priority})}),r.jsxs("div",{className:"space-y-6",children:[(e.provider||e.policyNumber)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Policy Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.provider&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Provider"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.provider})]}),e.policyNumber&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Policy Number"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.policyNumber})]})]})]}),(e.coverageAmount!==void 0&&e.coverageAmount!==null||e.monthlyPremium!==void 0&&e.monthlyPremium!==null)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Financial Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.coverageAmount!==void 0&&e.coverageAmount!==null&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Coverage Amount"}),r.jsx("p",{className:"text-slate-900 font-semibold text-lg",children:o(e.coverageAmount)})]}),e.monthlyPremium!==void 0&&e.monthlyPremium!==null&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Monthly Premium"}),r.jsx("p",{className:"text-slate-900 font-semibold text-lg",children:o(e.monthlyPremium)})]})]})]}),(e.startDate||e.renewalDate)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Important Dates"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.startDate&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Start Date"}),r.jsx("p",{className:"text-slate-900 font-medium",children:l(e.startDate)})]}),e.renewalDate&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Renewal Date"}),r.jsx("p",{className:"text-slate-900 font-medium",children:l(e.renewalDate)})]})]})]}),(e.contactPhone||e.contactEmail)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.contactPhone&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Phone"}),r.jsx("p",{className:"text-slate-900",children:e.contactPhone})]}),e.contactEmail&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Email"}),r.jsx("p",{className:"text-slate-900",children:e.contactEmail})]})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Notes"}),r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:e.notes})]})]})]})},oj=()=>{const{recordId:e}=Bt(),t=Me(),[n,s]=S.useState(!1),{data:i,isLoading:o}=Z2(e),l=nj(),a=async()=>{if(e)try{await l.mutateAsync(e),t("/insurance")}catch(c){console.error("Failed to delete record:",c)}};return o?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading..."})}):i?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("button",{onClick:()=>t("/insurance"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[r.jsx(no,{className:"w-5 h-5"}),"Back to Insurance"]}),r.jsx(ij,{record:i,onEdit:()=>s(!0),onDelete:a}),r.jsx(qr,{isOpen:n,onClose:()=>s(!1),title:"Edit Insurance Record",children:r.jsx(vx,{initialData:i,onSuccess:()=>s(!1),onCancel:()=>s(!1)})})]}):r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Record not found"})})},lj={will:"Will","power-of-attorney":"Power of Attorney",deed:"Deed",trust:"Trust","legal-agreement":"Legal Agreement"},aj=({record:e})=>{const t=Me(),n=i=>{switch(i){case"Critical":return"bg-red-100 text-red-800";case"Important":return"bg-amber-100 text-amber-800";default:return"bg-slate-100 text-slate-600"}},s=i=>i?new Date(i).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):null;return r.jsxs("div",{onClick:()=>t(`/legal/${e._id}`),className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-slate-100",children:r.jsx($l,{className:"w-5 h-5 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:e.name}),r.jsx("p",{className:"text-sm text-slate-600",children:lj[e.recordType]||e.recordType})]})]}),e.priority!=="Standard"&&r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n(e.priority)}`,children:e.priority})]}),r.jsxs("div",{className:"space-y-2",children:[e.solicitorName&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Solicitor: "}),r.jsx("span",{className:"text-slate-900 font-medium",children:e.solicitorName})]}),e.referenceNumber&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Reference: "}),r.jsx("span",{className:"text-slate-900",children:e.referenceNumber})]}),e.reviewDate&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Review Date: "}),r.jsx("span",{className:"text-slate-900",children:s(e.reviewDate)})]}),e.location&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Location: "}),r.jsx("span",{className:"text-slate-900",children:e.location})]})]})]})},cj=()=>Ye({queryKey:["legal-records"],queryFn:Jb}),dj=e=>Ye({queryKey:["legal-record",e],queryFn:()=>Xb(e),enabled:!!e}),uj=()=>{const e=be();return Te({mutationFn:Zb,onSuccess:()=>{e.invalidateQueries({queryKey:["legal-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},fj=()=>{const e=be();return Te({mutationFn:({recordId:t,data:n})=>e2(t,n),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["legal-records"]}),e.invalidateQueries({queryKey:["legal-record",n.recordId]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},pj=()=>{const e=be();return Te({mutationFn:t2,onSuccess:()=>{e.invalidateQueries({queryKey:["legal-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},bx=({onSuccess:e,onCancel:t,initialData:n})=>{const{recordTypes:s,loading:i}=useRecordTypes("Legal"),{register:o,handleSubmit:l,formState:{errors:a}}=qs({defaultValues:n||{priority:"Standard"}}),[c,u]=S.useState(""),d=uj(),f=fj(),h=!!(n!=null&&n._id),x=async b=>{u("");try{h?await f.mutateAsync({recordId:n._id,data:b}):await d.mutateAsync(b),e()}catch(v){u(v.message||"Failed to save legal record")}},g=d.isPending||f.isPending;return r.jsxs("form",{onSubmit:l(x),className:"space-y-4",children:[c&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:c}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Record Name *"}),r.jsx("input",{...o("name",{required:"Record name is required"}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"e.g., Last Will & Testament"}),a.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name.message})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Record Type *"}),r.jsxs("select",{...o("recordType",{required:"Record type is required"}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select type..."}),RECORD_TYPES.map(b=>r.jsx("option",{value:b.value,children:b.label},b.value))]}),a.recordType&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.recordType.message})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Document Type"}),r.jsx("input",{...o("documentType"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"e.g., Original, Copy, Digital"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Solicitor Name"}),r.jsx("input",{...o("solicitorName"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Solicitor or firm name"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Reference Number"}),r.jsx("input",{...o("referenceNumber"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Case or reference number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date Created"}),r.jsx("input",{type:"date",...o("dateCreated"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Review Date"}),r.jsx("input",{type:"date",...o("reviewDate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Physical Storage Location"}),r.jsx("input",{...o("location"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"e.g., Safe deposit box, Home safe"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone"}),r.jsx("input",{type:"tel",...o("contactPhone"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"01234 567890"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email"}),r.jsx("input",{type:"email",...o("contactEmail"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"solicitor@firm.co.uk"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),r.jsxs("select",{...o("priority"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",children:[r.jsx("option",{value:"Critical",children:"Critical"}),r.jsx("option",{value:"Important",children:"Important"}),r.jsx("option",{value:"Standard",children:"Standard"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),r.jsx("textarea",{...o("notes"),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Additional information..."})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-700 hover:text-slate-900",disabled:g,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":h?"Update":"Create"})]})]})},hj=()=>{const[e,t]=S.useState(!1),{data:n,isLoading:s}=cj();return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("header",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx($l,{className:"w-8 h-8 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-semibold text-slate-900 mb-2",children:"Legal"}),r.jsx("p",{className:"text-slate-600",children:"Manage wills, powers of attorney, deeds, trusts"})]})]}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[r.jsx(ct,{className:"w-5 h-5"}),"Add Record"]})]}),s?r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading records..."}):(n==null?void 0:n.length)===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600 mb-4",children:"No legal records yet. Add your first record to get started."}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 mx-auto px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[r.jsx(ct,{className:"w-5 h-5"}),"Add First Record"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n==null?void 0:n.map(i=>r.jsx(aj,{record:i},i._id))}),r.jsx(qr,{isOpen:e,onClose:()=>t(!1),title:"Add Legal Record",children:r.jsx(bx,{onSuccess:()=>t(!1),onCancel:()=>t(!1)})})]})},mj={will:"Will","power-of-attorney":"Power of Attorney",deed:"Deed",trust:"Trust","legal-agreement":"Legal Agreement"},xj=({record:e,onEdit:t,onDelete:n})=>{const[s,i]=S.useState(!1),o=c=>c?new Date(c).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}):null,l=c=>{switch(c){case"Critical":return"bg-red-100 text-red-800";case"Important":return"bg-amber-100 text-amber-800";default:return"bg-slate-100 text-slate-600"}},a=()=>{s?n():(i(!0),setTimeout(()=>i(!1),3e3))};return r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx($l,{className:"w-8 h-8 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:e.name}),r.jsx("p",{className:"text-slate-600 mt-1",children:mj[e.recordType]||e.recordType})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:t,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(Vs,{className:"w-5 h-5"})}),r.jsx("button",{onClick:a,className:`p-2 rounded-lg transition-colors ${s?"bg-red-100 text-red-700 hover:bg-red-200":"text-slate-600 hover:text-red-700 hover:bg-red-50"}`,children:r.jsx($t,{className:"w-5 h-5"})})]})]}),e.priority!=="Standard"&&r.jsx("div",{className:"mb-6",children:r.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${l(e.priority)}`,children:e.priority})}),r.jsxs("div",{className:"space-y-6",children:[(e.documentType||e.solicitorName||e.referenceNumber)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Document Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.documentType&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Document Type"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.documentType})]}),e.solicitorName&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Solicitor Name"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.solicitorName})]}),e.referenceNumber&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Reference Number"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.referenceNumber})]})]})]}),(e.dateCreated||e.reviewDate)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Important Dates"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.dateCreated&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Date Created"}),r.jsx("p",{className:"text-slate-900 font-medium",children:o(e.dateCreated)})]}),e.reviewDate&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Review Date"}),r.jsx("p",{className:"text-slate-900 font-medium",children:o(e.reviewDate)})]})]})]}),e.location&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Physical Storage"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Location"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.location})]})})]}),(e.contactPhone||e.contactEmail)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.contactPhone&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Phone"}),r.jsx("p",{className:"text-slate-900",children:e.contactPhone})]}),e.contactEmail&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Email"}),r.jsx("p",{className:"text-slate-900",children:e.contactEmail})]})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Notes"}),r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:e.notes})]})]})]})},yj=()=>{const{recordId:e}=Bt(),t=Me(),[n,s]=S.useState(!1),{data:i,isLoading:o}=dj(e),l=pj(),a=async()=>{if(e)try{await l.mutateAsync(e),t("/legal")}catch(c){console.error("Failed to delete record:",c)}};return o?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading..."})}):i?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("button",{onClick:()=>t("/legal"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[r.jsx(no,{className:"w-5 h-5"}),"Back to Legal"]}),r.jsx(xj,{record:i,onEdit:()=>s(!0),onDelete:a}),r.jsx(qr,{isOpen:n,onClose:()=>s(!1),title:"Edit Legal Record",children:r.jsx(bx,{initialData:i,onSuccess:()=>s(!1),onCancel:()=>s(!1)})})]}):r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Record not found"})})},gj={tradesperson:"Tradesperson",cleaner:"Cleaner",gardener:"Gardener","pest-control":"Pest Control","other-service":"Other Service"},vj=({record:e,onEdit:t,onDelete:n})=>{const[s,i]=S.useState(!1),o=u=>u==null?null:new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(u),l=u=>u?new Date(u).toLocaleDateString("en-GB"):null,a=u=>{switch(u){case"Critical":return"bg-red-100 text-red-800";case"Important":return"bg-amber-100 text-amber-800";default:return"bg-slate-100 text-slate-600"}},c=()=>{s?n():(i(!0),setTimeout(()=>i(!1),3e3))};return r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx(Rn,{className:"w-8 h-8 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:e.name}),r.jsx("p",{className:"text-slate-600 mt-1",children:gj[e.recordType]||e.recordType})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:t,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(Vs,{className:"w-5 h-5"})}),r.jsx("button",{onClick:c,className:`p-2 rounded-lg transition-colors ${s?"bg-red-100 text-red-700 hover:bg-red-200":"text-slate-600 hover:text-red-700 hover:bg-red-50"}`,children:r.jsx($t,{className:"w-5 h-5"})})]})]}),e.priority!=="Standard"&&r.jsx("div",{className:"mb-6",children:r.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${a(e.priority)}`,children:e.priority})}),r.jsxs("div",{className:"space-y-6",children:[(e.serviceProvider||e.serviceType)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Service Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.serviceProvider&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Service Provider"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.serviceProvider})]}),e.serviceType&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Service Type"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.serviceType})]})]})]}),e.hourlyRate!==void 0&&e.hourlyRate!==null&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Pricing"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Hourly Rate"}),r.jsxs("p",{className:"text-slate-900 font-semibold text-lg",children:[o(e.hourlyRate),"/hour"]})]})})]}),(e.lastServiceDate||e.nextServiceDate)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Service History"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.lastServiceDate&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Last Service Date"}),r.jsx("p",{className:"text-slate-900 font-medium",children:l(e.lastServiceDate)})]}),e.nextServiceDate&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Next Service Date"}),r.jsx("p",{className:"text-slate-900 font-medium",children:l(e.nextServiceDate)})]})]})]}),(e.contactName||e.contactPhone||e.contactEmail)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.contactName&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Contact Name"}),r.jsx("p",{className:"text-slate-900",children:e.contactName})]}),e.contactPhone&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Phone"}),r.jsx("p",{className:"text-slate-900",children:e.contactPhone})]}),e.contactEmail&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Email"}),r.jsx("p",{className:"text-slate-900",children:e.contactEmail})]})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Notes"}),r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:e.notes})]})]})]})},bj=e=>Ye({queryKey:["services-record",e],queryFn:()=>n2(e),enabled:!!e}),jj=()=>{const e=be();return Te({mutationFn:r2,onSuccess:()=>{e.invalidateQueries({queryKey:["services-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},Sj=()=>{const e=be();return Te({mutationFn:({recordId:t,data:n})=>s2(t,n),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["services-records"]}),e.invalidateQueries({queryKey:["services-record",n.recordId]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},wj=()=>{const e=be();return Te({mutationFn:i2,onSuccess:()=>{e.invalidateQueries({queryKey:["services-records"]}),e.invalidateQueries({queryKey:["domain-stats"]})}})},Cj=({onSuccess:e,onCancel:t,initialData:n})=>{const{recordTypes:s,loading:i}=Hs("Services"),{register:o,handleSubmit:l,formState:{errors:a}}=qs({defaultValues:n||{priority:"Standard"}}),[c,u]=S.useState(""),d=jj(),f=Sj(),h=!!(n!=null&&n._id),x=async b=>{u("");try{h?await f.mutateAsync({recordId:n._id,data:b}):await d.mutateAsync(b),e()}catch(v){u(v.message||"Failed to save services record")}},g=d.isPending||f.isPending;return r.jsxs("form",{onSubmit:l(x),className:"space-y-4",children:[c&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:c}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Record Name *"}),r.jsx("input",{...o("name",{required:"Record name is required"}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"e.g., Plumber - John Smith"}),a.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name.message})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Record Type *"}),r.jsxs("select",{...o("recordType",{required:"Record type is required"}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",disabled:i,children:[r.jsx("option",{value:"",children:"Select type..."}),s.map(b=>r.jsx("option",{value:b.name,children:b.name},b._id))]}),a.recordType&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.recordType.message})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Service Provider"}),r.jsx("input",{...o("serviceProvider"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Company name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Name"}),r.jsx("input",{...o("contactName"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Primary contact person"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Phone"}),r.jsx("input",{type:"tel",...o("contactPhone"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"01234 567890"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email"}),r.jsx("input",{type:"email",...o("contactEmail"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"contact@service.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hourly Rate ()"}),r.jsx("input",{type:"number",step:"0.01",...o("hourlyRate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"0.00"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Last Service Date"}),r.jsx("input",{type:"date",...o("lastServiceDate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Next Service Date"}),r.jsx("input",{type:"date",...o("nextServiceDate"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),r.jsxs("select",{...o("priority"),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",children:[r.jsx("option",{value:"Critical",children:"Critical"}),r.jsx("option",{value:"Important",children:"Important"}),r.jsx("option",{value:"Standard",children:"Standard"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),r.jsx("textarea",{...o("notes"),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"Additional information..."})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-700 hover:text-slate-900",disabled:g,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":h?"Update":"Create"})]})]})},kj=()=>{const{recordId:e}=Bt(),t=Me(),[n,s]=S.useState(!1),{data:i,isLoading:o}=bj(e),l=wj(),a=async()=>{if(e)try{await l.mutateAsync(e),t("/services")}catch(c){console.error("Failed to delete record:",c)}};return o?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading..."})}):i?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("button",{onClick:()=>t("/services"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[r.jsx(no,{className:"w-5 h-5"}),"Back to Services"]}),r.jsx(vj,{record:i,onEdit:()=>s(!0),onDelete:a}),r.jsx(qr,{isOpen:n,onClose:()=>s(!1),title:"Edit Service Record",children:r.jsx(Cj,{initialData:i,onSuccess:()=>s(!1),onCancel:()=>s(!1)})})]}):r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Record not found"})})},Nj=e=>{const t=new Date(e),n=new Date,s=t.getTime()-n.getTime(),i=Math.round(s/(1e3*60*60*24));if(i<0){const o=Math.abs(i);return o===0?"Today":o===1?"Yesterday":o<7?`${o} days ago`:o<14?"Last week":o<30?`${Math.floor(o/7)} weeks ago`:o<60?"Last month":`${Math.floor(o/30)} months ago`}return i===0?"Today":i===1?"Tomorrow":i<7?`In ${i} days`:i<14?"Next week":i<30?`In ${Math.floor(i/7)} weeks`:i<60?"Next month":`In ${Math.floor(i/30)} months`},Ej=e=>{const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear();return`${n}/${s}/${i}`},Tj={property:In,vehicles:Wt,finance:Cb,employment:xr,government:ji,insurance:cr,legal:Ct,services:Rn},Ij={property:"Property",vehicles:"Vehicles",finance:"Finance",employment:"Employment",government:"Government",insurance:"Insurance",legal:"Legal",services:"Services"},Gf={red:"border-red-200 bg-red-50",amber:"border-amber-200 bg-amber-50",green:"border-green-200 bg-green-50",blue:"border-blue-200 bg-blue-50"},Yf={red:"text-red-700",amber:"text-amber-700",green:"text-green-700",blue:"text-blue-700"},Rj=({renewal:e,urgency:t})=>{const n=Tj[e.domain]||Ct,s=Ij[e.domain]||e.domain,i=Gf[t]||Gf.blue,o=Yf[t]||Yf.blue;return r.jsxs("div",{className:`p-4 rounded-lg border-2 ${i} transition hover:shadow-md`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(n,{className:`w-5 h-5 ${o}`}),r.jsx("span",{className:"text-xs font-medium text-slate-600 uppercase",children:s})]}),e.priority&&r.jsx("span",{className:`text-xs px-2 py-1 rounded ${e.priority==="Critical"?"bg-red-100 text-red-700":e.priority==="Important"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:e.priority})]}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2 line-clamp-2",children:e.name}),e.recordType&&r.jsx("p",{className:"text-xs text-slate-500 mb-3 capitalize",children:e.recordType.replace(/-/g," ")}),r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:`text-sm font-medium ${o}`,children:Nj(e.renewalDate)}),r.jsx("p",{className:"text-xs text-slate-500",children:Ej(e.renewalDate)})]}),r.jsxs(ge,{to:e.domainUrl,className:"inline-flex items-center gap-1 text-sm text-slate-700 hover:text-slate-900 font-medium transition",children:["View Record",r.jsx(ro,{className:"w-3 h-3"})]})]})},Fj=e=>{const t=new Date,n=new Date(t.getTime()+7*24*60*60*1e3),s=new Date(t.getTime()+30*24*60*60*1e3),i=new Date(t.getTime()+90*24*60*60*1e3),o={overdue:[],next7days:[],next30days:[],next90days:[],beyond:[]};return e.forEach(l=>{const a=new Date(l.renewalDate);a<t?o.overdue.push(l):a<=n?o.next7days.push(l):a<=s?o.next30days.push(l):a<=i?o.next90days.push(l):o.beyond.push(l)}),o},zj=({renewals:e})=>{const t=Fj(e),n=[{key:"overdue",title:"Overdue",color:"red",data:t.overdue},{key:"next7days",title:"Next 7 Days",color:"red",data:t.next7days},{key:"next30days",title:"Next 30 Days",color:"amber",data:t.next30days},{key:"next90days",title:"Next 90 Days",color:"green",data:t.next90days},{key:"beyond",title:"Beyond 90 Days",color:"blue",data:t.beyond}];return r.jsx("div",{className:"space-y-8",children:n.map(s=>s.data.length===0?null:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:`w-1 h-6 rounded bg-${s.color}-500`}),r.jsxs("h2",{className:"text-lg font-semibold text-slate-900",children:[s.title,r.jsxs("span",{className:"ml-2 text-sm font-normal text-slate-500",children:["(",s.data.length,")"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.data.map(i=>r.jsx(Rj,{renewal:i,urgency:s.color},i.id))})]},s.key))})},Dj=({filters:e,onChange:t})=>{const n=o=>{t({...e,domain:o.target.value})},s=o=>{t({...e,priority:o.target.value})},i=o=>{t({...e,timeRange:o.target.value})};return r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{htmlFor:"domain-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:"Domain"}),r.jsxs("select",{id:"domain-filter",value:e.domain,onChange:n,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 bg-white",children:[r.jsx("option",{value:"all",children:"All Domains"}),r.jsx("option",{value:"vehicles",children:"Vehicles"}),r.jsx("option",{value:"properties",children:"Properties"}),r.jsx("option",{value:"employments",children:"Employments"}),r.jsx("option",{value:"services",children:"Services"})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{htmlFor:"priority-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:"Priority"}),r.jsxs("select",{id:"priority-filter",value:e.priority,onChange:s,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 bg-white",children:[r.jsx("option",{value:"all",children:"All Priorities"}),r.jsx("option",{value:"Critical",children:"Critical"}),r.jsx("option",{value:"Important",children:"Important"}),r.jsx("option",{value:"Standard",children:"Standard"})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{htmlFor:"time-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:"Time Range"}),r.jsxs("select",{id:"time-filter",value:e.timeRange,onChange:i,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 bg-white",children:[r.jsx("option",{value:"7days",children:"Next 7 Days"}),r.jsx("option",{value:"30days",children:"Next 30 Days"}),r.jsx("option",{value:"90days",children:"Next 90 Days"}),r.jsx("option",{value:"all",children:"All Upcoming"})]})]})]})},Pj=e=>Ye({queryKey:["renewals","timeline",e],queryFn:()=>Tb(e),select:t=>t.renewals}),Mj=()=>{const[e]=Am(),[t,n]=S.useState({domain:"all",priority:"all",timeRange:"90days"});S.useEffect(()=>{const l=e.get("filter");l==="overdue"?n({domain:"all",priority:"all",timeRange:"overdue"}):l==="7days"?n({domain:"all",priority:"all",timeRange:"7days"}):l==="30days"&&n({domain:"all",priority:"all",timeRange:"30days"})},[e]);const s=()=>{const l={};t.domain!=="all"&&(l.domain=t.domain),t.priority!=="all"&&(l.priority=t.priority);const a=new Date;return t.timeRange==="7days"?(l.from=a.toISOString(),l.to=new Date(a.getTime()+7*24*60*60*1e3).toISOString()):t.timeRange==="30days"?(l.from=a.toISOString(),l.to=new Date(a.getTime()+30*24*60*60*1e3).toISOString()):t.timeRange==="90days"?(l.from=a.toISOString(),l.to=new Date(a.getTime()+90*24*60*60*1e3).toISOString()):t.timeRange==="overdue"&&(l.to=a.toISOString()),l},{data:i,isLoading:o}=Pj(s());return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("header",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-100",children:r.jsx(Nn,{className:"w-8 h-8 text-slate-700"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-semibold text-slate-900 mb-2",children:"Upcoming Renewals"}),r.jsx("p",{className:"text-slate-600",children:"Track renewal dates across all your household domains"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ex,{className:"w-5 h-5 text-slate-500"}),r.jsxs("span",{className:"text-sm text-slate-600",children:[(i==null?void 0:i.length)||0," renewals"]})]})]}),r.jsx(Dj,{filters:t,onChange:n}),o?r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading renewals..."}):(i==null?void 0:i.length)===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-slate-600 mb-4",children:"No upcoming renewals. Add records with renewal dates to see them here."})}):r.jsx(zj,{renewals:i||[]})]})},Jf=({icon:e,label:t,href:n,color:s="blue"})=>{const i={green:"bg-green-100 hover:bg-green-200 text-green-700",blue:"bg-blue-100 hover:bg-blue-200 text-blue-700",red:"bg-red-100 hover:bg-red-200 text-red-700"};return r.jsxs("a",{href:n,className:`flex items-center gap-3 p-3 rounded-lg transition min-h-[48px] ${i[s]}`,children:[r.jsx(e,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:t})]})},_j=()=>{const[e,t]=S.useState(!1);return{copyToClipboard:async s=>{try{if(navigator.clipboard)return await navigator.clipboard.writeText(s),t(!0),setTimeout(()=>t(!1),2e3),!0;{const i=document.createElement("textarea");return i.value=s,i.style.position="fixed",i.style.opacity="0",document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),t(!0),setTimeout(()=>t(!1),2e3),!0}}catch(i){return console.error("Failed to copy to clipboard:",i),!1}},copied:e}},Lj=({record:e})=>{const t=Me(),{copyToClipboard:n,copied:s}=_j(),i=()=>{e.notes&&n(e.notes)};return r.jsxs("div",{className:"p-5 rounded-xl border-2 border-red-200 bg-red-50 no-print-border",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-1",children:e.name}),r.jsx("p",{className:"text-sm text-slate-600 capitalize",children:e.recordType.replace(/-/g," ")})]}),r.jsx("button",{onClick:()=>t(e.domainUrl),className:"p-2 rounded-lg hover:bg-red-100 transition no-print","aria-label":"View full details",children:r.jsx(ro,{className:"w-5 h-5 text-slate-600"})})]}),(e.contactPhone||e.contactEmail)&&r.jsxs("div",{className:"space-y-2 mb-4",children:[e.contactPhone&&r.jsx(Jf,{icon:nx,label:e.contactPhone,href:`tel:${e.contactPhone}`,color:"green"}),e.contactEmail&&r.jsx(Jf,{icon:tx,label:e.contactEmail,href:`mailto:${e.contactEmail}`,color:"blue"})]}),e.notes&&r.jsx("div",{className:"mt-4 pt-4 border-t border-red-200",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("p",{className:"text-sm text-slate-700 flex-1",children:e.notes}),r.jsx("button",{onClick:i,className:"ml-2 p-1 rounded hover:bg-red-100 transition no-print","aria-label":s?"Copied!":"Copy notes",title:s?"Copied!":"Copy notes",children:r.jsx(wv,{className:`w-4 h-4 ${s?"text-green-600":"text-slate-600"}`})})]})})]})},jx={getCriticalRecords:async()=>{const e=await fetch("/api/emergency/critical",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch critical records");return e.json()},getChecklist:async()=>{const e=await fetch("/api/emergency/checklist",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch emergency checklist");return e.json()}},Aj=()=>Ye({queryKey:["critical-records"],queryFn:jx.getCriticalRecords,staleTime:1e3*60*5,refetchOnWindowFocus:!0}),Oj=()=>Ye({queryKey:["emergency-checklist"],queryFn:jx.getChecklist,staleTime:1e3*60*5}),Wj={property:"Property",vehicles:"Vehicles",finance:"Finance",employment:"Employment",government:"Government",insurance:"Insurance",legal:"Legal",services:"Services"},Bj=({className:e=""})=>{const{data:t,isLoading:n}=Oj();if(n)return r.jsx("div",{className:`p-6 rounded-xl bg-slate-50 border border-slate-200 ${e}`,children:r.jsx("p",{className:"text-slate-600",children:"Loading checklist..."})});const s=(t==null?void 0:t.checklist)||{},i=Object.values(s).reduce((o,l)=>o+l.criticalCount,0);return r.jsxs("div",{className:`p-6 rounded-xl bg-slate-50 border border-slate-200 no-print ${e}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ls,{className:"w-5 h-5 text-slate-600"}),r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Emergency Preparedness"})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:[i," critical ",i===1?"record":"records"]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(s).map(([o,l])=>r.jsxs("div",{className:`p-3 rounded-lg border-2 ${l.criticalCount>0?"border-green-200 bg-green-50":"border-slate-200 bg-white"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-slate-700 capitalize",children:Wj[o]||o}),l.criticalCount>0?r.jsx(Xm,{className:"w-4 h-4 text-green-600"}):r.jsx(at,{className:"w-4 h-4 text-slate-400"})]}),r.jsxs("div",{className:"text-xs text-slate-600",children:[l.criticalCount," critical"]})]},o))}),i===0&&r.jsx("div",{className:"mt-4 p-4 rounded-lg bg-yellow-50 border border-yellow-200",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsx("strong",{children:"Tip:"}),' Mark important records as "Critical" priority in each domain to see them in this emergency view.']})})]})},$j=[{value:"all",label:"All Domains"},{value:"property",label:"Property"},{value:"vehicles",label:"Vehicles"},{value:"finance",label:"Finance"},{value:"employment",label:"Employment"},{value:"government",label:"Government"},{value:"insurance",label:"Insurance"},{value:"legal",label:"Legal"},{value:"services",label:"Services"}],Uj=({searchQuery:e,onSearchChange:t,selectedDomain:n,onDomainChange:s})=>r.jsxs("div",{className:"mb-8 space-y-4 no-print",children:[r.jsxs("div",{className:"relative",children:[r.jsx(rx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",value:e,onChange:i=>t(i.target.value),placeholder:"Search critical records...",className:"w-full pl-11 pr-4 py-3 bg-white border border-slate-200 rounded-lg text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:$j.map(i=>r.jsx("button",{onClick:()=>s(i.value),className:`px-4 py-2 rounded-lg font-medium transition ${n===i.value?"bg-red-600 text-white":"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50"}`,children:i.label},i.value))})]}),Vj={property:"Property",vehicles:"Vehicles",finance:"Finance",employment:"Employment",government:"Government",insurance:"Insurance",legal:"Legal",services:"Services"},Hj=()=>{const[e,t]=S.useState(""),[n,s]=S.useState("all"),{data:i,isLoading:o}=Aj(),l=(i==null?void 0:i.criticalRecords)||[],a=l.filter(f=>{const h=f.name.toLowerCase().includes(e.toLowerCase())||f.recordType.toLowerCase().includes(e.toLowerCase()),x=n==="all"||f.domain===n;return h&&x}),c=a.reduce((f,h)=>(f[h.domain]||(f[h.domain]=[]),f[h.domain].push(h),f),{}),u=()=>{window.print()},d=()=>{alert("PDF download feature coming soon")};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("header",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-lg bg-red-50",children:r.jsx(at,{className:"w-8 h-8 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-semibold text-slate-900 mb-2",children:"Emergency Information"}),r.jsx("p",{className:"text-slate-600",children:"Quick access to critical household information"})]})]}),r.jsxs("div",{className:"flex gap-2 no-print",children:[r.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-700 hover:bg-slate-50 transition",children:[r.jsx(lb,{className:"w-5 h-5"}),"Print"]}),r.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-700 hover:bg-slate-50 transition",children:[r.jsx(Zm,{className:"w-5 h-5"}),"PDF"]})]})]}),r.jsx(Uj,{searchQuery:e,onSearchChange:t,selectedDomain:n,onDomainChange:s}),r.jsx(Bj,{className:"mb-8"}),o?r.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading critical records..."}):a.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(at,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 mb-2",children:l.length===0?"No critical records found.":"No records match your search criteria."}),r.jsx("p",{className:"text-sm text-slate-500",children:l.length===0?"Mark important records as 'Critical' priority in each domain to see them here.":"Try adjusting your search or filter."})]}):r.jsx("div",{className:"space-y-8",children:Object.entries(c).map(([f,h])=>r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 capitalize",children:[Vj[f]||f," (",h.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(x=>r.jsx(Lj,{record:x},x.id))})]},f))})]})};async function Qr(e){if(e.status===401)throw window.location.pathname.includes("/login")||(window.location.href="/login"),new Error("unauthenticated");if(e.status===403)throw new Error("Account not approved. Please contact an administrator.");if(!e.ok)try{const t=e.headers.get("content-type");if(t&&t.includes("application/json")){const n=await e.json();throw new Error(n.error||`API error ${e.status}`)}else{const n=await e.text();throw new Error(n||`API error ${e.status}`)}}catch(t){throw t instanceof Error&&t.message?t:new Error(`API error ${e.status}`)}return e.json()}async function Sx(){const e=await fetch("/api/users/me",{credentials:"include"});return Qr(e)}async function Ac(){const e=await fetch("/api/entries",{credentials:"include"});return Qr(e)}async function qj(e){const t=await fetch("/api/entries",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return Qr(t)}async function Qj(e){const t=await fetch(`/api/entries/${e}`,{credentials:"include"});return Qr(t)}async function Kj(e,t){const n=await fetch(`/api/entries/${e}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Qr(n)}async function Gj(e){const t=await fetch(`/api/entries/${e}`,{method:"DELETE",credentials:"include"});return Qr(t)}async function Yj(){const e=await fetch("/api/categories",{credentials:"include"});return Qr(e)}function Jj(){const[e,t]=S.useState([]),[n,s]=S.useState(!0),[i,o]=S.useState(null),[l,a]=S.useState(!1),[c,u]=S.useState(""),[d,f]=S.useState("account");S.useEffect(()=>{(async()=>{try{const x=await Ac();t(x.entries)}catch(x){o(x.message||"Failed to load")}finally{s(!1)}})()},[]);async function h(x){if(x&&x.preventDefault(),!!c.trim()){a(!0);try{await qj({title:c.trim(),type:d}),u(""),f("account");const g=await Ac();t(g.entries)}catch(g){o(g.message||"Create failed")}finally{a(!1)}}}return r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Dashboard"}),r.jsx("p",{className:"text-sm text-muted",children:"Overview of your household entries"})]}),r.jsx("div",{className:"text-sm text-muted",children:"Quick actions"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"text-sm text-muted",children:"Total entries"}),r.jsx("div",{className:"text-2xl font-bold mt-2",children:e.length})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"text-sm text-muted",children:"Recent uploads"}),r.jsx("div",{className:"text-2xl font-bold mt-2",children:""})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"text-sm text-muted",children:"Pending approvals"}),r.jsx("div",{className:"text-2xl font-bold mt-2",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Recent entries"}),r.jsx("button",{className:"text-sm text-muted",children:"View all"})]}),n&&r.jsx("div",{className:"text-muted",children:"Loading"}),i&&r.jsx("div",{className:"text-red-600",children:i}),r.jsxs("div",{className:"space-y-3 mt-3",children:[e.length===0&&!n&&r.jsx("div",{className:"text-muted",children:"No entries yet."}),e.map(x=>r.jsxs("div",{className:"flex items-center justify-between bg-surface rounded-lg p-3 border border-gray-100",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:x.title}),r.jsxs("div",{className:"text-sm text-muted",children:[x.type,"  ",x.provider||""]})]}),r.jsx("div",{children:r.jsx(ge,{to:`/entry/${x._id}`,className:"text-brand hover:underline",children:"View"})})]},x._id))]})]})}),r.jsx("aside",{children:r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Add entry"}),r.jsxs("form",{onSubmit:h,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-muted mb-1",children:"Title"}),r.jsx("input",{className:"w-full border rounded-lg px-3 py-2",value:c,onChange:x=>u(x.target.value),placeholder:"e.g. NatWest - Joint Current Account"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-muted mb-1",children:"Type"}),r.jsxs("select",{value:d,onChange:x=>f(x.target.value),className:"w-full border rounded-lg px-3 py-2",children:[r.jsx("option",{value:"account",children:"Account"}),r.jsx("option",{value:"bill",children:"Bill"}),r.jsx("option",{value:"policy",children:"Policy"}),r.jsx("option",{value:"provider",children:"Provider"}),r.jsx("option",{value:"note",children:"Note"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"btn",disabled:l,children:l?"Creating":"Create"}),r.jsx("button",{type:"button",className:"btn bg-gray-200 text-black",onClick:()=>{u(""),f("account")},children:"Reset"})]})]})]})})]})]})}const Xj=(e,t)=>e.sort((n,s)=>new Date(s.updatedAt||s.createdAt||"").getTime()-new Date(n.updatedAt||n.createdAt||"").getTime()).slice(0,5).map((n,s)=>{const i=n.updatedAt&&n.updatedAt!==n.createdAt,o=new Date(i?n.updatedAt:n.createdAt),l=(a,c)=>a==="account"?"Bank Accounts":a==="utility"||a==="bill"?"Bills":a==="policy"?"Insurance":c.toLowerCase().includes("investment")||c.toLowerCase().includes("isa")?"Investments":c.toLowerCase().includes("property")||c.toLowerCase().includes("house")?"Property":"Other";return{id:s+1,timestamp:o.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}),user:(t==null?void 0:t.displayName)||"Unknown User",category:l(n.type||"other",n.title),action:i?"UPDATED":"CREATED",details:i?`Updated '${n.title}' details.`:`Added '${n.title}' account.`,actionType:i?"updated":"created"}}),Zj=e=>{switch(e){case"created":return{backgroundColor:"rgba(34, 197, 94, 0.1)",color:"#22c55e"};case"updated":return{backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"};case"uploaded":return{backgroundColor:"rgba(168, 85, 247, 0.1)",color:"#a855f7"};case"deleted":return{backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444"};default:return{backgroundColor:"rgba(107, 114, 128, 0.1)",color:"#6b7280"}}};function eS(){const e=Me(),[t,n]=S.useState([]),[s,i]=S.useState(!0),[o,l]=S.useState(null),[a,c]=S.useState([]),[u,d]=S.useState(null);S.useEffect(()=>{(async()=>{try{const[j,k]=await Promise.all([Ac(),Sx()]);n(j.entries),d(k.user),c(Xj(j.entries,k.user))}catch(j){l(j.message||"Failed to load")}finally{i(!1)}})()},[]);const f={accounts:t.filter(j=>j.type==="account").length,investments:t.filter(j=>{var k;return j.title.toLowerCase().includes("investment")||j.title.toLowerCase().includes("401k")||j.title.toLowerCase().includes("ira")||j.title.toLowerCase().includes("roth")||j.title.toLowerCase().includes("brokerage")||((k=j.accountDetails)==null?void 0:k.category)==="investment"}).length,properties:t.filter(j=>{var k;return j.title.toLowerCase().includes("property")||j.title.toLowerCase().includes("house")||j.title.toLowerCase().includes("home")||j.title.toLowerCase().includes("residence")||j.title.toLowerCase().includes("real estate")||((k=j.accountDetails)==null?void 0:k.category)==="property"}).length,utilities:t.filter(j=>j.type==="utility"||j.type==="bill").length,pensions:t.filter(j=>j.type==="pension").length},h={accounts:f.accounts,investments:f.investments,properties:f.properties,utilities:f.utilities,pensions:f.pensions},x={borderBottom:"1px solid #f1f5f9",padding:"32px",background:"#ffffff",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},g={display:"flex",alignItems:"center",gap:"20px",padding:"28px 32px",backgroundColor:"#ffffff",border:"1px solid #f1f5f9",borderRadius:"16px",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},b={width:"100%",border:"1px solid #f1f5f9",borderRadius:"16px",overflow:"hidden",backgroundColor:"#ffffff",maxHeight:"400px",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},v={maxHeight:"320px",overflowY:"auto",display:"block"},p={display:"block",backgroundColor:"#f8fafc",position:"sticky",top:0,zIndex:1},m={display:"flex",width:"100%",borderBottom:"1px solid #e5e7eb"},y=j=>({padding:"12px 16px",fontSize:"14px",flex:j,minWidth:0});return r.jsxs(r.Fragment,{children:[r.jsx("div",{style:x,children:r.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0f172a",margin:"0",fontFamily:"Inter, system-ui, -apple-system, sans-serif",letterSpacing:"-0.025em"},children:"Dashboard"})}),r.jsxs("div",{style:{padding:"40px",background:"#fefefe",minHeight:"calc(100vh - 104px)"},children:[r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#334155",margin:"0 0 24px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif",letterSpacing:"-0.025em"},children:"Vault Items"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"32px"},children:[r.jsxs("div",{style:g,onClick:()=>e("/accounts?type=account"),onMouseEnter:j=>{j.currentTarget.style.boxShadow="0 10px 25px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -2px rgba(15, 23, 42, 0.05)",j.currentTarget.style.transform="translateY(-1px)",j.currentTarget.style.borderColor="#e2e8f0"},onMouseLeave:j=>{j.currentTarget.style.boxShadow="0 1px 3px 0 rgba(15, 23, 42, 0.08)",j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.borderColor="#f1f5f9"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",backgroundColor:"#f1f5f9",borderRadius:"12px"},children:r.jsx(Hr,{size:24,color:"#475569",strokeWidth:1.5})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#64748b",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Bank Accounts"}),r.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[h.accounts," accounts"]})]})]}),r.jsxs("div",{style:g,onClick:()=>e("/accounts?type=investment"),onMouseEnter:j=>{j.currentTarget.style.boxShadow="0 10px 25px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -2px rgba(15, 23, 42, 0.05)",j.currentTarget.style.transform="translateY(-1px)",j.currentTarget.style.borderColor="#e2e8f0"},onMouseLeave:j=>{j.currentTarget.style.boxShadow="0 1px 3px 0 rgba(15, 23, 42, 0.08)",j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.borderColor="#f1f5f9"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",backgroundColor:"#f1f5f9",borderRadius:"12px"},children:r.jsx(vl,{size:24,color:"#475569",strokeWidth:1.5})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#64748b",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Investments"}),r.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[h.investments," accounts"]})]})]}),r.jsxs("div",{style:g,onClick:()=>e("/accounts?type=property"),onMouseEnter:j=>{j.currentTarget.style.boxShadow="0 10px 25px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -2px rgba(15, 23, 42, 0.05)",j.currentTarget.style.transform="translateY(-1px)",j.currentTarget.style.borderColor="#e2e8f0"},onMouseLeave:j=>{j.currentTarget.style.boxShadow="0 1px 3px 0 rgba(15, 23, 42, 0.08)",j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.borderColor="#f1f5f9"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",backgroundColor:"#f1f5f9",borderRadius:"12px"},children:r.jsx(ji,{size:24,color:"#475569",strokeWidth:1.5})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#64748b",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Property"}),r.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[h.properties," properties"]})]})]}),r.jsxs("div",{style:g,onClick:()=>e("/accounts?type=utility"),onMouseEnter:j=>{j.currentTarget.style.boxShadow="0 10px 25px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -2px rgba(15, 23, 42, 0.05)",j.currentTarget.style.transform="translateY(-1px)",j.currentTarget.style.borderColor="#e2e8f0"},onMouseLeave:j=>{j.currentTarget.style.boxShadow="0 1px 3px 0 rgba(15, 23, 42, 0.08)",j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.borderColor="#f1f5f9"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",backgroundColor:"#f1f5f9",borderRadius:"12px"},children:r.jsx(cb,{size:24,color:"#475569",strokeWidth:1.5})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#64748b",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Bills"}),r.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[h.utilities," accounts"]})]})]}),r.jsxs("div",{style:g,onClick:()=>e("/accounts?type=pension"),onMouseEnter:j=>{j.currentTarget.style.boxShadow="0 10px 25px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -2px rgba(15, 23, 42, 0.05)",j.currentTarget.style.transform="translateY(-1px)",j.currentTarget.style.borderColor="#e2e8f0"},onMouseLeave:j=>{j.currentTarget.style.boxShadow="0 1px 3px 0 rgba(15, 23, 42, 0.08)",j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.borderColor="#f1f5f9"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",backgroundColor:"#f1f5f9",borderRadius:"12px"},children:r.jsx(sb,{size:24,color:"#475569",strokeWidth:1.5})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#64748b",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Pensions"}),r.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[h.pensions," pensions"]})]})]})]}),r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#334155",margin:"0 0 24px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif",letterSpacing:"-0.025em"},children:"Audit Trail"}),r.jsxs("div",{style:b,children:[r.jsx("div",{style:p,children:r.jsxs("div",{style:m,children:[r.jsx("div",{style:{...y("2"),fontWeight:"500",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Timestamp"}),r.jsx("div",{style:{...y("1"),fontWeight:"500",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"User"}),r.jsx("div",{style:{...y("1"),fontWeight:"500",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Category"}),r.jsx("div",{style:{...y("1"),fontWeight:"500",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Action"}),r.jsx("div",{style:{...y("3"),fontWeight:"500",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Details"})]})}),r.jsx("div",{style:v,children:a.map(j=>r.jsxs("div",{style:m,children:[r.jsx("div",{style:{...y("2"),color:"#1a1a1a"},children:j.timestamp}),r.jsx("div",{style:{...y("1"),color:"#1a1a1a"},children:j.user}),r.jsx("div",{style:{...y("1"),color:"#1a1a1a"},children:j.category}),r.jsx("div",{style:{...y("1"),color:"#1a1a1a"},children:r.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",fontSize:"12px",fontWeight:"500",borderRadius:"9999px",...Zj(j.actionType)},children:j.action})}),r.jsx("div",{style:{...y("3"),color:"#6b7280"},children:j.details})]},j.id))})]}),s&&r.jsx("div",{style:{...g,marginTop:"24px"},children:r.jsx("p",{style:{color:"#6b7280",margin:0},children:"Loading your financial data..."})}),o&&r.jsx("div",{style:{...g,marginTop:"24px"},children:r.jsxs("p",{style:{color:"#dc2626",margin:0},children:["Error: ",o]})})]})]})}const wx=S.createContext(void 0);function tS({children:e}){const[t,n]=S.useState(null),[s,i]=S.useState(!0),[o,l]=S.useState(null);async function a(){i(!0),l(null);try{const f=await Sx();n(f.user)}catch(f){n(null),l(f.message||"Failed to load user")}finally{i(!1)}}S.useEffect(()=>{a()},[]);function c(){window.location.href="/auth/google"}function u(){window.location.href="/logout"}const d={user:t,loading:s,error:o,refresh:a,signIn:c,signOut:u};return r.jsx(wx.Provider,{value:d,children:e})}function yr(){const e=S.useContext(wx);if(!e)throw new Error("useAuth must be used inside AuthProvider");return e}function ue({children:e}){const{user:t,loading:n,signOut:s}=yr();return n?r.jsx("div",{style:{padding:20},children:"Checking authentication"}):t?t&&!t.approved?r.jsxs("div",{style:{padding:20,textAlign:"center"},children:[r.jsx("h2",{children:"Account Pending Approval"}),r.jsx("p",{children:"Your account is waiting for admin approval. Please contact the administrator."}),r.jsxs("p",{children:[r.jsx("strong",{children:"User:"})," ",t.displayName," (",t.email,")"]}),r.jsx("button",{onClick:s,style:{marginTop:16,padding:"8px 16px"},children:"Sign Out"})]}):e:r.jsx(_n,{to:"/login",replace:!0})}const nS=({domain:e,recordTypes:t,onEdit:n,onDelete:s,onAddForDomain:i})=>{const[o,l]=S.useState(!1),a=e.icon;return r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white transition-all hover:shadow-md overflow-hidden",children:[r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 rounded-lg bg-slate-100 shrink-0",children:r.jsx(a,{className:"w-5 h-5 text-slate-700",strokeWidth:1.5})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-0.5",children:e.name}),r.jsxs("p",{className:"text-xs text-slate-600",children:[t.length," ",t.length===1?"type":"types"]})]}),r.jsx("button",{onClick:()=>l(!o),className:`p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100
                     rounded-lg transition-all shrink-0`,title:o?"Close":"Manage record types",children:o?r.jsx(pv,{size:20,strokeWidth:2}):r.jsx(Bl,{size:20,strokeWidth:2})})]})}),o&&r.jsx("div",{className:"border-t border-slate-200 bg-slate-50/50",children:r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h4",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wide",children:"Record Types"}),r.jsxs("button",{onClick:()=>i(e.name),className:`px-2.5 py-1.5 text-xs font-medium text-white bg-slate-900
                         rounded-lg hover:bg-slate-800 transition-all flex items-center gap-1`,children:[r.jsx(ct,{size:13,strokeWidth:2.5}),"Add"]})]}),t.length===0?r.jsx("div",{className:"text-center py-6 text-slate-500 text-sm",children:"No record types yet. Click Add to create one."}):r.jsx("div",{className:"space-y-1.5",children:t.map(c=>r.jsxs("div",{className:`flex items-center justify-between p-2.5 bg-white rounded-lg
                             border border-slate-200 hover:border-slate-300 transition-all group`,children:[r.jsx("span",{className:"text-sm font-medium text-slate-900",children:c.name}),r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>n(c),className:`p-1.5 text-slate-600 hover:text-slate-900 hover:bg-slate-100
                                 rounded transition-all`,title:"Edit",children:r.jsx(eb,{size:13,strokeWidth:2})}),r.jsx("button",{onClick:()=>s(c._id),className:`p-1.5 text-red-600 hover:text-red-700 hover:bg-red-50
                                 rounded transition-all`,title:"Delete",children:r.jsx($t,{size:13,strokeWidth:2})})]})]},c._id))})]})})]})},rS=({onClose:e,onSubmit:t,initialData:n,domains:s,hideDomainSelect:i=!1})=>{const[o,l]=S.useState(""),[a,c]=S.useState("");S.useEffect(()=>{n&&(l(n.name),c(n.domain))},[n]);const u=d=>{d.preventDefault(),o.trim()&&a&&t({name:o.trim(),domain:a})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:n?"Edit Record Type":"Add Record Type"}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:o,onChange:d=>l(d.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",placeholder:"e.g., Mortgage, Rent, Car Loan",required:!0})]}),!i&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Domain"}),r.jsxs("select",{value:a,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-transparent",disabled:!!n,required:!0,children:[r.jsx("option",{value:"",children:"Select a domain"}),s.map(d=>r.jsx("option",{value:d,children:d},d))]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-slate-700 hover:text-slate-900",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800",children:n?"Update":"Add"})]})]})]})})},Xf=[{id:"property",name:"Property",icon:In},{id:"vehicles",name:"Vehicle",icon:Wt},{id:"employment",name:"Employment",icon:xr},{id:"government",name:"Government",icon:Ct},{id:"finance",name:"Finance",icon:rv},{id:"insurance",name:"Insurance",icon:cr},{id:"legal",name:"Legal",icon:$l},{id:"services",name:"Services",icon:Rn}],sS=()=>{const{user:e}=yr(),{recordTypes:t,loading:n,error:s,addRecordType:i,updateRecordType:o,deleteRecordType:l}=Hs(),[a,c]=S.useState(!1),[u,d]=S.useState(null);if(!((e==null?void 0:e.role)==="admin"))return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:r.jsx("p",{className:"text-red-800 font-medium",children:"Access Denied: Admin privileges required"})})});const h=v=>{d(v),c(!0)},x=v=>{d({_id:"",name:"",domain:v}),c(!0)},g=async v=>{try{u&&u._id?await o(u._id,{name:v.name}):await i(v),c(!1),d(null)}catch(p){console.error("Failed to save record type:",p)}},b=async v=>{if(window.confirm("Are you sure you want to delete this record type? This action cannot be undone."))try{await l(v)}catch(p){console.error("Failed to delete record type:",p)}};return n?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-slate-600",children:"Loading domain configuration..."})}):s?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:r.jsx("p",{className:"text-red-800",children:s})})}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("header",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Domain Management"}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Configure record types for each life domain"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Xf.map(v=>{const p=t.filter(m=>m.domain===v.name);return r.jsx(nS,{domain:v,recordTypes:p,onEdit:h,onDelete:b,onAddForDomain:x},v.id)})}),a&&r.jsx(rS,{onClose:()=>{c(!1),d(null)},onSubmit:g,initialData:u,domains:Xf.map(v=>v.name),hideDomainSelect:!0})]})};function iS(){const{id:e}=Bt(),t=Me(),[n,s]=S.useState(null),[i,o]=S.useState(!0),[l,a]=S.useState(!1),[c,u]=S.useState(""),[d,f]=S.useState(""),[h,x]=S.useState(null);S.useEffect(()=>{(async()=>{if(e)try{const v=await Qj(e);s(v.entry),u(v.entry.title),f(v.entry.notes||"")}catch(v){x(v.message||"Failed to load entry")}finally{o(!1)}})()},[e]);async function g(){if(e)try{const v=await Kj(e,{title:c,notes:d});s(v.entry),a(!1)}catch(v){x(v.message||"Failed to save")}}async function b(){if(e)try{await Gj(e),t("/")}catch(v){x(v.message||"Failed to delete")}}return i?r.jsx("div",{className:"container",children:"Loading"}):h?r.jsx("div",{className:"container text-red-600",children:h}):n?r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"card flex items-center justify-between",children:[l?r.jsx("input",{value:c,onChange:v=>u(v.target.value),className:"border rounded-lg px-3 py-2 w-full"}):r.jsx("h2",{className:"text-xl font-semibold",children:n.title}),r.jsxs("div",{className:"flex items-center gap-2",children:[l?r.jsx("button",{onClick:g,className:"btn",children:"Save"}):r.jsx("button",{onClick:()=>a(!0),className:"btn",children:"Edit"}),r.jsx("button",{onClick:b,className:"btn bg-gray-200 text-black",children:"Delete"})]})]}),r.jsxs("div",{className:"mt-4 text-muted",children:[n.type,"  ",n.provider]}),r.jsxs("section",{className:"card mt-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Notes"}),l?r.jsx("textarea",{value:d,onChange:v=>f(v.target.value),rows:6,className:"w-full border rounded-lg p-2"}):r.jsx("div",{className:"text-muted",children:n.notes||r.jsx("em",{children:"No notes"})})]}),r.jsxs("section",{className:"mt-4",children:[r.jsx("div",{className:"text-sm text-muted mb-2",children:"Account details"}),r.jsx("pre",{className:"card bg-surface p-3 rounded-lg border",children:JSON.stringify(n.accountDetails||{},null,2)})]})]}):r.jsx("div",{className:"container",children:"Not found"})}function oS(){return S.useEffect(()=>{window.location.href="http://localhost:3000/auth/google"},[]),r.jsxs("div",{style:{padding:24},children:[r.jsx("h2",{children:"Signing in"}),r.jsxs("p",{children:["If you are not redirected automatically,"," ",r.jsx("a",{href:"http://localhost:3000/auth/google",children:"click here to sign in with Google"}),"."]})]})}function lS(){const{signIn:e,loading:t}=yr();return t?r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[r.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"#ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#ffffff"},children:"Loading..."})]}),r.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",position:"relative",overflow:"hidden",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`radial-gradient(circle at 20% 50%, rgba(56, 189, 248, 0.05) 0%, transparent 50%),
                           radial-gradient(circle at 80% 80%, rgba(168, 85, 247, 0.05) 0%, transparent 50%),
                           radial-gradient(circle at 40% 20%, rgba(34, 211, 238, 0.03) 0%, transparent 50%)`,animation:"float 20s ease-in-out infinite"}}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                           linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px)`,backgroundSize:"50px 50px",opacity:.5}}),r.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translate(0, 0); }
          33% { transform: translate(30px, -30px); }
          66% { transform: translate(-20px, 20px); }
        }
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.8; }
        }
      `}),r.jsx("div",{style:{position:"relative",zIndex:1,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 24px"},children:r.jsxs("div",{style:{width:"100%",maxWidth:"1200px",display:"grid",gridTemplateColumns:"1fr",gap:"48px"},children:[r.jsxs("div",{style:{textAlign:"center",animation:"fadeInUp 0.8s ease-out"},children:[r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"96px",height:"96px",background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",borderRadius:"24px",marginBottom:"32px",boxShadow:"0 20px 60px rgba(59, 130, 246, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)",position:"relative"},children:[r.jsx(cr,{size:48,color:"#ffffff",strokeWidth:1.5}),r.jsx("div",{style:{position:"absolute",top:"-4px",right:"-4px",width:"20px",height:"20px",background:"#10b981",borderRadius:"50%",border:"3px solid #0f172a",animation:"pulse 2s ease-in-out infinite"}})]}),r.jsx("h1",{style:{fontSize:"56px",fontWeight:"700",background:"linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",margin:"0 0 16px 0",letterSpacing:"-0.03em",lineHeight:"1.1"},children:"LegacyLock"}),r.jsx("p",{style:{fontSize:"20px",color:"#cbd5e1",margin:"0 0 8px 0",lineHeight:"1.6",fontWeight:"400"},children:"Your UK Household Financial Vault"}),r.jsx("p",{style:{fontSize:"16px",color:"#94a3b8",margin:"0 auto",lineHeight:"1.6",maxWidth:"600px"},children:"Store and manage bank accounts, utilities, insurance policies, and household finances securely in one place"})]}),r.jsx("div",{style:{maxWidth:"480px",margin:"0 auto",width:"100%",animation:"fadeInUp 0.8s ease-out 0.2s both"},children:r.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"48px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), inset 0 0 0 1px rgba(255, 255, 255, 0.05)"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[r.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"72px",height:"72px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"18px",marginBottom:"24px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:r.jsx(Hv,{size:32,color:"#ffffff",strokeWidth:1.5})}),r.jsx("h2",{style:{fontSize:"28px",fontWeight:"600",color:"#ffffff",margin:"0 0 12px 0",letterSpacing:"-0.025em"},children:"Welcome Back"}),r.jsx("p",{style:{fontSize:"15px",color:"#cbd5e1",margin:0,lineHeight:"1.6"},children:"Sign in securely with your Google account"})]}),r.jsxs("button",{onClick:e,disabled:t,style:{width:"100%",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"16px 32px",borderRadius:"14px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%)",color:"#ffffff",fontSize:"16px",fontWeight:"600",cursor:t?"not-allowed":"pointer",fontFamily:"Inter, system-ui, -apple-system, sans-serif",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",opacity:t?.5:1,position:"relative",overflow:"hidden"},onMouseEnter:n=>{t||(n.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.15) 100%)",n.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",n.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3)",n.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:n=>{t||(n.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%)",n.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",n.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.2)",n.currentTarget.style.transform="translateY(0)")},children:[r.jsxs("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t?"Signing in...":"Continue with Google"]}),r.jsxs("div",{style:{marginTop:"24px",padding:"20px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"14px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx(sx,{size:18,color:"#34d399",strokeWidth:2}),r.jsx("p",{style:{fontSize:"13px",color:"#cbd5e1",margin:0,fontWeight:"500"},children:"Secure OAuth 2.0 Authentication"})]}),r.jsx("p",{style:{fontSize:"12px",color:"#94a3b8",margin:0,lineHeight:"1.5"},children:"New users require admin approval  All data encrypted at rest"})]})]})}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",maxWidth:"1000px",margin:"0 auto",width:"100%",animation:"fadeInUp 0.8s ease-out 0.4s both"},children:[{icon:"",title:"Bank Accounts",desc:"Current accounts, ISAs, and savings"},{icon:"",title:"Property",desc:"Utilities, Council Tax, and bills"},{icon:"",title:"Vehicles",desc:"MOT, insurance, and vehicle tax"},{icon:"",title:"Insurance",desc:"Life, health, and home policies"},{icon:"",title:"Bank Import",desc:"Parse PDF statements automatically"},{icon:"",title:"Pattern Detection",desc:"Smart recurring payment tracking"}].map((n,s)=>r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"24px",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"flex-start",gap:"16px",transition:"all 0.3s ease",cursor:"default"},onMouseEnter:i=>{i.currentTarget.style.background="rgba(255, 255, 255, 0.08)",i.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",i.currentTarget.style.transform="translateY(-4px)",i.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.3)"},onMouseLeave:i=>{i.currentTarget.style.background="rgba(255, 255, 255, 0.05)",i.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",i.currentTarget.style.transform="translateY(0)",i.currentTarget.style.boxShadow="none"},children:[r.jsx("div",{style:{fontSize:"28px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"12px"},children:n.icon}),r.jsxs("div",{style:{flex:1},children:[r.jsx("p",{style:{fontSize:"15px",fontWeight:"600",color:"#ffffff",margin:"0 0 4px 0"},children:n.title}),r.jsx("p",{style:{fontSize:"13px",color:"#94a3b8",margin:0,lineHeight:"1.4"},children:n.desc})]})]},s))}),r.jsx("div",{style:{textAlign:"center",paddingTop:"24px",animation:"fadeInUp 0.8s ease-out 0.6s both"},children:r.jsx("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:"Built for UK households  Secure  Private  Always free for couples"})})]})})]})}const aS=({user:e})=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"User Profile"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Name"}),r.jsx("p",{className:"text-base",children:e.displayName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Email"}),r.jsx("p",{className:"text-base",children:e.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Role"}),r.jsx("p",{className:"text-base capitalize",children:e.role})]})]})]}),cS=()=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Application Settings"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Application preferences and configurations will be available here."})]}),dS=()=>{const{user:e}=yr();return e?r.jsxs("div",{className:"container mx-auto py-10 px-4",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Settings"}),r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx(aS,{user:e}),r.jsx(cS,{})]})})]}):r.jsx("div",{className:"p-6",children:"Please log in to view settings."})};function uS({months:e,onMonthClick:t,selectedMonth:n}){const s=e.reduce((l,a)=>{const c=a.month.split("-")[0];return l[c]||(l[c]=[]),l[c].push(a),l},{}),i=l=>{const[a,c]=l.split("-");return new Date(parseInt(a),parseInt(c)-1).toLocaleDateString("en-GB",{month:"short"})},o=e.reduce((l,a)=>({imports:l.imports+(a.imported?1:0),transactions:l.transactions+(a.transactionCount||0),recordsCreated:l.recordsCreated+(a.recordsCreated||0),pending:l.pending+(a.pendingCount||0)}),{imports:0,transactions:0,recordsCreated:0,pending:0});return r.jsxs("div",{style:{backgroundColor:"#ffffff",border:"1px solid #f1f5f9",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[r.jsx(Nn,{size:20,color:"#0f172a",strokeWidth:1.5}),r.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:"0"},children:"Import Timeline"})]}),o.imports>0&&r.jsxs("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"20px",lineHeight:"1.5"},children:[o.imports," imports | ",o.transactions," total transactions |"," ",o.recordsCreated," records created | ",o.pending," pending"]}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"24px",alignItems:"flex-start"},children:Object.entries(s).sort(([l],[a])=>parseInt(a)-parseInt(l)).map(([l,a])=>r.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[r.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#64748b",minWidth:"50px"},children:["[",l,"]"]}),r.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:a.sort((c,u)=>c.month.localeCompare(u.month)).map(c=>{const u=n===c.month,d=c.imported&&t;return r.jsxs("div",{onClick:()=>d&&t(c),style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px 12px",borderRadius:"8px",backgroundColor:u?"#f0f9ff":"transparent",border:u?"1px solid #0ea5e9":"1px solid transparent",cursor:d?"pointer":"default",transition:"all 0.2s ease"},onMouseEnter:f=>{d&&(f.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:f=>{u||(f.currentTarget.style.backgroundColor="transparent")},title:c.imported?`${i(c.month)} ${l}
Imported: ${new Date(c.importDate||"").toLocaleDateString("en-GB")}
${c.transactionCount} transactions | ${c.recordsCreated} records created | ${c.pendingCount} pending`:`${i(c.month)} ${l}
Not imported yet`,children:[r.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:c.imported?"#0f172a":"#cbd5e1"},children:i(c.month)}),c.imported?r.jsx(_s,{size:16,color:"#059669",strokeWidth:2}):r.jsx(Ls,{size:16,color:"#cbd5e1",strokeWidth:1.5})]},c.month)})})]},l))}),e.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#64748b"},children:[r.jsx(Nn,{size:48,color:"#cbd5e1",strokeWidth:1.5,style:{margin:"0 auto 16px"}}),r.jsx("p",{style:{fontSize:"14px",margin:"0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"No imports yet. Upload your first bank statement to get started."})]})]})}function fS(){const{user:e}=yr(),t=Me(),[n,s]=S.useState([]),[i,o]=S.useState(!0),[l,a]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(null),[h,x]=S.useState([]),[g,b]=S.useState(null);if(e&&e.role!=="admin")return r.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#fefefe",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:r.jsxs("div",{style:{textAlign:"center",maxWidth:"400px",padding:"32px"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",backgroundColor:"#fef2f2",borderRadius:"16px",margin:"0 auto 24px"},children:r.jsx(Si,{size:28,color:"#dc2626",strokeWidth:1.5})}),r.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",color:"#0f172a",marginBottom:"8px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Access Denied"}),r.jsx("p",{style:{fontSize:"16px",color:"#64748b",fontFamily:"Inter, system-ui, -apple-system, sans-serif",lineHeight:"1.5"},children:"This feature is only available to administrators."})]})});S.useEffect(()=>{p(),v()},[]);const v=async()=>{try{const z=await fetch("/api/import/timeline",{credentials:"include"});if(!z.ok)throw new Error("Failed to load timeline");const N=await z.json();x(N.timeline||[])}catch(z){console.error("Error loading timeline:",z)}},p=async()=>{try{o(!0),a(null),console.log("Loading sessions...");const z=await fetch("/api/import/sessions",{credentials:"include"});if(console.log("Response status:",z.status),console.log("Response headers:",Object.fromEntries(z.headers.entries())),!z.ok){const A=await z.text();throw console.error("Error response:",A),new Error(`Failed to load sessions: ${z.status} ${z.statusText} - ${A}`)}const N=await z.json();console.log("Sessions data:",N);const ee=N.sessions||[];s(ee)}catch(z){console.error("Error loading sessions:",z),a(z.message||"Failed to load import sessions"),s([])}finally{o(!1)}},m=async()=>{if(d)try{u(!0),a(null);const z=new FormData;z.append("statement",d);const N=await fetch("/api/import/upload",{method:"POST",credentials:"include",body:z});if(!N.ok){const A=await N.json();throw new Error(A.error||`Upload failed: ${N.statusText}`)}const ee=await N.json();f(null),await p()}catch(z){a(z.message||"Failed to upload statement")}finally{u(!1)}},y=async z=>{if(confirm("Are you sure you want to delete this import session?"))try{const N=await fetch(`/api/import/sessions/${z}`,{method:"DELETE",credentials:"include"});if(!N.ok){const ee=await N.json();throw new Error(ee.error||"Failed to delete session")}await p()}catch(N){a(N.message||"Failed to delete session")}},j=z=>{b(z===g?null:z)},k=g?n.filter(z=>{const N=new Date(z.createdAt);return`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}`===g}):n,D={minHeight:"100vh",background:"#fefefe",fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#0f172a"},I={maxWidth:"1200px",margin:"0 auto",padding:"40px 24px"},R={backgroundColor:"#ffffff",border:"1px solid #f1f5f9",borderRadius:"16px",padding:"32px",marginBottom:"24px",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},_={padding:"12px 20px",borderRadius:"12px",border:"1px solid #e2e8f0",backgroundColor:"#ffffff",color:"#64748b",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",marginRight:"8px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},T={..._,backgroundColor:"#0f172a",color:"#ffffff",border:"1px solid #0f172a"},W={..._,backgroundColor:"#dc2626",color:"#ffffff",border:"1px solid #dc2626"},V=z=>{switch(z){case"completed":return"#059669";case"processing":return"#d97706";case"failed":return"#dc2626";default:return"#64748b"}},P=z=>{switch(z){case"completed":return r.jsx(_s,{size:14,strokeWidth:2});case"processing":return r.jsx(Ls,{size:14,strokeWidth:2});case"failed":return r.jsx(Si,{size:14,strokeWidth:2});default:return r.jsx(Ct,{size:14,strokeWidth:2})}},Z=z=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(Math.abs(z));return i?r.jsx("div",{style:D,children:r.jsxs("div",{style:I,children:[r.jsxs("div",{style:{marginBottom:"40px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",backgroundColor:"#0f172a",borderRadius:"8px"},children:r.jsx(ji,{size:18,color:"#ffffff",strokeWidth:2})}),r.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#0f172a",margin:"0",letterSpacing:"-0.025em"},children:"Bank Statement Import"})]}),r.jsx("p",{style:{fontSize:"16px",color:"#64748b",fontWeight:"400",margin:"0",lineHeight:"1.5"},children:"Loading import sessions..."})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",backgroundColor:"#f1f5f9",borderRadius:"16px",margin:"0 auto 24px"},children:r.jsx(Ls,{size:28,color:"#64748b",strokeWidth:1.5})}),r.jsx("div",{style:{fontSize:"18px",fontWeight:"500",color:"#0f172a",marginBottom:"8px"},children:"Loading..."}),r.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Fetching import sessions"})]})})]})}):r.jsx("div",{style:D,children:r.jsxs("div",{style:I,children:[r.jsxs("div",{style:{marginBottom:"40px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",backgroundColor:"#0f172a",borderRadius:"8px"},children:r.jsx(ji,{size:18,color:"#ffffff",strokeWidth:2})}),r.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#0f172a",margin:"0",letterSpacing:"-0.025em"},children:"Bank Statement Import"})]}),r.jsx("p",{style:{fontSize:"16px",color:"#64748b",fontWeight:"400",margin:"0",lineHeight:"1.5"},children:"Upload and manage your bank statement imports"})]}),l&&r.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"16px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(Si,{size:20,color:"#dc2626",strokeWidth:1.5}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#dc2626",marginBottom:"4px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Error"}),r.jsx("div",{style:{fontSize:"14px",color:"#dc2626",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:l})]})]}),r.jsxs("div",{style:R,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[r.jsx(so,{size:20,color:"#0f172a",strokeWidth:1.5}),r.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:"0"},children:"Upload Bank Statement"})]}),r.jsx("p",{style:{fontSize:"16px",color:"#64748b",marginBottom:"24px",lineHeight:"1.5"},children:"Upload a PDF bank statement to parse transactions and detect patterns across imports."}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"20px"},children:[r.jsx("input",{type:"file",accept:".pdf",onChange:z=>{var N;return f(((N=z.target.files)==null?void 0:N[0])||null)},style:{padding:"12px 16px",borderRadius:"12px",border:"1px solid #e2e8f0",fontSize:"14px",flex:1,fontFamily:"Inter, system-ui, -apple-system, sans-serif",backgroundColor:"#ffffff"}}),r.jsx("button",{style:d?T:{..._,cursor:"not-allowed",opacity:.5},onClick:m,disabled:!d||c,children:c?"Uploading...":"Upload Statement"})]}),r.jsxs("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"12px",padding:"16px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[r.jsx(vl,{size:20,color:"#0ea5e9",strokeWidth:1.5}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#0ea5e9",marginBottom:"4px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Auto-Detection"}),r.jsx("div",{style:{fontSize:"14px",color:"#0ea5e9",lineHeight:"1.4",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"System supports major UK banks including NatWest, Barclays, and HSBC. Automatically detects British Gas, Council Tax, Netflix, and more."})]})]}),d&&r.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"12px",padding:"8px 12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["Selected: ",d.name," (",Math.round(d.size/1024)," KB)"]})]}),h.length>0&&r.jsxs("div",{style:R,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(Nn,{size:20,color:"#0f172a",strokeWidth:1.5}),r.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:"0"},children:"Import Timeline"})]}),r.jsxs("button",{style:{...T,display:"flex",alignItems:"center",gap:"8px"},onClick:()=>t("/transactions"),onMouseEnter:z=>{z.currentTarget.style.backgroundColor="#1e293b",z.currentTarget.style.borderColor="#1e293b"},onMouseLeave:z=>{z.currentTarget.style.backgroundColor="#0f172a",z.currentTarget.style.borderColor="#0f172a"},children:[r.jsx(Hi,{size:18,strokeWidth:1.5}),"View All Transactions"]})]}),r.jsx(uS,{months:h,onMonthClick:j,selectedMonth:g}),g&&r.jsxs("div",{style:{marginTop:"16px",padding:"12px 16px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"12px",fontSize:"14px",color:"#0ea5e9",fontFamily:"Inter, system-ui, -apple-system, sans-serif",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("span",{children:["Showing imports from ",new Date(g+"-01").toLocaleDateString("en-GB",{month:"long",year:"numeric"})]}),r.jsx("button",{style:{padding:"4px 12px",borderRadius:"8px",border:"1px solid #0ea5e9",backgroundColor:"transparent",color:"#0ea5e9",cursor:"pointer",fontSize:"12px",fontWeight:"500",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onClick:()=>b(null),onMouseEnter:z=>{z.currentTarget.style.backgroundColor="#0ea5e9",z.currentTarget.style.color="#ffffff"},onMouseLeave:z=>{z.currentTarget.style.backgroundColor="transparent",z.currentTarget.style.color="#0ea5e9"},children:"Clear Filter"})]})]}),r.jsxs("div",{style:R,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(Ct,{size:20,color:"#0f172a",strokeWidth:1.5}),r.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:"0"},children:"Import Sessions"})]}),r.jsx("button",{style:_,onClick:p,onMouseEnter:z=>{z.currentTarget.style.backgroundColor="#f8fafc",z.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:z=>{z.currentTarget.style.backgroundColor="#ffffff",z.currentTarget.style.borderColor="#e2e8f0"},children:"Refresh"})]}),n.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"80px 40px",color:"#64748b"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",backgroundColor:"#f1f5f9",borderRadius:"16px",margin:"0 auto 24px"},children:r.jsx(Ct,{size:28,color:"#64748b",strokeWidth:1.5})}),r.jsx("p",{style:{fontSize:"16px",fontWeight:"500",margin:"0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"No import sessions found. Upload a bank statement to get started."})]}):k.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"80px 40px",color:"#64748b"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",backgroundColor:"#f1f5f9",borderRadius:"16px",margin:"0 auto 24px"},children:r.jsx(Ct,{size:28,color:"#64748b",strokeWidth:1.5})}),r.jsx("p",{style:{fontSize:"16px",fontWeight:"500",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"No imports found for selected month"}),r.jsx("button",{style:{..._,marginRight:0},onClick:()=>b(null),onMouseEnter:z=>{z.currentTarget.style.backgroundColor="#f8fafc",z.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:z=>{z.currentTarget.style.backgroundColor="#ffffff",z.currentTarget.style.borderColor="#e2e8f0"},children:"Show All Sessions"})]}):r.jsx("div",{style:{display:"grid",gap:"20px"},children:k.map(z=>r.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"16px",padding:"24px",backgroundColor:"#ffffff",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.05)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[r.jsx("div",{children:r.jsxs("div",{children:[r.jsx("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:"0 0 8px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:z.filename}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[r.jsx(Nn,{size:14,color:"#64748b",strokeWidth:1.5}),r.jsx("span",{style:{fontSize:"14px",color:"#64748b",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:new Date(z.createdAt).toLocaleDateString("en-GB")})]}),z.bank_name&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(ji,{size:14,color:"#64748b",strokeWidth:1.5}),r.jsx("span",{style:{fontSize:"14px",color:"#64748b",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:z.bank_name})]})]})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:`${V(z.status)}15`,color:V(z.status),fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[P(z.status),z.status.charAt(0).toUpperCase()+z.status.slice(1)]}),r.jsxs("button",{style:{...W,padding:"8px 12px",display:"flex",alignItems:"center",gap:"6px"},onClick:()=>y(z._id),onMouseEnter:N=>{N.currentTarget.style.backgroundColor="#b91c1c",N.currentTarget.style.borderColor="#b91c1c"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="#dc2626",N.currentTarget.style.borderColor="#dc2626"},children:[r.jsx($t,{size:14,strokeWidth:1.5}),"Delete"]})]})]}),z.statistics&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px"},children:[r.jsxs("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #f1f5f9"},children:[r.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",marginBottom:"4px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:z.statistics.total_transactions}),r.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:"500",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Transactions"})]}),r.jsxs("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[r.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#dc2626",marginBottom:"4px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:Z(z.statistics.total_debits)}),r.jsx("div",{style:{fontSize:"12px",color:"#dc2626",fontWeight:"500",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Debits"})]}),r.jsxs("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"12px",border:"1px solid #dcfce7"},children:[r.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#059669",marginBottom:"4px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:Z(z.statistics.total_credits)}),r.jsx("div",{style:{fontSize:"12px",color:"#16a34a",fontWeight:"500",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Credits"})]})]}),z.statistics&&z.statistics.total_transactions>0&&r.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#0f172a",marginBottom:"4px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[z.statistics.total_transactions," transactions imported"]}),r.jsx("div",{style:{fontSize:"13px",color:"#64748b",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"View and process transactions in the Transaction History page"})]}),r.jsxs("button",{style:{...T,display:"flex",alignItems:"center",gap:"8px",marginRight:0},onClick:()=>t("/transactions"),onMouseEnter:N=>{N.currentTarget.style.backgroundColor="#1e293b",N.currentTarget.style.borderColor="#1e293b"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="#0f172a",N.currentTarget.style.borderColor="#0f172a"},children:[r.jsx(Hi,{size:16,strokeWidth:1.5}),"View Transactions"]})]})]},z._id))})]})]})})}function Zf({confidence:e,onClick:t}){const n=Math.round(e*100),i=e>=.85?{backgroundColor:"#dcfce7",color:"#16a34a",label:"Strong Match"}:e>=.65?{backgroundColor:"#fef3c7",color:"#d97706",label:"Likely Match"}:{backgroundColor:"#f3f4f6",color:"#6b7280",label:"Possible Match"};return r.jsxs("span",{onClick:t,title:`${i.label} - ${n}% confidence`,style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",backgroundColor:i.backgroundColor,color:i.color,fontFamily:"Inter, system-ui, -apple-system, sans-serif",cursor:t?"pointer":"default",transition:"transform 0.2s ease"},onMouseEnter:o=>{t&&(o.currentTarget.style.transform="scale(1.05)")},onMouseLeave:o=>{t&&(o.currentTarget.style.transform="scale(1.0)")},children:[" ",n,"%"]})}function pS({status:e,recordId:t,recordDomain:n,ignoredReason:s}){const o=(()=>{switch(e){case"record_created":return{icon:r.jsx(_s,{size:14,strokeWidth:2}),label:"Entry Created",backgroundColor:"#dcfce7",color:"#16a34a",tooltip:t?`Record created in ${n} domain (ID: ${t.slice(-6)})`:"Entry Created"};case"ignored":return{icon:r.jsx(gv,{size:14,strokeWidth:2}),label:"Ignored",backgroundColor:"#f3f4f6",color:"#6b7280",tooltip:s?`Ignored: ${s}`:"Ignored"};case"pending":default:return{icon:r.jsx(Ls,{size:14,strokeWidth:2}),label:"Pending Review",backgroundColor:"#fef3c7",color:"#d97706",tooltip:"Pending Review - Needs action"}}})();return r.jsxs("span",{title:o.tooltip,style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"500",backgroundColor:o.backgroundColor,color:o.color,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[o.icon,o.label]})}const Kr="/api/v2",hS=async(e,t)=>{const n=new URLSearchParams;t!=null&&t.page&&n.append("page",t.page.toString()),t!=null&&t.limit&&n.append("limit",t.limit.toString()),t!=null&&t.search&&n.append("search",t.search),t!=null&&t.sort&&n.append("sort",t.sort);const s=`${Kr}/${e}${n.toString()?`?${n}`:""}`,i=await fetch(s,{credentials:"include"});if(!i.ok){const o=await i.json();throw new Error(o.error||`Failed to fetch ${e}`)}return i.json()},mS=async(e,t)=>{const n=await fetch(`${Kr}/${e}/${t}`,{credentials:"include"});if(!n.ok){if(n.status===404)throw new Error("Parent entity not found");const i=await n.json();throw new Error(i.error||"Failed to fetch parent entity")}const s=await n.json();return{...s.entity,childRecords:s.childRecords}},xS=async(e,t)=>{const n=await fetch(`${Kr}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to create parent entity")}return n.json()},yS=async(e,t,n)=>{const s=await fetch(`${Kr}/${e}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(!s.ok){if(s.status===404)throw new Error("Parent entity not found");const i=await s.json();throw new Error(i.error||"Failed to update parent entity")}return s.json()},gS=async(e,t)=>{const n=await fetch(`${Kr}/${e}/${t}`,{method:"DELETE",credentials:"include"});if(!n.ok){if(n.status===404)throw new Error("Parent entity not found");const s=await n.json();throw new Error(s.error||"Failed to delete parent entity")}},vS=async(e,t,n)=>{const s=new FormData;s.append("image",n);const i=await fetch(`${Kr}/${e}/${t}/image`,{method:"POST",credentials:"include",body:s});if(!i.ok){const o=await i.json();throw new Error(o.error||"Failed to upload image")}return i.json()},Cx=(e,t)=>`${Kr}/${e}/${t}/image`,kx=(e,t)=>Ye({queryKey:["parent-entities",e,t],queryFn:()=>hS(e,t),staleTime:3e4}),bS=(e,t)=>Ye({queryKey:["parent-entity",e,t],queryFn:()=>mS(e,t),enabled:!!t,staleTime:3e4}),jS=e=>{const t=be();return Te({mutationFn:n=>xS(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["parent-entities",e]}),t.invalidateQueries({queryKey:["domain-stats"]})},onError:n=>{console.error("Failed to create parent entity:",n.message)}})},SS=e=>{const t=be();return Te({mutationFn:({id:n,data:s})=>yS(e,n,s),onSuccess:(n,s)=>{t.invalidateQueries({queryKey:["parent-entity",e,s.id]}),t.invalidateQueries({queryKey:["parent-entities",e]}),t.invalidateQueries({queryKey:["domain-stats"]})},onError:n=>{console.error("Failed to update parent entity:",n.message)}})},Nx=e=>{const t=be();return Te({mutationFn:n=>gS(e,n),onSuccess:(n,s)=>{t.setQueryData(["parent-entities",e],i=>i&&{...i,entities:i.entities.filter(o=>o._id!==s),total:i.total-1}),t.invalidateQueries({queryKey:["parent-entities",e]}),t.invalidateQueries({queryKey:["parent-entity",e,s]}),t.invalidateQueries({queryKey:["domain-stats"]})},onError:n=>{console.error("Failed to delete parent entity:",n.message),t.invalidateQueries({queryKey:["parent-entities",e]})}})},ja=[{value:"Vehicle",label:"Vehicles",apiPath:"vehicles"},{value:"Property",label:"Properties",apiPath:"properties"},{value:"Employment",label:"Employment",apiPath:"employments"},{value:"Services",label:"Services",apiPath:"services"},{value:"Finance",label:"Finance",apiPath:"finance"}],wS=[{value:"Finance",label:"Finance",description:"Loans, payments, subscriptions"},{value:"Insurance",label:"Insurance",description:"Insurance policies"},{value:"ServiceHistory",label:"Service History",description:"Maintenance, repairs"},{value:"Government",label:"Government",description:"Tax, licenses"},{value:"Contact",label:"Contact",description:"Key contact person"},{value:"Pension",label:"Pension",description:"Pension schemes"}];function CS(e){const t=e.toLowerCase();return t.includes("car")||t.includes("vehicle")?t.includes("insurance")?{domain:"Vehicle",recordType:"Insurance"}:t.includes("finance")||t.includes("loan")?{domain:"Vehicle",recordType:"Finance"}:t.includes("service")||t.includes("mot")?{domain:"Vehicle",recordType:"ServiceHistory"}:{domain:"Vehicle",recordType:"Finance"}:t.includes("gas")||t.includes("electric")||t.includes("water")||t.includes("council tax")||t.includes("mortgage")||t.includes("rent")?{domain:"Property",recordType:"Finance"}:t.includes("netflix")||t.includes("spotify")||t.includes("broadband")||t.includes("phone")||t.includes("mobile")?{domain:"Services",recordType:"Finance"}:{domain:"Finance",recordType:"Finance"}}function kS({isOpen:e,onClose:t,onSuccess:n,transaction:s,sessionId:i}){const[o,l]=S.useState(""),[a,c]=S.useState(""),[u,d]=S.useState(""),[f,h]=S.useState(""),[x,g]=S.useState(""),[b,v]=S.useState(""),[p,m]=S.useState("monthly"),[y,j]=S.useState(""),[k,D]=S.useState(""),[I,R]=S.useState(""),[_,T]=S.useState(!1),[W,V]=S.useState(null),P=be(),Z=ja.find(Y=>Y.value===o),z=Z==null?void 0:Z.apiPath,{data:N,isLoading:ee}=kx(z,{limit:100}),A=(N==null?void 0:N.entities)||[];S.useEffect(()=>{if(s&&e){const Y=CS(s.description);l(Y.domain),d(Y.recordType);const me=s.description.replace(/PAYMENT|DD|DIRECT DEBIT|CARD|ONLINE|TO /gi,"").trim(),Oe=me.split(" "),L=Oe.length>=2?Oe.slice(0,2).join(" "):Oe[0];g(L||me),h(`${L||me} Payment`),v(Math.abs(s.amount).toFixed(2)),R(`From transaction: ${s.originalText}
Date: ${new Date(s.date).toLocaleDateString("en-GB")}`)}},[s,e]),S.useEffect(()=>{c("")},[o]);const K=async Y=>{Y.preventDefault(),V(null),T(!0);try{if(!o)throw new Error("Please select a domain");if(!a)throw new Error("Please select which "+o.toLowerCase()+" this belongs to");if(!u)throw new Error("Please select a record type");const me={recordType:u,name:f,provider:x,notes:I,status:"active"};b&&(me.amount=parseFloat(b)),p&&(me.frequency=p),y&&(me.phone=y),k&&(me.email=k),me.metadata={source:"bank_import",created_from_transaction:!0,original_description:s==null?void 0:s.description,transaction_amount:s==null?void 0:s.amount,transaction_date:s==null?void 0:s.date};const Oe=ja.find(Rt=>Rt.value===o),L=(Oe==null?void 0:Oe.apiPath)||o.toLowerCase(),de=await fetch(`/api/v2/${L}/${a}/records`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)});if(!de.ok){const Rt=await de.json();throw new Error(Rt.error||"Failed to create record")}const te=await de.json();if(s!=null&&s._id)try{await fetch(`/api/transactions/${s._id}/status`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"record_created",recordId:te._id,domain:o,parentId:a})})}catch(Rt){console.error("Failed to update transaction status:",Rt)}P.invalidateQueries({queryKey:["domain-stats"]}),P.invalidateQueries({queryKey:["transactions"]}),P.invalidateQueries({queryKey:["parent-entities",L],refetchType:"all"}),P.invalidateQueries({queryKey:["parent-entity",L,a]}),P.invalidateQueries({queryKey:["child-records",L,a]}),i&&P.invalidateQueries({queryKey:["import-session",i]}),X(),n(),t()}catch(me){V(me.message||"Failed to create record")}finally{T(!1)}},X=()=>{l(""),c(""),d(""),h(""),g(""),v(""),m("monthly"),j(""),D(""),R(""),V(null)},ae=()=>{X(),t()};if(!e||!s)return null;const ie={width:"100%",padding:"12px 14px",borderRadius:"10px",border:"1px solid #e2e8f0",fontSize:"14px",fontFamily:"Inter, sans-serif",backgroundColor:"#fefefe",boxSizing:"border-box"},Fe={display:"block",fontSize:"13px",fontWeight:"500",color:"#334155",marginBottom:"6px"};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(15, 23, 42, 0.4)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,fontFamily:"Inter, sans-serif"},onClick:ae,children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"20px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 25px 50px -12px rgba(15, 23, 42, 0.25)",border:"1px solid #f1f5f9"},onClick:Y=>Y.stopPropagation(),children:[r.jsxs("div",{style:{padding:"28px 28px 20px 28px",borderBottom:"1px solid #f1f5f9"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"14px"},children:[r.jsx("h2",{style:{fontSize:"22px",fontWeight:"600",color:"#0f172a",margin:0},children:"Create Record from Transaction"}),r.jsx("button",{onClick:ae,style:{background:"none",border:"none",cursor:"pointer",color:"#64748b",padding:"6px"},children:r.jsx(Et,{size:22,strokeWidth:1.5})})]}),r.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"14px",borderRadius:"10px",border:"1px solid #f1f5f9"},children:[r.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Transaction:"}),r.jsxs("div",{style:{fontWeight:"600",color:"#0f172a",marginBottom:"2px"},children:[s.description,"  ",Math.abs(s.amount).toFixed(2)]}),r.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:new Date(s.date).toLocaleDateString("en-GB")})]})]}),r.jsxs("form",{onSubmit:K,style:{padding:"28px",overflowY:"auto",flex:1},children:[W&&r.jsx("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"10px 14px",borderRadius:"10px",marginBottom:"20px",fontSize:"13px"},children:W}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("label",{style:Fe,children:[r.jsx(sx,{size:14,style:{display:"inline",marginRight:"6px",color:"#f59e0b"}}),"Domain *"]}),r.jsxs("select",{value:o,onChange:Y=>l(Y.target.value),required:!0,style:ie,children:[r.jsx("option",{value:"",children:"Select Domain"}),ja.map(Y=>r.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]}),o&&r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("label",{style:Fe,children:["Which ",o,"? *"]}),ee?r.jsx("div",{style:{...ie,color:"#94a3b8"},children:"Loading..."}):A.length===0?r.jsxs("div",{style:{...ie,color:"#dc2626",backgroundColor:"#fef2f2"},children:["No ",o.toLowerCase(),"s found. Create one first in the ",o," page."]}):r.jsxs("select",{value:a,onChange:Y=>c(Y.target.value),required:!0,style:ie,children:[r.jsxs("option",{value:"",children:["Select ",o]}),A.map(Y=>r.jsx("option",{value:Y._id,children:Y.name},Y._id))]})]}),a&&r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:Fe,children:"Record Type *"}),r.jsxs("select",{value:u,onChange:Y=>d(Y.target.value),required:!0,style:ie,children:[r.jsx("option",{value:"",children:"Select Type"}),wS.map(Y=>r.jsxs("option",{value:Y.value,children:[Y.label," - ",Y.description]},Y.value))]})]}),u&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"18px"},children:[r.jsx("label",{style:Fe,children:"Name *"}),r.jsx("input",{type:"text",value:f,onChange:Y=>h(Y.target.value),required:!0,style:ie,placeholder:"e.g., British Gas Bill"})]}),r.jsxs("div",{style:{marginBottom:"18px"},children:[r.jsx("label",{style:Fe,children:"Provider"}),r.jsx("input",{type:"text",value:x,onChange:Y=>g(Y.target.value),style:ie,placeholder:"e.g., British Gas"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"12px",marginBottom:"18px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:Fe,children:"Amount ()"}),r.jsx("input",{type:"number",step:"0.01",value:b,onChange:Y=>v(Y.target.value),style:ie})]}),r.jsxs("div",{children:[r.jsx("label",{style:Fe,children:"Frequency"}),r.jsxs("select",{value:p,onChange:Y=>m(Y.target.value),style:ie,children:[r.jsx("option",{value:"one-time",children:"One-time"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"quarterly",children:"Quarterly"}),r.jsx("option",{value:"annually",children:"Annually"})]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"18px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:Fe,children:"Phone"}),r.jsx("input",{type:"tel",value:y,onChange:Y=>j(Y.target.value),style:ie})]}),r.jsxs("div",{children:[r.jsx("label",{style:Fe,children:"Email"}),r.jsx("input",{type:"email",value:k,onChange:Y=>D(Y.target.value),style:ie})]})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:Fe,children:"Notes"}),r.jsx("textarea",{value:I,onChange:Y=>R(Y.target.value),rows:3,style:{...ie,resize:"vertical"}})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",paddingTop:"20px",borderTop:"1px solid #f1f5f9"},children:[r.jsx("button",{type:"button",onClick:ae,disabled:_,style:{padding:"10px 20px",borderRadius:"10px",fontSize:"14px",fontWeight:"500",cursor:"pointer",border:"1px solid #e2e8f0",backgroundColor:"#ffffff",color:"#64748b",fontFamily:"inherit"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:_||!o||!a||!u||!f,style:{padding:"10px 20px",borderRadius:"10px",fontSize:"14px",fontWeight:"600",cursor:_||!f?"not-allowed":"pointer",border:"none",backgroundColor:"#0f172a",color:"#ffffff",fontFamily:"inherit",opacity:_||!f?.5:1},children:_?"Creating...":"Create Record"})]})]})]})})}function NS({isOpen:e,onClose:t,onSuccess:n,transaction:s}){const[i,o]=S.useState(""),[l,a]=S.useState(""),[c,u]=S.useState(!1),[d,f]=S.useState(!1),[h,x]=S.useState(null);if(!e||!s)return null;const g=async T=>{if(T.preventDefault(),x(null),!i){x("Please select a reason");return}if(i==="other"&&!l.trim()){x("Please provide a reason");return}try{f(!0);const W=i==="other"?l:i,V=await fetch(`/api/transactions/${s._id}/ignore`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:W,alwaysIgnore:c,payeeName:y()})});if(!V.ok){const P=await V.json();throw new Error(P.error||"Failed to ignore transaction")}n(),b()}catch(W){console.error("Error ignoring transaction:",W),x(W.message||"Failed to ignore transaction")}finally{f(!1)}},b=()=>{o(""),a(""),u(!1),x(null)},v=()=>{b(),t()},p=T=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(Math.abs(T)),m=T=>new Date(T).toLocaleDateString("en-GB"),y=()=>{const T=s.description;if(T.length<=20)return T;const W=T.indexOf(" ",10);return W>0?T.substring(0,W):T.substring(0,20)},j=s.patternMatched&&(s.patternConfidence||0)>=.85,k=i==="one_time"||i==="personal",D={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(15, 23, 42, 0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},I={backgroundColor:"#ffffff",borderRadius:"16px",width:"90%",maxWidth:"480px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},R={padding:"12px 20px",borderRadius:"12px",border:"1px solid #e2e8f0",backgroundColor:"#ffffff",color:"#64748b",cursor:d?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",fontFamily:"Inter, system-ui, -apple-system, sans-serif",opacity:d?.5:1},_={...R,backgroundColor:"#dc2626",color:"#ffffff",border:"1px solid #dc2626"};return r.jsx("div",{style:D,onClick:v,children:r.jsxs("div",{style:I,onClick:T=>T.stopPropagation(),children:[r.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid #f1f5f9",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:"0 0 4px 0"},children:"Ignore Transaction"}),r.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:[p(s.amount),"  ",m(s.date)]}),r.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"4px"},children:s.description})]}),r.jsx("button",{onClick:v,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b"},children:r.jsx(Et,{size:20,strokeWidth:1.5})})]}),r.jsxs("form",{onSubmit:g,children:[r.jsxs("div",{style:{padding:"24px"},children:[j&&r.jsxs("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #fde68a",borderRadius:"12px",padding:"12px 16px",marginBottom:"20px",display:"flex",gap:"12px",alignItems:"flex-start"},children:[r.jsx(Si,{size:18,color:"#d97706",strokeWidth:2}),r.jsxs("div",{style:{fontSize:"13px",color:"#92400e",lineHeight:"1.4"},children:[r.jsx("strong",{style:{display:"block",marginBottom:"4px"},children:"Recurring Payment Detected"}),"This appears to be a recurring payment (",Math.round((s.patternConfidence||0)*100),"% confidence). Are you sure you want to ignore it?"]})]}),h&&r.jsx("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"12px 16px",marginBottom:"20px",color:"#dc2626",fontSize:"14px"},children:h}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#0f172a",marginBottom:"8px"},children:["Reason ",r.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),r.jsxs("select",{value:i,onChange:T=>o(T.target.value),required:!0,style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",backgroundColor:"#ffffff"},children:[r.jsx("option",{value:"",children:"Select a reason..."}),r.jsx("option",{value:"one_time",children:"One-time purchase"}),r.jsx("option",{value:"personal",children:"Personal (not household)"}),r.jsx("option",{value:"already_covered",children:"Already covered by existing record"}),r.jsx("option",{value:"other",children:"Other (specify)"})]})]}),i==="other"&&r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#0f172a",marginBottom:"8px"},children:["Custom Reason ",r.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),r.jsx("input",{type:"text",value:l,onChange:T=>a(T.target.value),placeholder:"Explain why you're ignoring this...",required:!0,style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",backgroundColor:"#ffffff"}})]}),k&&r.jsx("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #f1f5f9",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:r.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:c,onChange:T=>u(T.target.checked),style:{marginTop:"2px",cursor:"pointer"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"14px",fontWeight:"500",color:"#0f172a",marginBottom:"4px"},children:['Always ignore transactions from "',y(),'"']}),r.jsx("div",{style:{fontSize:"12px",color:"#64748b",lineHeight:"1.4"},children:"Future imports will automatically ignore transactions matching this payee"})]})]})})]}),r.jsxs("div",{style:{padding:"20px 24px",borderTop:"1px solid #f1f5f9",display:"flex",justifyContent:"space-between",gap:"12px"},children:[r.jsx("button",{type:"button",onClick:v,disabled:d,style:R,onMouseEnter:T=>{d||(T.currentTarget.style.backgroundColor="#f8fafc",T.currentTarget.style.borderColor="#cbd5e1")},onMouseLeave:T=>{d||(T.currentTarget.style.backgroundColor="#ffffff",T.currentTarget.style.borderColor="#e2e8f0")},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:d,style:_,onMouseEnter:T=>{d||(T.currentTarget.style.backgroundColor="#b91c1c",T.currentTarget.style.borderColor="#b91c1c")},onMouseLeave:T=>{d||(T.currentTarget.style.backgroundColor="#dc2626",T.currentTarget.style.borderColor="#dc2626")},children:d?"Ignoring...":c?"Create Ignore Rule":"Ignore Transaction"})]})]})]})})}function ES({isVisible:e=!0,onClose:t}){const[n,s]=S.useState([]),[i,o]=S.useState(!0),[l,a]=S.useState(null),c=Me();S.useEffect(()=>{u()},[]);const u=async()=>{try{o(!0),a(null);const I=await fetch("/api/patterns/recurring?minConfidence=0.65",{credentials:"include"});if(!I.ok)throw new Error("Failed to load patterns");const _=(await I.json()).patterns.slice(0,5);s(_)}catch(I){console.error("Error loading patterns:",I),a(I.message||"Failed to load patterns")}finally{o(!1)}},d=I=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(Math.abs(I)),f=I=>({weekly:"Weekly",monthly:"Monthly",quarterly:"Quarterly",annually:"Annual",irregular:"Irregular"})[I]||I,h=I=>({weekly:"#3b82f6",monthly:"#8b5cf6",quarterly:"#ec4899",annually:"#f59e0b",irregular:"#64748b"})[I]||"#64748b",x=I=>I>=.85?{bg:"#dcfce7",border:"#bbf7d0",text:"#15803d"}:I>=.65?{bg:"#fef3c7",border:"#fde68a",text:"#92400e"}:{bg:"#f3f4f6",border:"#e5e7eb",text:"#374151"},g=(I,R)=>{if(!I)return"Unknown";const T={property:"Property",vehicles:"Vehicles",finance:"Finance",employment:"Employment",government:"Government",insurance:"Insurance",legal:"Legal",services:"Services"}[I]||I;return R?`${T} > ${R}`:T},b=I=>{c(`/transaction-history?pattern=${I}`)},v=I=>{c(`/transaction-history?pattern=${I._id}&action=create`)};if(!e)return null;const p={width:"320px",backgroundColor:"#ffffff",borderLeft:"1px solid #f1f5f9",height:"100%",display:"flex",flexDirection:"column",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},m={padding:"24px",borderBottom:"1px solid #f1f5f9",display:"flex",alignItems:"center",gap:"12px"},y={flex:1,overflowY:"auto",padding:"20px"},j=I=>{const R=x(I);return{backgroundColor:R.bg,border:`1px solid ${R.border}`,borderRadius:"12px",padding:"16px",marginBottom:"16px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}},k={padding:"8px 12px",borderRadius:"8px",border:"1px solid #e2e8f0",backgroundColor:"#ffffff",color:"#64748b",cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",fontFamily:"Inter, system-ui, -apple-system, sans-serif",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"6px"},D={...k,backgroundColor:"#0f172a",color:"#ffffff",border:"1px solid #0f172a"};return r.jsxs("div",{style:p,children:[r.jsxs("div",{style:m,children:[r.jsx(vl,{size:20,strokeWidth:1.5,color:"#0f172a"}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:0,flex:1},children:"Pattern Insights"}),t&&r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b"},children:""})]}),r.jsxs("div",{style:y,children:[i&&r.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#64748b"},children:r.jsx("div",{style:{fontSize:"14px"},children:"Loading patterns..."})}),l&&r.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"12px 16px",color:"#dc2626",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(at,{size:16}),r.jsx("span",{children:l})]}),!i&&!l&&n.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#64748b"},children:[r.jsx(vl,{size:48,strokeWidth:1,color:"#cbd5e1",style:{marginBottom:"16px"}}),r.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"No Patterns Detected Yet"}),r.jsx("div",{style:{fontSize:"13px",lineHeight:"1.5",color:"#94a3b8"},children:"Import more bank statements to help us detect recurring payments and subscriptions."})]}),!i&&!l&&n.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"16px"},children:["Top ",n.length," detected recurring patterns"]}),n.map(I=>{const R=x(I.confidence);return r.jsxs("div",{style:j(I.confidence),children:[r.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#0f172a",marginBottom:"8px"},children:I.payee}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",flexWrap:"wrap"},children:[r.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",backgroundColor:h(I.frequency),color:"#ffffff"},children:f(I.frequency)}),r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",backgroundColor:R.text,color:"#ffffff"},children:[Math.round(I.confidence*100),"% confidence"]})]}),r.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"8px"},children:["Found in ",I.occurrences," import",I.occurrences!==1?"s":""]}),r.jsxs("div",{style:{fontSize:"14px",fontWeight:"500",color:"#0f172a",marginBottom:"8px"},children:[d(I.averageAmount)," avg"]}),I.suggestedDomain&&r.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"12px"},children:g(I.suggestedDomain,I.suggestedRecordType)}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[r.jsxs("button",{style:D,onClick:()=>v(I),onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#1e293b",_.currentTarget.style.borderColor="#1e293b"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="#0f172a",_.currentTarget.style.borderColor="#0f172a"},children:[r.jsx(ro,{size:14,strokeWidth:1.5}),"Create Entry"]}),r.jsxs("button",{style:k,onClick:()=>b(I._id),onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#f8fafc",_.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="#ffffff",_.currentTarget.style.borderColor="#e2e8f0"},children:[r.jsx(Dv,{size:14,strokeWidth:1.5}),"View"]})]})]},I._id)})]})]})]})}function TS(){const{user:e}=yr(),[t,n]=Am(),[s,i]=S.useState([]),[o,l]=S.useState({total:0,pending:0,recordCreated:0,ignored:0}),[a,c]=S.useState(!0),[u,d]=S.useState(null),[f,h]=S.useState(new Set),[x,g]=S.useState(t.get("status")||"all"),[b,v]=S.useState(t.get("search")||""),[p,m]=S.useState(t.get("startDate")||""),[y,j]=S.useState(t.get("endDate")||""),[k,D]=S.useState(1),[I,R]=S.useState(1),_=50,[T,W]=S.useState({isOpen:!1,transaction:null}),[V,P]=S.useState({isOpen:!1,transaction:null});S.useEffect(()=>{const L=setTimeout(()=>{b?t.set("search",b):t.delete("search"),n(t)},300);return()=>clearTimeout(L)},[b]),S.useEffect(()=>{x&&x!=="all"?t.set("status",x):t.delete("status"),p?t.set("startDate",p):t.delete("startDate"),y?t.set("endDate",y):t.delete("endDate"),n(t),D(1)},[x,p,y]),S.useEffect(()=>{Z()},[x,b,p,y,k]);const Z=async()=>{var L;try{c(!0),d(null);const de=new URLSearchParams({page:k.toString(),limit:_.toString()});x&&x!=="all"&&de.append("status",x),b&&de.append("search",b),p&&de.append("startDate",p),y&&de.append("endDate",y);const te=await fetch(`/api/transactions?${de.toString()}`,{credentials:"include"});if(!te.ok)throw new Error("Failed to load transactions");const Rt=await te.json();i(Rt.transactions||[]),R(((L=Rt.pagination)==null?void 0:L.totalPages)||1),z()}catch(de){console.error("Error loading transactions:",de),d(de.message||"Failed to load transactions")}finally{c(!1)}},z=async()=>{try{const L=await fetch("/api/transactions/stats",{credentials:"include"});if(L.ok){const de=await L.json();l(de)}}catch(L){console.error("Error loading stats:",L)}},N=L=>{const de=new Set(f);de.has(L)?de.delete(L):de.add(L),h(de)},ee=()=>{g("all"),v(""),m(""),j(""),n({}),D(1)},A=L=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(Math.abs(L)),K=L=>new Date(L).toLocaleDateString("en-GB"),X=L=>{W({isOpen:!0,transaction:L})},ae=L=>{P({isOpen:!0,transaction:L})},ie=async L=>{try{if(!(await fetch(`/api/transactions/${L}/ignore`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to undo ignore");Z()}catch(de){console.error("Error undoing ignore:",de),d(de.message||"Failed to undo ignore")}},Fe={minHeight:"100vh",background:"#fefefe",fontFamily:"Inter, system-ui, -apple-system, sans-serif",color:"#0f172a"},Y={maxWidth:"1400px",margin:"0 auto",padding:"40px 24px"},me={padding:"12px 20px",borderRadius:"12px",border:"1px solid #e2e8f0",backgroundColor:"#ffffff",color:"#64748b",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},Oe={...me,backgroundColor:"#0f172a",color:"#ffffff",border:"1px solid #0f172a"};return a&&s.length===0?r.jsx("div",{style:Fe,children:r.jsx("div",{style:Y,children:r.jsx("div",{style:{textAlign:"center",padding:"80px 20px"},children:r.jsx("div",{style:{fontSize:"18px",fontWeight:"500",color:"#0f172a",marginBottom:"8px"},children:"Loading transactions..."})})})}):r.jsxs("div",{style:Fe,children:[r.jsxs("div",{style:Y,children:[r.jsxs("div",{style:{marginBottom:"40px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",backgroundColor:"#0f172a",borderRadius:"8px"},children:r.jsx(Hi,{size:18,color:"#ffffff",strokeWidth:2})}),r.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#0f172a",margin:"0",letterSpacing:"-0.025em"},children:"Transaction History"})]}),r.jsxs("div",{style:{fontSize:"16px",color:"#64748b",fontWeight:"400",margin:"0",lineHeight:"1.5"},children:[o.total," total | ",o.pending," pending | ",o.recordCreated," created | ",o.ignored," ignored"]})]}),u&&r.jsx("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"16px",marginBottom:"24px",color:"#dc2626",fontSize:"14px"},children:u}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr 320px",gap:"24px"},children:[r.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #f1f5f9",borderRadius:"16px",padding:"24px",height:"fit-content",position:"sticky",top:"24px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[r.jsx(ex,{size:18,color:"#0f172a",strokeWidth:1.5}),r.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#0f172a",margin:"0"},children:"Filters"})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#0f172a",marginBottom:"8px"},children:"Status"}),r.jsxs("select",{value:x,onChange:L=>g(L.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",backgroundColor:"#ffffff"},children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"record_created",children:"Record Created"}),r.jsx("option",{value:"ignored",children:"Ignored"})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#0f172a",marginBottom:"8px"},children:"Date Range"}),r.jsx("input",{type:"date",value:p,onChange:L=>m(L.target.value),placeholder:"Start date",style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",marginBottom:"8px",backgroundColor:"#ffffff"}}),r.jsx("input",{type:"date",value:y,onChange:L=>j(L.target.value),placeholder:"End date",style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",backgroundColor:"#ffffff"}})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#0f172a",marginBottom:"8px"},children:"Search"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(rx,{size:16,color:"#64748b",style:{position:"absolute",left:"12px",top:"12px"}}),r.jsx("input",{type:"text",value:b,onChange:L=>v(L.target.value),placeholder:"Search by payee or description...",style:{width:"100%",padding:"10px 12px 10px 36px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",backgroundColor:"#ffffff"}})]})]}),r.jsx("button",{onClick:ee,style:{...me,width:"100%"},children:"Clear Filters"})]}),r.jsx("div",{children:r.jsx("div",{style:{backgroundColor:"#ffffff",border:"1px solid #f1f5f9",borderRadius:"16px",overflow:"hidden",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)"},children:s.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"80px 20px",color:"#64748b"},children:[r.jsx(Hi,{size:48,color:"#cbd5e1",strokeWidth:1.5,style:{margin:"0 auto 16px"}}),r.jsx("p",{style:{fontSize:"16px",fontWeight:"500",margin:"0"},children:b||x!=="all"||p||y?"No transactions match your filters. Try adjusting your search criteria.":"No transactions yet. Upload your first bank statement to get started."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("table",{style:{width:"100%",fontSize:"13px",borderCollapse:"collapse",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"1px solid #e2e8f0"},children:[r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",width:"40px"}}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600"},children:"Date"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600"},children:"Description"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:"600",width:"100px"},children:"Pattern"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600"},children:"Amount"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:"600",width:"140px"},children:"Status"})]})}),r.jsx("tbody",{children:s.map(L=>{const de=f.has(L._id);return r.jsxs(se.Fragment,{children:[r.jsxs("tr",{onClick:()=>N(L._id),style:{borderBottom:"1px solid #f1f5f9",cursor:"pointer",backgroundColor:de?"#f8fafc":"transparent"},onMouseEnter:te=>{de||(te.currentTarget.style.backgroundColor="#fafbfc")},onMouseLeave:te=>{de||(te.currentTarget.style.backgroundColor="transparent")},children:[r.jsx("td",{style:{padding:"12px 16px"},children:de?r.jsx(Bl,{size:16,color:"#64748b"}):r.jsx(Ms,{size:16,color:"#64748b"})}),r.jsx("td",{style:{padding:"12px 16px",color:"#334155"},children:K(L.date)}),r.jsx("td",{style:{padding:"12px 16px",color:"#334155",maxWidth:"300px"},children:r.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:L.description})}),r.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:L.patternMatched&&L.patternConfidence?r.jsx(Zf,{confidence:L.patternConfidence}):r.jsx("span",{style:{fontSize:"10px",color:"#cbd5e1"},children:"-"})}),r.jsx("td",{style:{padding:"12px 16px",textAlign:"right",fontWeight:"600",color:L.amount<0?"#dc2626":"#059669"},children:A(L.amount)}),r.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:r.jsx(pS,{status:L.status,recordId:L.createdRecordId,recordDomain:L.createdRecordDomain,ignoredReason:L.ignoredReason})})]}),de&&r.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:r.jsx("td",{colSpan:6,style:{padding:"20px 24px"},children:r.jsxs("div",{style:{fontSize:"13px",color:"#475569",lineHeight:"1.6"},children:[r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("strong",{children:"Full Description:"})," ",L.description]}),L.reference&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("strong",{children:"Reference:"})," ",L.reference]}),L.balance!==void 0&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("strong",{children:"Balance after:"})," ",A(L.balance)]}),r.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#f1f5f9",borderRadius:"8px",fontFamily:"ui-monospace, SFMono-Regular, Menlo, monospace",fontSize:"11px",color:"#64748b"},children:[r.jsx("strong",{style:{display:"block",marginBottom:"4px"},children:"Original PDF Text:"}),L.originalText]}),L.patternMatched&&L.patternConfidence&&r.jsxs("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:L.patternConfidence>=.85?"#dcfce7":L.patternConfidence>=.65?"#fef3c7":"#f3f4f6",border:`1px solid ${L.patternConfidence>=.85?"#bbf7d0":L.patternConfidence>=.65?"#fde68a":"#e5e7eb"}`,borderRadius:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[r.jsx(Zf,{confidence:L.patternConfidence}),r.jsx("strong",{style:{fontSize:"14px",color:"#0f172a"},children:"Recurring Pattern Detected"})]}),r.jsxs("div",{style:{fontSize:"13px",color:"#64748b",lineHeight:"1.5"},children:["This transaction matches a pattern with ",Math.round(L.patternConfidence*100),"% confidence.",L.patternConfidence>=.85&&" This is a strong match - likely a recurring payment.",L.patternConfidence>=.65&&L.patternConfidence<.85&&" This appears to be a recurring payment."]})]}),r.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"12px"},children:[L.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{style:{...Oe,fontSize:"13px",padding:"8px 16px"},onClick:te=>{te.stopPropagation(),X(L)},onMouseEnter:te=>{te.currentTarget.style.backgroundColor="#1e293b",te.currentTarget.style.borderColor="#1e293b"},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="#0f172a",te.currentTarget.style.borderColor="#0f172a"},children:"Create Entry"}),r.jsx("button",{style:{...me,fontSize:"13px",padding:"8px 16px"},onClick:te=>{te.stopPropagation(),ae(L)},onMouseEnter:te=>{te.currentTarget.style.backgroundColor="#f8fafc",te.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="#ffffff",te.currentTarget.style.borderColor="#e2e8f0"},children:"Ignore"})]}),L.status==="ignored"&&r.jsx("button",{style:{...me,fontSize:"13px",padding:"8px 16px"},onClick:te=>{te.stopPropagation(),ie(L._id)},onMouseEnter:te=>{te.currentTarget.style.backgroundColor="#f8fafc",te.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="#ffffff",te.currentTarget.style.borderColor="#e2e8f0"},children:"Undo Ignore"}),L.status==="record_created"&&L.createdRecordId&&L.createdRecordDomain&&r.jsxs(ge,{to:`/${L.createdRecordDomain}/${L.createdRecordId}`,style:{...me,fontSize:"13px",padding:"8px 16px",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"8px"},onClick:te=>te.stopPropagation(),onMouseEnter:te=>{te.currentTarget.style.backgroundColor="#f8fafc",te.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="#ffffff",te.currentTarget.style.borderColor="#e2e8f0"},children:[r.jsx(ro,{size:14,strokeWidth:1.5}),"View Record"]})]})]})})})]},L._id)})})]}),I>1&&r.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid #f1f5f9",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:["Page ",k," of ",I]}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>D(Math.max(1,k-1)),disabled:k===1,style:{...me,padding:"8px 16px",opacity:k===1?.5:1,cursor:k===1?"not-allowed":"pointer"},children:"Previous"}),r.jsx("button",{onClick:()=>D(Math.min(I,k+1)),disabled:k===I,style:{...me,padding:"8px 16px",opacity:k===I?.5:1,cursor:k===I?"not-allowed":"pointer"},children:"Next"})]})]})]})})}),r.jsx(ES,{})]})]}),r.jsx(kS,{isOpen:T.isOpen,onClose:()=>W({isOpen:!1,transaction:null}),onSuccess:()=>{W({isOpen:!1,transaction:null}),Z()},transaction:T.transaction}),r.jsx(NS,{isOpen:V.isOpen,onClose:()=>P({isOpen:!1,transaction:null}),onSuccess:()=>{P({isOpen:!1,transaction:null}),Z()},transaction:V.transaction})]})}const Fo=43200,ep=1440,tp=Symbol.for("constructDateFrom");function Jd(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&tp in e?e[tp](t):e instanceof Date?new e.constructor(t):new Date(t)}function dr(e,t){return Jd(e,e)}let IS={};function RS(){return IS}function np(e){const t=dr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Xd(e,...t){const n=Jd.bind(null,e||t.find(s=>typeof s=="object"));return t.map(n)}function Ho(e,t){const n=+dr(e)-+dr(t);return n<0?-1:n>0?1:n}function FS(e){return Jd(e,Date.now())}function zS(e,t,n){const[s,i]=Xd(n==null?void 0:n.in,e,t),o=s.getFullYear()-i.getFullYear(),l=s.getMonth()-i.getMonth();return o*12+l}function DS(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function PS(e,t){return+dr(e)-+dr(t)}function MS(e,t){const n=dr(e);return n.setHours(23,59,59,999),n}function _S(e,t){const n=dr(e),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function LS(e,t){const n=dr(e);return+MS(n)==+_S(n)}function AS(e,t,n){const[s,i,o]=Xd(n==null?void 0:n.in,e,e,t),l=Ho(i,o),a=Math.abs(zS(i,o));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-l*a);let c=Ho(i,o)===-l;LS(s)&&a===1&&Ho(s,o)===1&&(c=!1);const u=l*(a-+c);return u===0?0:u}function OS(e,t,n){const s=PS(e,t)/1e3;return DS(n==null?void 0:n.roundingMethod)(s)}const WS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BS=(e,t,n)=>{let s;const i=WS[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Sa(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const $S={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},US={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HS={date:Sa({formats:$S,defaultWidth:"full"}),time:Sa({formats:US,defaultWidth:"full"}),dateTime:Sa({formats:VS,defaultWidth:"full"})},qS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},QS=(e,t,n,s)=>qS[e];function si(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):l;i=e.formattingValues[a]||e.formattingValues[l]}else{const l=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[a]||e.values[l]}const o=e.argumentCallback?e.argumentCallback(t):t;return i[o]}}const KS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},YS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ew=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tw={ordinalNumber:ew,era:si({values:KS,defaultWidth:"wide"}),quarter:si({values:GS,defaultWidth:"wide",argumentCallback:e=>e-1}),month:si({values:YS,defaultWidth:"wide"}),day:si({values:JS,defaultWidth:"wide"}),dayPeriod:si({values:XS,defaultWidth:"wide",formattingValues:ZS,defaultFormattingWidth:"wide"})};function ii(e){return(t,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const l=o[0],a=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(a)?rw(a,f=>f.test(l)):nw(a,f=>f.test(l));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(l.length);return{value:u,rest:d}}}function nw(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function rw(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function sw(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const i=s[0],o=t.match(e.parsePattern);if(!o)return null;let l=e.valueCallback?e.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const a=t.slice(i.length);return{value:l,rest:a}}}const iw=/^(\d+)(th|st|nd|rd)?/i,ow=/\d+/i,lw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aw={any:[/^b/i,/^(a|c)/i]},cw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dw={any:[/1/i,/2/i,/3/i,/4/i]},uw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yw={ordinalNumber:sw({matchPattern:iw,parsePattern:ow,valueCallback:e=>parseInt(e,10)}),era:ii({matchPatterns:lw,defaultMatchWidth:"wide",parsePatterns:aw,defaultParseWidth:"any"}),quarter:ii({matchPatterns:cw,defaultMatchWidth:"wide",parsePatterns:dw,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ii({matchPatterns:uw,defaultMatchWidth:"wide",parsePatterns:fw,defaultParseWidth:"any"}),day:ii({matchPatterns:pw,defaultMatchWidth:"wide",parsePatterns:hw,defaultParseWidth:"any"}),dayPeriod:ii({matchPatterns:mw,defaultMatchWidth:"any",parsePatterns:xw,defaultParseWidth:"any"})},gw={code:"en-US",formatDistance:BS,formatLong:HS,formatRelative:QS,localize:tw,match:yw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vw(e,t,n){const s=RS(),i=(n==null?void 0:n.locale)??s.locale??gw,o=2520,l=Ho(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l}),[c,u]=Xd(n==null?void 0:n.in,...l>0?[t,e]:[e,t]),d=OS(u,c),f=(np(u)-np(c))/1e3,h=Math.round((d-f)/60);let x;if(h<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):h===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",h,a);if(h<45)return i.formatDistance("xMinutes",h,a);if(h<90)return i.formatDistance("aboutXHours",1,a);if(h<ep){const g=Math.round(h/60);return i.formatDistance("aboutXHours",g,a)}else{if(h<o)return i.formatDistance("xDays",1,a);if(h<Fo){const g=Math.round(h/ep);return i.formatDistance("xDays",g,a)}else if(h<Fo*2)return x=Math.round(h/Fo),i.formatDistance("aboutXMonths",x,a)}if(x=AS(u,c),x<12){const g=Math.round(h/Fo);return i.formatDistance("xMonths",g,a)}else{const g=x%12,b=Math.trunc(x/12);return g<3?i.formatDistance("aboutXYears",b,a):g<9?i.formatDistance("overXYears",b,a):i.formatDistance("almostXYears",b+1,a)}}function bw(e,t){return vw(e,FS(e),t)}const jw=e=>{switch(e){case"Vehicle":return r.jsx(Wt,{size:24,strokeWidth:1.5});case"Property":return r.jsx(In,{size:24,strokeWidth:1.5});case"Employment":return r.jsx(xr,{size:24,strokeWidth:1.5});case"Services":return r.jsx(Rn,{size:24,strokeWidth:1.5});case"Finance":return r.jsx(Hr,{size:24,strokeWidth:1.5});default:return r.jsx(Wt,{size:24,strokeWidth:1.5})}},Sw=(e,t)=>`/${{Vehicle:"vehicles",Property:"properties",Employment:"employments",Services:"services",Finance:"finance"}[e]||"vehicles"}/${t}`,ww=({entity:e,onEdit:t,onDelete:n,childRecordCount:s=0})=>{var h,x,g,b,v,p,m,y,j,k,D,I;const i=Me(),[o,l]=S.useState(!1),a=R=>{R.target.closest(".action-menu")||i(Sw(e.domainType,e._id))},c=R=>{R.stopPropagation(),l(!1),t(e)},u=R=>{R.stopPropagation(),l(!1),n(e)},d=bw(new Date(e.updatedAt),{addSuffix:!0}),f=()=>({Vehicle:"vehicles",Property:"properties",Employment:"employments",Services:"services",Finance:"finance"});return r.jsxs("div",{onClick:a,style:{position:"relative",background:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"16px",overflow:"hidden",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif",display:"flex",flexDirection:"column",height:"100%",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},onMouseEnter:R=>{R.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",R.currentTarget.style.transform="translateY(-2px)",R.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:R=>{R.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.05)",R.currentTarget.style.transform="translateY(0)",R.currentTarget.style.borderColor="#e2e8f0"},children:[e.image&&r.jsx("div",{style:{width:"100%",height:"160px",backgroundColor:"#f8fafc",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("img",{src:Cx(f()[e.domainType],e._id),alt:e.name,style:{maxWidth:"100%",maxHeight:"160px",width:"auto",height:"auto",objectFit:"contain"}})}),r.jsxs("div",{style:{padding:"20px",flex:1,display:"flex",flexDirection:"column",position:"relative"},children:[r.jsxs("div",{className:"action-menu",style:{position:"absolute",top:"4px",right:"4px"},children:[r.jsx("button",{onClick:R=>{R.stopPropagation(),l(!o)},style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b"},onMouseEnter:R=>{R.currentTarget.style.background="#f1f5f9",R.currentTarget.style.color="#0f172a"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color="#64748b"},children:r.jsx(Tv,{size:20})}),o&&r.jsxs("div",{style:{position:"absolute",top:"32px",right:"0",background:"#ffffff",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.1)",overflow:"hidden",minWidth:"140px",zIndex:10},children:[r.jsxs("button",{onClick:c,style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"12px 16px",background:"transparent",border:"none",cursor:"pointer",fontSize:"14px",color:"#0f172a",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:R=>{R.currentTarget.style.background="#f8fafc"},onMouseLeave:R=>{R.currentTarget.style.background="transparent"},children:[r.jsx(ix,{size:16}),"Edit"]}),r.jsxs("button",{onClick:u,style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"12px 16px",background:"transparent",border:"none",cursor:"pointer",fontSize:"14px",color:"#ef4444",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:R=>{R.currentTarget.style.background="#fef2f2"},onMouseLeave:R=>{R.currentTarget.style.background="transparent"},children:[r.jsx($t,{size:16}),"Delete"]})]})]}),r.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"12px",background:"#f1f5f9",borderRadius:"12px",color:"#0f172a",marginBottom:"16px"},children:jw(e.domainType)}),r.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:"0 0 12px 0",lineHeight:"1.4",letterSpacing:"-0.01em"},children:e.name}),r.jsxs("div",{style:{marginBottom:"16px",flex:1},children:[e.domainType==="Vehicle"&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[((h=e.fields)==null?void 0:h.make)&&((x=e.fields)==null?void 0:x.model)&&r.jsxs("p",{style:{fontSize:"14px",color:"#475569",margin:0,fontWeight:"500"},children:[e.fields.make," ",e.fields.model]}),((g=e.fields)==null?void 0:g.year)&&r.jsxs("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:["Year: ",e.fields.year]}),((b=e.fields)==null?void 0:b.registration)&&r.jsxs("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:["Reg: ",e.fields.registration]})]}),e.domainType==="Property"&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[((v=e.fields)==null?void 0:v.address)&&r.jsx("p",{style:{fontSize:"14px",color:"#475569",margin:0,fontWeight:"500"},children:e.fields.address}),((p=e.fields)==null?void 0:p.type)&&r.jsx("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:e.fields.type})]}),e.domainType==="Employment"&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[((m=e.fields)==null?void 0:m.employer)&&r.jsx("p",{style:{fontSize:"14px",color:"#475569",margin:0,fontWeight:"500"},children:e.fields.employer}),((y=e.fields)==null?void 0:y.jobTitle)&&r.jsx("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:e.fields.jobTitle})]}),e.domainType==="Services"&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[((j=e.fields)==null?void 0:j.businessName)&&r.jsx("p",{style:{fontSize:"14px",color:"#475569",margin:0,fontWeight:"500"},children:e.fields.businessName}),((k=e.fields)==null?void 0:k.serviceType)&&r.jsx("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:e.fields.serviceType})]}),e.domainType==="Finance"&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[((D=e.fields)==null?void 0:D.institution)&&r.jsx("p",{style:{fontSize:"14px",color:"#475569",margin:0,fontWeight:"500"},children:e.fields.institution}),((I=e.fields)==null?void 0:I.accountType)&&r.jsx("p",{style:{fontSize:"13px",color:"#64748b",margin:0},children:e.fields.accountType})]})]}),r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:s>0?"rgba(59, 130, 246, 0.1)":"rgba(148, 163, 184, 0.1)",borderRadius:"8px",marginBottom:"12px"},children:[r.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:s>0?"#3b82f6":"#94a3b8"}}),r.jsxs("span",{style:{fontSize:"13px",fontWeight:"500",color:s>0?"#3b82f6":"#94a3b8"},children:[s," ",s===1?"record":"records"]})]}),r.jsxs("p",{style:{fontSize:"13px",color:"#94a3b8",margin:0},children:["Updated ",d]})]})]})},Cw=e=>{const n="#94a3b8";switch(e){case"vehicles":return{title:"Vehicles",icon:r.jsx(Wt,{size:48,color:n}),emptyMessage:"No vehicles yet. Add your first vehicle to start tracking maintenance, insurance, and service history."};case"properties":return{title:"Properties",icon:r.jsx(In,{size:48,color:n}),emptyMessage:"No properties yet. Add your first property to organize household information for continuity planning."};case"employments":return{title:"Employments",icon:r.jsx(xr,{size:48,color:n}),emptyMessage:"No employments yet. Add employment details to track pension, benefits, and contact information."};case"services":return{title:"Services",icon:r.jsx(Rn,{size:48,color:n}),emptyMessage:"No service providers yet. Add tradespeople and service contacts for easy access in emergencies."};case"finance":return{title:"Finance",icon:r.jsx(Hr,{size:48,color:n}),emptyMessage:"No financial accounts yet. Add bank accounts, savings, investments, and other financial products."};default:return{title:e,icon:r.jsx(Wt,{size:48,color:n}),emptyMessage:"No items yet. Add your first item to get started."}}},oo=({domain:e,onCreateNew:t,onEdit:n,onDelete:s})=>{const{data:i,isLoading:o,error:l}=kx(e,{limit:50,sort:"-updatedAt"}),[a,c]=S.useState(null),[u,d]=S.useState(null),[f,h]=S.useState(!1),x=Cw(e),g=v=>{var m;const p=(m=v.target.files)==null?void 0:m[0];if(p){d(p);const y=new FileReader;y.onload=j=>{var k;c((k=j.target)==null?void 0:k.result)},y.readAsDataURL(p)}},b={display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#0f172a",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"};return l?r.jsxs("div",{style:{textAlign:"center",padding:"64px 24px",backgroundColor:"#fef2f2",borderRadius:"16px",border:"2px solid #fecaca"},children:[r.jsxs("p",{style:{fontSize:"16px",color:"#dc2626",marginBottom:"20px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["Failed to load ",x.title.toLowerCase(),". Please try again."]}),r.jsx("p",{style:{fontSize:"14px",color:"#7f1d1d",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:l instanceof Error?l.message:"Unknown error"})]}):o?r.jsxs(r.Fragment,{children:[r.jsx("style",{children:`
          @keyframes spin {
            to {
              transform: rotate(360deg);
            }
          }
        `}),r.jsxs("div",{style:{textAlign:"center",padding:"64px 24px"},children:[r.jsx("div",{style:{display:"inline-block",width:"40px",height:"40px",border:"3px solid #e2e8f0",borderTop:"3px solid #0f172a",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsxs("p",{style:{color:"#64748b",marginTop:"12px",fontSize:"14px"},children:["Loading ",x.title.toLowerCase(),"..."]})]})]}):!i||i.entities.length===0?r.jsx(r.Fragment,{children:r.jsxs("div",{style:{textAlign:"center",padding:"48px 24px",backgroundColor:"#f8fafc",borderRadius:"16px",border:"2px dashed #cbd5e1"},children:[r.jsx("div",{style:{margin:"0 auto 24px"},children:x.icon}),r.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#334155",marginBottom:"8px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["No ",x.title.toLowerCase()," yet"]}),r.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"32px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",maxWidth:"400px",margin:"0 auto 32px"},children:x.emptyMessage}),r.jsx("div",{style:{margin:"32px auto",padding:"24px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0",maxWidth:"300px"},children:a?r.jsxs("div",{style:{position:"relative"},children:[r.jsx("img",{src:a,alt:"Preview",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"8px",marginBottom:"12px"}}),r.jsx("button",{onClick:()=>c(null),style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0, 0, 0, 0.6)",border:"none",borderRadius:"6px",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff"},children:r.jsx(Et,{size:16})}),r.jsxs("p",{style:{fontSize:"12px",color:"#94a3b8",margin:"8px 0 0 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["This image will be attached to your new ",x.title.slice(0,-1).toLowerCase()]})]}):r.jsxs("label",{style:{display:"block",cursor:"pointer",padding:"32px 16px",textAlign:"center"},children:[r.jsx(so,{size:32,color:"#cbd5e1",style:{margin:"0 auto 12px",display:"block"}}),r.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#334155",margin:"8px 0 4px 0",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Upload an image"}),r.jsxs("p",{style:{fontSize:"12px",color:"#94a3b8",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:["Click to add a photo of your ",x.title.slice(0,-1).toLowerCase()]}),r.jsx("input",{type:"file",accept:"image/*",onChange:g,style:{display:"none"}})]})}),r.jsx("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:r.jsxs("button",{onClick:t,style:b,children:[r.jsx(ct,{size:20,strokeWidth:2}),"Add First ",x.title.slice(0,-1)]})})]})}):r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(1, 1fr)",gap:"24px",padding:"24px 0"},className:"parent-entity-grid",children:[i.entities.map(v=>r.jsx(ww,{entity:v,onEdit:n,onDelete:s,childRecordCount:v.childRecordCount||0},v._id)),r.jsx("style",{children:`
        @media (min-width: 768px) {
          .parent-entity-grid {
            grid-template-columns: repeat(2, 1fr) !important;
          }
        }
        @media (min-width: 1024px) {
          .parent-entity-grid {
            grid-template-columns: repeat(3, 1fr) !important;
          }
        }
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.5;
          }
        }
        @keyframes spin {
          to {
            transform: rotate(360deg);
          }
        }
      `})]})},kw=(e,t)=>({vehicles:t?"Edit Vehicle":"Add New Vehicle",properties:t?"Edit Property":"Add New Property",employments:t?"Edit Employment":"Add New Employment",services:t?"Edit Service Provider":"Add New Service Provider",finance:t?"Edit Financial Account":"Add New Financial Account"})[e],Qs=({domain:e,entity:t,isOpen:n,onClose:s,onSuccess:i,pendingImage:o,onImageProcessed:l})=>{const a=!!t,c=jS(e),u=SS(e),[d,f]=S.useState(!1),[h,x]=S.useState(null),[g,b]=S.useState(null),{register:v,handleSubmit:p,reset:m,formState:{errors:y,isSubmitting:j},watch:k,getValues:D}=qs({defaultValues:t?{name:t.name,...t.fields}:{},mode:"onChange"}),I=P=>{var z;const Z=(z=P.target.files)==null?void 0:z[0];if(Z){x(Z);const N=new FileReader;N.onloadend=()=>{b(N.result)},N.readAsDataURL(Z)}},R=()=>{x(null),b(null)},_=async P=>{try{const{name:Z,notes:z,...N}=P,ee=Object.fromEntries(Object.entries(N).filter(([ae,ie])=>ie!==void 0&&ie!=="")),A={name:Z,fields:ee};let K;a&&t?(await u.mutateAsync({id:t._id,data:A}),K=t):K=await c.mutateAsync(A);const X=o||h;if(X&&K&&X instanceof File)try{f(!0),await vS(e,K._id,X),l==null||l()}catch(ae){console.error("Image upload failed:",ae)}finally{f(!1)}else l&&!o&&!h&&(l==null||l());i(),m()}catch(Z){console.error("Form submission error:",Z)}};if(!n)return null;const T={width:"100%",padding:"12px 16px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",transition:"all 0.2s ease",color:"#0f172a",backgroundColor:"#ffffff"},W={display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#334155",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},V={fontSize:"13px",color:"#ef4444",marginTop:"4px"};return r.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"16px"},onClick:s,children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",width:"100%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:"1px solid #e2e8f0",flexShrink:0},children:[r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:kw(e,a)}),r.jsx("button",{onClick:s,style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"6px",display:"flex",alignItems:"center",color:"#64748b"},children:r.jsx(Et,{size:24})})]}),r.jsxs("form",{onSubmit:p(_),style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[r.jsxs("div",{style:{padding:"24px",overflowY:"auto",flex:1,minHeight:0},children:[r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("label",{style:W,children:["Name ",r.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),r.jsx("input",{type:"text",...v("name",{required:"Name is required",maxLength:{value:100,message:"Name must be 100 characters or less"}}),style:T,placeholder:e==="vehicles"?"2019 Honda Civic":e==="properties"?"Primary Residence":e==="employments"?"Acme Corp - Software Engineer":e==="services"?"Tradespeople":e==="finance"?"Current Accounts":"Name"}),y.name&&r.jsx("p",{style:V,children:y.name.message})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:W,children:"Image (Optional)"}),!g&&!(t!=null&&t.image)&&r.jsxs("div",{style:{border:"2px dashed #e2e8f0",borderRadius:"12px",padding:"24px",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:"#f8fafc"},onClick:()=>{var P;return(P=document.getElementById("image-upload"))==null?void 0:P.click()},onMouseEnter:P=>{P.currentTarget.style.borderColor="#cbd5e1",P.currentTarget.style.backgroundColor="#f1f5f9"},onMouseLeave:P=>{P.currentTarget.style.borderColor="#e2e8f0",P.currentTarget.style.backgroundColor="#f8fafc"},children:[r.jsx(so,{size:40,color:"#94a3b8",style:{margin:"0 auto 12px"}}),r.jsx("p",{style:{fontSize:"14px",color:"#64748b",margin:"0 0 4px 0",fontWeight:"500"},children:"Click to upload image"}),r.jsx("p",{style:{fontSize:"13px",color:"#94a3b8",margin:0},children:"PNG, JPG, GIF up to 5MB"})]}),(g||(t==null?void 0:t.image))&&r.jsxs("div",{style:{position:"relative",borderRadius:"12px",overflow:"hidden",border:"1px solid #e2e8f0"},children:[r.jsx("img",{src:g||(t?Cx(e,t._id):""),alt:"Preview",style:{width:"100%",height:"200px",objectFit:"cover",display:"block"}}),r.jsx("button",{type:"button",onClick:R,style:{position:"absolute",top:"8px",right:"8px",background:"rgba(15, 23, 42, 0.8)",border:"none",borderRadius:"8px",padding:"8px",cursor:"pointer",color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Et,{size:18})}),r.jsxs("button",{type:"button",onClick:()=>{var P;return(P=document.getElementById("image-upload"))==null?void 0:P.click()},style:{position:"absolute",bottom:"8px",right:"8px",background:"rgba(15, 23, 42, 0.8)",border:"none",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",color:"#ffffff",display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",fontWeight:"500"},children:[r.jsx(Av,{size:16}),"Change"]})]}),r.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:I,style:{display:"none"}})]}),e==="vehicles"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Make"}),r.jsx("input",{type:"text",...v("make"),style:T,placeholder:"Honda"})]}),r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Model"}),r.jsx("input",{type:"text",...v("model"),style:T,placeholder:"Civic"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Year"}),r.jsx("input",{type:"number",...v("year",{min:{value:1900,message:"Year must be 1900 or later"},max:{value:2030,message:"Year must be 2030 or earlier"}}),style:T,placeholder:"2019"}),y.year&&r.jsx("p",{style:V,children:y.year.message})]}),r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Registration"}),r.jsx("input",{type:"text",...v("registration"),style:T,placeholder:"ABC-1234"})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:W,children:"VIN (Vehicle Identification Number)"}),r.jsx("input",{type:"text",...v("vin",{maxLength:{value:17,message:"VIN must be 17 characters or less"}}),style:T,placeholder:"1HGBH41JXMN109186"}),y.vin&&r.jsx("p",{style:V,children:y.vin.message})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Purchase Date"}),r.jsx("input",{type:"date",...v("purchaseDate"),style:T})]}),r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Current Owner"}),r.jsx("input",{type:"text",...v("currentOwner"),style:T,placeholder:"John Doe"})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:W,children:"Location"}),r.jsx("input",{type:"text",...v("location"),style:T,placeholder:"Garage at Primary Residence"})]})]}),e==="properties"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("label",{style:W,children:["Address ",r.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),r.jsx("textarea",{...v("address",{required:"Address is required",maxLength:{value:200,message:"Address must be 200 characters or less"}}),style:{...T,minHeight:"80px",resize:"vertical"},placeholder:`123 Main Street
Belfast
County Antrim`,rows:3}),y.address&&r.jsx("p",{style:V,children:y.address.message})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Postcode"}),r.jsx("input",{type:"text",...v("postcode",{pattern:{value:/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i,message:"Invalid UK postcode format"}}),style:T,placeholder:"BT1 1AA"}),y.postcode&&r.jsx("p",{style:V,children:y.postcode.message})]}),r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Property Type"}),r.jsxs("select",{...v("propertyType"),style:T,children:[r.jsx("option",{value:"",children:"Select type"}),r.jsx("option",{value:"House",children:"House"}),r.jsx("option",{value:"Flat",children:"Flat"}),r.jsx("option",{value:"Bungalow",children:"Bungalow"}),r.jsx("option",{value:"Terraced",children:"Terraced"}),r.jsx("option",{value:"Semi-Detached",children:"Semi-Detached"}),r.jsx("option",{value:"Detached",children:"Detached"})]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Ownership Status"}),r.jsxs("select",{...v("ownershipStatus"),style:T,children:[r.jsx("option",{value:"",children:"Select status"}),r.jsx("option",{value:"Owned",children:"Owned"}),r.jsx("option",{value:"Mortgaged",children:"Mortgaged"}),r.jsx("option",{value:"Rented",children:"Rented"}),r.jsx("option",{value:"Leased",children:"Leased"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Purchase Date"}),r.jsx("input",{type:"date",...v("propertyPurchaseDate"),style:T})]})]})]}),e==="employments"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Employer Name"}),r.jsx("input",{type:"text",...v("employerName"),style:T,placeholder:"Acme Corporation"})]}),r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Job Title"}),r.jsx("input",{type:"text",...v("jobTitle"),style:T,placeholder:"Software Engineer"})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:W,children:"Employment Type"}),r.jsxs("select",{...v("employmentType"),style:T,children:[r.jsx("option",{value:"",children:"Select type"}),r.jsx("option",{value:"Full-time",children:"Full-time"}),r.jsx("option",{value:"Part-time",children:"Part-time"}),r.jsx("option",{value:"Contract",children:"Contract"}),r.jsx("option",{value:"Self-employed",children:"Self-employed"}),r.jsx("option",{value:"Freelance",children:"Freelance"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:W,children:"Start Date"}),r.jsx("input",{type:"date",...v("startDate"),style:T})]}),r.jsxs("div",{children:[r.jsx("label",{style:W,children:"End Date"}),r.jsx("input",{type:"date",...v("endDate"),style:T})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:W,children:"Primary Contact"}),r.jsx("input",{type:"text",...v("primaryContact"),style:T,placeholder:"HR: hr@acme.com"})]})]}),e==="services"&&r.jsx(r.Fragment,{children:r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:W,children:"Service Category"}),r.jsxs("select",{...v("serviceCategory"),style:T,children:[r.jsx("option",{value:"",children:"Select category"}),r.jsx("option",{value:"Tradespeople",children:"Tradespeople"}),r.jsx("option",{value:"Home Services",children:"Home Services"}),r.jsx("option",{value:"Professional Services",children:"Professional Services"}),r.jsx("option",{value:"Garden & Outdoor",children:"Garden & Outdoor"}),r.jsx("option",{value:"Automotive Services",children:"Automotive Services"}),r.jsx("option",{value:"Health & Wellness",children:"Health & Wellness"}),r.jsx("option",{value:"Other",children:"Other"})]}),r.jsx("p",{style:{fontSize:"13px",color:"#64748b",marginTop:"6px",fontStyle:"italic"},children:`Choose the category for the services you'll track (e.g., "Tradespeople" will contain all your plumbers, electricians, etc.)`})]})}),e==="finance"&&r.jsx(r.Fragment,{children:r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:W,children:"Account Type Category"}),r.jsxs("select",{...v("accountType"),style:T,children:[r.jsx("option",{value:"",children:"Select type"}),r.jsx("option",{value:"Current Accounts",children:"Current Accounts"}),r.jsx("option",{value:"Savings Accounts",children:"Savings Accounts"}),r.jsx("option",{value:"ISAs",children:"ISAs"}),r.jsx("option",{value:"Credit Cards",children:"Credit Cards"}),r.jsx("option",{value:"Pensions",children:"Pensions"}),r.jsx("option",{value:"Investments",children:"Investments"}),r.jsx("option",{value:"Mortgages",children:"Mortgages"}),r.jsx("option",{value:"Loans",children:"Loans"}),r.jsx("option",{value:"Other",children:"Other"})]}),r.jsx("p",{style:{fontSize:"13px",color:"#64748b",marginTop:"6px",fontStyle:"italic"},children:`Choose the type of accounts you'll track in this category (e.g., "Current Accounts" will contain all your current accounts from different banks)`})]})}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:W,children:"Notes"}),r.jsx("textarea",{...v("notes",{maxLength:{value:500,message:"Notes must be 500 characters or less"}}),style:{...T,minHeight:"80px",resize:"vertical"},placeholder:"Additional notes...",rows:3}),y.notes&&r.jsx("p",{style:V,children:y.notes.message})]})]}),r.jsxs("div",{style:{padding:"20px 24px",borderTop:"1px solid #e2e8f0",display:"flex",gap:"12px",justifyContent:"flex-end",flexShrink:0},children:[r.jsx("button",{type:"button",onClick:s,style:{padding:"10px 20px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#64748b",cursor:"pointer",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:j||d,style:{padding:"10px 20px",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:j||d?"#94a3b8":"#0f172a",color:"#ffffff",cursor:j||d?"not-allowed":"pointer",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:d?"Uploading image...":j?"Saving...":a?"Save Changes":"Create"})]})]})]})})},Nw=e=>({Vehicle:"vehicle",Property:"property",Employment:"employment",Services:"service provider",Finance:"financial account"})[e]||e.toLowerCase(),Ks=({entity:e,domain:t,isOpen:n,onClose:s,childRecordCount:i=0,childRecordBreakdown:o={}})=>{const[l,a]=S.useState(!1),c=Me(),u=Nx(t),d=async()=>{if(!(!e||!l))try{await u.mutateAsync(e._id),s(),a(!1),c(`/${t==="finance"?"finance":t}`)}catch(g){console.error("Delete error:",g)}},f=()=>{a(!1),s()};if(!n||!e)return null;const h=Nw(e.domainType),x=i>0;return r.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"16px"},onClick:f,children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",width:"100%",maxWidth:"480px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onClick:g=>g.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:"24px 24px 16px 24px"},children:[r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fef2f2",color:"#ef4444",flexShrink:0},children:r.jsx(Si,{size:24})}),r.jsxs("div",{children:[r.jsxs("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#0f172a",margin:"0 0 4px 0"},children:["Delete ",h,"?"]}),r.jsx("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"This action cannot be undone"})]})]}),r.jsx("button",{onClick:f,style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"6px",display:"flex",alignItems:"center",color:"#64748b"},children:r.jsx(Et,{size:20})})]}),r.jsxs("div",{style:{padding:"0 24px 24px 24px"},children:[r.jsx("div",{style:{padding:"12px 16px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"16px"},children:r.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#0f172a",margin:0},children:e.name})}),x&&r.jsxs("div",{style:{padding:"16px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",marginBottom:"16px"},children:[r.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",color:"#dc2626",margin:"0 0 8px 0"},children:[" This will delete ",i," child ",i===1?"record":"records"]}),Object.keys(o).length>0&&r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Object.entries(o).map(([g,b])=>r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",backgroundColor:"#ffffff",border:"1px solid #fecaca",borderRadius:"6px",fontSize:"13px",color:"#7f1d1d",fontWeight:"500"},children:[b," ",g]},g))})]}),r.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"10px",cursor:"pointer",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[r.jsx("input",{type:"checkbox",checked:l,onChange:g=>a(g.target.checked),style:{marginTop:"2px",cursor:"pointer",width:"16px",height:"16px"}}),r.jsxs("span",{style:{fontSize:"14px",color:"#334155",lineHeight:"1.5"},children:["I understand this action cannot be undone",x?" and all associated records will be permanently deleted":""]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:f,disabled:u.isPending,style:{flex:1,padding:"12px 20px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#64748b",cursor:u.isPending?"not-allowed":"pointer",transition:"all 0.2s ease"},children:"Cancel"}),r.jsx("button",{onClick:d,disabled:!l||u.isPending,style:{flex:1,padding:"12px 20px",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:!l||u.isPending?"#fca5a5":"#ef4444",color:"#ffffff",cursor:!l||u.isPending?"not-allowed":"pointer",transition:"all 0.2s ease"},children:u.isPending?"Deleting...":"Delete"})]}),u.isError&&r.jsx("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px"},children:r.jsxs("p",{style:{fontSize:"13px",color:"#dc2626",margin:0},children:["Failed to delete ",h,". Please try again."]})})]})]})})},Ew=()=>{const[e,t]=S.useState(!1),[n,s]=S.useState(!1),[i,o]=S.useState(null),[l,a]=S.useState(null),c=g=>{o(null),a(g||null),t(!0)},u=g=>{o(g),t(!0)},d=g=>{o(g),s(!0)},f=()=>{t(!1),o(null)},h=()=>{s(!1),o(null)},x={display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#0f172a",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"};return r.jsxs("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1400px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx("header",{style:{marginBottom:"32px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{padding:"10px",borderRadius:"12px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Wt,{size:28,color:"#0f172a",strokeWidth:1.5})}),r.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0f172a",margin:0,letterSpacing:"-0.025em"},children:"Vehicles"})]}),r.jsx("p",{style:{fontSize:"15px",color:"#64748b",margin:0},children:"Manage your vehicles and track associated records like insurance, finance, and service history"})]}),r.jsxs("button",{onClick:c,style:x,children:[r.jsx(ct,{size:20,strokeWidth:2}),"Add Vehicle"]})]})}),r.jsx(oo,{domain:"vehicles",onCreateNew:c,onEdit:u,onDelete:d}),r.jsx(Qs,{domain:"vehicles",entity:i,isOpen:e,onClose:f,onSuccess:f,pendingImage:l,onImageProcessed:()=>a(null)}),r.jsx(Ks,{entity:i,domain:"vehicles",isOpen:n,onClose:h,childRecordCount:(i==null?void 0:i.childRecordCount)||0})]})},Tw=()=>{const[e,t]=S.useState(!1),[n,s]=S.useState(!1),[i,o]=S.useState(null),l=()=>{o(null),t(!0)},a=h=>{o(h),t(!0)},c=h=>{o(h),s(!0)},u=()=>{t(!1),o(null)},d=()=>{s(!1),o(null)},f={display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#0f172a",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"};return r.jsxs("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1400px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx("header",{style:{marginBottom:"32px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{padding:"10px",borderRadius:"12px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(In,{size:28,color:"#0f172a",strokeWidth:1.5})}),r.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0f172a",margin:0,letterSpacing:"-0.025em"},children:"Properties"})]}),r.jsx("p",{style:{fontSize:"15px",color:"#64748b",margin:0},children:"Manage your properties and track associated records like insurance, utilities, and maintenance"})]}),r.jsxs("button",{onClick:l,style:f,children:[r.jsx(ct,{size:20,strokeWidth:2}),"Add Property"]})]})}),r.jsx(oo,{domain:"properties",onCreateNew:l,onEdit:a,onDelete:c}),r.jsx(Qs,{domain:"properties",entity:i,isOpen:e,onClose:u,onSuccess:u}),r.jsx(Ks,{entity:i,domain:"properties",isOpen:n,onClose:d,childRecordCount:(i==null?void 0:i.childRecordCount)||0})]})},Iw=()=>{const[e,t]=S.useState(!1),[n,s]=S.useState(!1),[i,o]=S.useState(null),l=()=>{o(null),t(!0)},a=h=>{o(h),t(!0)},c=h=>{o(h),s(!0)},u=()=>{t(!1),o(null)},d=()=>{s(!1),o(null)},f={display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#0f172a",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"};return r.jsxs("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1400px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx("header",{style:{marginBottom:"32px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{padding:"10px",borderRadius:"12px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(xr,{size:28,color:"#0f172a",strokeWidth:1.5})}),r.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0f172a",margin:0,letterSpacing:"-0.025em"},children:"Employments"})]}),r.jsx("p",{style:{fontSize:"15px",color:"#64748b",margin:0},children:"Manage employment details and track associated records like pensions, benefits, and contacts"})]}),r.jsxs("button",{onClick:l,style:f,children:[r.jsx(ct,{size:20,strokeWidth:2}),"Add Employment"]})]})}),r.jsx(oo,{domain:"employments",onCreateNew:l,onEdit:a,onDelete:c}),r.jsx(Qs,{domain:"employments",entity:i,isOpen:e,onClose:u,onSuccess:u}),r.jsx(Ks,{entity:i,domain:"employments",isOpen:n,onClose:d,childRecordCount:(i==null?void 0:i.childRecordCount)||0})]})},Rw=()=>{const[e,t]=S.useState(!1),[n,s]=S.useState(!1),[i,o]=S.useState(null),[l,a]=S.useState(null),c=g=>{o(null),a(g||null),t(!0)},u=g=>{o(g),t(!0)},d=g=>{o(g),s(!0)},f=()=>{t(!1),o(null)},h=()=>{s(!1),o(null)},x={display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#0f172a",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"};return r.jsxs("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1400px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx("header",{style:{marginBottom:"32px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{padding:"10px",borderRadius:"12px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Rn,{size:28,color:"#0f172a",strokeWidth:1.5})}),r.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0f172a",margin:0,letterSpacing:"-0.025em"},children:"Services"})]}),r.jsx("p",{style:{fontSize:"15px",color:"#64748b",margin:0},children:"Organize service providers by category (Tradespeople, Home Services, Professional Services, etc.)"})]}),r.jsxs("button",{onClick:c,style:x,children:[r.jsx(ct,{size:20,strokeWidth:2}),"Add Service Category"]})]})}),r.jsx(oo,{domain:"services",onCreateNew:c,onEdit:u,onDelete:d}),r.jsx(Qs,{domain:"services",entity:i,isOpen:e,onClose:f,onSuccess:f,pendingImage:l,onImageProcessed:()=>a(null)}),r.jsx(Ks,{entity:i,domain:"services",isOpen:n,onClose:h,childRecordCount:(i==null?void 0:i.childRecordCount)||0})]})},Fw=()=>{const[e,t]=S.useState(!1),[n,s]=S.useState(!1),[i,o]=S.useState(null),[l,a]=S.useState(null),c=g=>{o(null),a(g||null),t(!0)},u=g=>{o(g),t(!0)},d=g=>{o(g),s(!0)},f=()=>{t(!1),o(null)},h=()=>{s(!1),o(null)},x={display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#0f172a",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"};return r.jsxs("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1400px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx("header",{style:{marginBottom:"32px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{padding:"10px",borderRadius:"12px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Hr,{size:28,color:"#0f172a",strokeWidth:1.5})}),r.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#0f172a",margin:0,letterSpacing:"-0.025em"},children:"Finance"})]}),r.jsx("p",{style:{fontSize:"15px",color:"#64748b",margin:0},children:"Organize your financial accounts by type (Current Accounts, Savings, ISAs, Credit Cards, etc.)"})]}),r.jsxs("button",{onClick:c,style:x,children:[r.jsx(ct,{size:20,strokeWidth:2}),"Add Account"]})]})}),r.jsx(oo,{domain:"finance",onCreateNew:c,onEdit:u,onDelete:d}),r.jsx(Qs,{domain:"finance",entity:i,isOpen:e,onClose:f,onSuccess:f,pendingImage:l,onImageProcessed:()=>a(null)}),r.jsx(Ks,{entity:i,domain:"finance",isOpen:n,onClose:h,childRecordCount:(i==null?void 0:i.childRecordCount)||0})]})},lo="/api/v2",zw=async(e,t,n)=>{const s=await fetch(`${lo}/${e}/${t}/records`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to create child record")}return s.json()},Dw=async(e,t,n,s)=>{const i=await fetch(`${lo}/${e}/${t}/records/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!i.ok){if(i.status===404)throw new Error("Child record not found");const o=await i.json();throw new Error(o.error||"Failed to update child record")}return i.json()},Pw=async(e,t,n,s)=>{const i=new FormData;i.append("attachment",s);const o=await fetch(`${lo}/${e}/${t}/records/${n}/attachment`,{method:"POST",credentials:"include",body:i});if(!o.ok){const l=await o.json();throw new Error(l.error||"Failed to upload attachment")}return o.json()},Oc=(e,t,n)=>`${lo}/${e}/${t}/records/${n}/attachment`,Mw=async(e,t,n)=>{const s=await fetch(`${lo}/${e}/${t}/records/${n}/attachment`,{method:"DELETE",credentials:"include"});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to delete attachment")}};function Ex(e){if(!e)return{level:"none",daysRemaining:null,message:"No renewal date set",isUrgent:!1};const t=new Date(e),n=new Date;n.setHours(0,0,0,0);const s=t.getTime()-n.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i<0?{level:"none",daysRemaining:i,message:`Expired ${Math.abs(i)} days ago`,isUrgent:!1}:i<30?{level:"critical",daysRemaining:i,message:`URGENT: Renews in ${i} day${i===1?"":"s"}`,isUrgent:!0}:i<90?{level:"important",daysRemaining:i,message:`Renews in ${i} days`,isUrgent:!1}:{level:"upcoming",daysRemaining:i,message:`Renews in ${i} days`,isUrgent:!1}}function _w(e,t){return!(!e||e.length===0)}function rp(e){return e?e.some(t=>{var s;return Ex(t.renewalDate||((s=t.fields)==null?void 0:s.renewalDate)).level==="critical"}):!1}const Lw=(e,t)=>{const n=be();return Te({mutationFn:s=>zw(e,t,s),onSuccess:()=>{n.invalidateQueries({queryKey:["child-records",e,t]}),n.invalidateQueries({queryKey:["parent-entity",e,t]}),n.invalidateQueries({queryKey:["domain-stats"]})},onError:s=>{console.error("Failed to create child record:",s.message)}})},Aw=(e,t)=>{const n=be();return Te({mutationFn:({recordId:s,data:i})=>Dw(e,t,s,i),onSuccess:(s,i)=>{n.invalidateQueries({queryKey:["child-record",e,t,i.recordId]}),n.invalidateQueries({queryKey:["child-records",e,t]}),n.invalidateQueries({queryKey:["parent-entity",e,t]})},onError:s=>{console.error("Failed to update child record:",s.message)}})},Ow=e=>{switch(e){case"finance":return["Finance"];case"services":return["Contact","ServiceHistory"];case"vehicles":return["ServiceHistory","Finance","Insurance","Government"];case"properties":return["ServiceHistory","Finance","Insurance","Government"];case"employments":return["Contact","Finance","Pension"];default:return["Contact","ServiceHistory","Finance","Insurance","Government","Pension"]}},Ww=(e,t)=>t==="finance"&&e==="Finance"?"":{Contact:"",ServiceHistory:"",Finance:"",Insurance:"",Government:"",Pension:""}[e]||"",wa=(e,t)=>t==="finance"&&e==="Finance"?"Bank Account":t==="services"&&e==="Contact"?"Service Provider":{Contact:"Contact",ServiceHistory:"Service History",Finance:"Finance",Insurance:"Insurance",Government:"Government",Pension:"Pension"}[e]||e,Bw=(e,t)=>t==="finance"&&e==="Finance"?["name","institution","accountType","accountNumber","sortCode","balance","phone"]:t==="services"&&e==="Contact"?["serviceType","name","businessName","phone","email","address"]:{Contact:["name","phone","email","relationship"],ServiceHistory:["name","serviceDate","nextServiceDue","provider","phone"],Finance:["name","institution","accountNumber","sortCode","phone","renewalDate"],Insurance:["name","policyNumber","provider","phone","renewalDate"],Government:["name","accountNumber","renewalDate","phone"],Pension:["name","provider","accountNumber","phone"]}[e]||[],$w=({domain:e,parentId:t,record:n,recordType:s,onClose:i,onSuccess:o})=>{const l=Ow(e),[a,c]=S.useState(n||s?2:1),[u,d]=S.useState(s||l[0]||"Contact"),[f,h]=S.useState(null),[x,g]=S.useState(!1),[b,v]=S.useState(null),p=S.useRef(null),{control:m,handleSubmit:y,formState:{errors:j,isSubmitting:k},reset:D}=qs({defaultValues:n?{name:n.name,...n.fields}:{status:"active"}}),I=Lw(e,t),R=Aw(e,t),_=S.useMemo(()=>Bw(u,e),[u,e]),T=N=>{d(N),c(2)},W=async N=>{try{n?await R.mutateAsync({recordId:n._id,data:{name:N.name,fields:Object.fromEntries(Object.entries(N).filter(([ee])=>ee!=="name"))}}):await I.mutateAsync({recordType:u,name:N.name,fields:Object.fromEntries(Object.entries(N).filter(([ee])=>ee!=="name")),status:N.status||"active"}),o()}catch(ee){console.error("Form submission error:",ee)}},V=N=>{var A;const ee=(A=N.target.files)==null?void 0:A[0];if(ee){if(ee.size>10*1024*1024){v("File size must be less than 10MB");return}h(ee),v(null)}},P=async()=>{if(!(!f||!n)){g(!0),v(null);try{await Pw(e,t,n._id,f),h(null),o()}catch(N){v(N.message||"Failed to upload file")}finally{g(!1)}}},Z=async()=>{if(!(!n||!n.attachment))try{await Mw(e,t,n._id),o()}catch(N){v(N.message||"Failed to delete attachment")}},z=I.isPending||R.isPending;return r.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"16px"},children:r.jsxs("div",{style:{backgroundColor:"#0f172a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",width:"100%",maxWidth:"650px",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0},children:[r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#f1f5f9",margin:0},children:n?`Edit ${wa(u,e)}`:e==="finance"?"Add Bank Account":`Add ${wa(u,e)}`}),r.jsx("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer",color:"#94a3b8",padding:"4px"},onMouseEnter:N=>N.currentTarget.style.color="#f1f5f9",onMouseLeave:N=>N.currentTarget.style.color="#94a3b8",children:r.jsx(Et,{size:24})})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",minHeight:0},children:[a===1&&!n&&r.jsxs("div",{style:{padding:"24px"},children:[r.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",marginBottom:"16px",margin:"0 0 16px 0"},children:"Select the type of record to create"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},children:l.map(N=>r.jsxs("button",{onClick:()=>T(N),style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",color:"#f1f5f9",fontSize:"14px",fontWeight:"500"},onMouseEnter:ee=>{ee.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.2)",ee.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:ee=>{ee.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",ee.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)"},children:[r.jsx("span",{style:{fontSize:"24px"},children:Ww(N,e)}),wa(N,e)]},N))})]}),a===2&&r.jsx("form",{onSubmit:y(W),style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:r.jsxs("div",{style:{flex:1,overflowY:"auto",minHeight:0,padding:"24px"},children:[r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("h3",{style:{fontSize:"13px",fontWeight:"600",color:"#3b82f6",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",margin:"0 0 12px 0"},children:" Essential Information"}),r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:"Record Name *"}),r.jsx(tt,{name:"name",control:m,rules:{required:"Name is required"},render:({field:N})=>r.jsx("input",{...N,type:"text",placeholder:`e.g., ${e==="finance"&&u==="Finance"?"HSBC Calvin Current Account":e==="services"&&u==="Contact"?"Emergency Contact - John Smith":u==="Contact"?"John Smith":u==="Insurance"?"Car Insurance":"Enter name"}`,style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:j.name?"1px solid #ef4444":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",transition:"all 0.2s",boxSizing:"border-box"},onFocus:ee=>ee.currentTarget.style.borderColor="#3b82f6",onBlur:ee=>ee.currentTarget.style.borderColor=j.name?"#ef4444":"rgba(255, 255, 255, 0.1)"})}),j.name&&r.jsx("p",{style:{color:"#ef4444",fontSize:"12px",margin:"4px 0 0 0"},children:j.name.message})]}),_.includes("institution")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Bank/Institution"}),r.jsx(tt,{name:"institution",control:m,render:({field:N})=>r.jsx("input",{...N,type:"text",placeholder:"e.g., HSBC, Barclays, NatWest",style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})})]}),_.includes("accountType")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:"Account Type"}),r.jsx(tt,{name:"accountType",control:m,render:({field:N})=>r.jsxs("select",{...N,style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"},children:[r.jsx("option",{value:"",children:"Select type"}),r.jsx("option",{value:"Current Account",children:"Current Account"}),r.jsx("option",{value:"Savings Account",children:"Savings Account"}),r.jsx("option",{value:"ISA",children:"ISA"}),r.jsx("option",{value:"Junior ISA",children:"Junior ISA"}),r.jsx("option",{value:"Business Account",children:"Business Account"}),r.jsx("option",{value:"Joint Account",children:"Joint Account"})]})})]}),_.includes("accountNumber")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Account Number"}),r.jsx(tt,{name:"accountNumber",control:m,render:({field:N})=>r.jsx("input",{...N,type:"text",placeholder:"8-digit account number",maxLength:8,style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})})]}),_.includes("sortCode")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Sort Code"}),r.jsx(tt,{name:"sortCode",control:m,render:({field:N})=>r.jsx("input",{...N,type:"text",placeholder:"XX-XX-XX",maxLength:8,style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})})]}),_.includes("balance")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Current Balance"}),r.jsx(tt,{name:"balance",control:m,render:({field:N})=>r.jsx("input",{...N,type:"number",step:"0.01",placeholder:"0.00",style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})})]}),_.includes("serviceType")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Service Type *"}),r.jsx(tt,{name:"serviceType",control:m,rules:{required:"Service type is required"},render:({field:N})=>r.jsx("input",{...N,type:"text",placeholder:"e.g., Aga Service, Roof Maintenance, Plumbing",style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:j.serviceType?"1px solid #ef4444":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})}),j.serviceType&&r.jsx("p",{style:{color:"#ef4444",fontSize:"12px",margin:"4px 0 0 0"},children:j.serviceType.message}),r.jsx("p",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"4px",fontStyle:"italic"},children:"What service do they provide?"})]}),_.includes("businessName")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Business/Person Name"}),r.jsx(tt,{name:"businessName",control:m,render:({field:N})=>r.jsx("input",{...N,type:"text",placeholder:"e.g., John Smith Roofing, AGA Services Ltd",style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})}),r.jsx("p",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"4px",fontStyle:"italic"},children:"Trading name or person's name"})]}),_.includes("phone")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Phone"}),r.jsx(tt,{name:"phone",control:m,render:({field:N})=>r.jsx("input",{...N,type:"tel",placeholder:"028-1234-5678 or 07700-900123",style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})})]}),_.includes("email")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Email"}),r.jsx(tt,{name:"email",control:m,render:({field:N})=>r.jsx("input",{...N,type:"email",placeholder:"name@example.com",style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})})]}),_.includes("address")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Address"}),r.jsx(tt,{name:"address",control:m,render:({field:N})=>r.jsx("textarea",{...N,placeholder:"Service address or location",rows:2,style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box",resize:"vertical"}})})]}),_.includes("renewalDate")&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:" Renewal Date"}),r.jsx(tt,{name:"renewalDate",control:m,render:({field:N})=>r.jsx("input",{...N,type:"date",style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"}})})]}),r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#f1f5f9",marginBottom:"4px"},children:"Status"}),r.jsx(tt,{name:"status",control:m,render:({field:N})=>r.jsxs("select",{...N,style:{width:"100%",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#f1f5f9",fontSize:"14px",fontFamily:"inherit",boxSizing:"border-box"},children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"expired",children:"Expired"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"pending",children:"Pending"})]})})]})]}),r.jsxs("div",{style:{marginBottom:"24px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.02)",borderLeft:"2px solid rgba(255, 255, 255, 0.1)",opacity:.6},children:[r.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:"#94a3b8",textTransform:"uppercase",letterSpacing:"0.5px",margin:"0 0 8px 0"},children:" Additional Details"}),_.includes("amount")||!n?r.jsxs("div",{style:{marginBottom:"8px"},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",color:"#94a3b8",marginBottom:"2px"},children:"Amount"}),r.jsx(tt,{name:"amount",control:m,render:({field:N})=>r.jsx("input",{...N,type:"text",placeholder:"e.g., 850",style:{width:"100%",padding:"8px 10px",backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"4px",color:"#cbd5e1",fontSize:"12px",fontFamily:"inherit",boxSizing:"border-box"}})})]}):null,r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"12px",color:"#94a3b8",marginBottom:"2px"},children:"Notes"}),r.jsx(tt,{name:"notes",control:m,render:({field:N})=>r.jsx("textarea",{...N,placeholder:"Any additional details...",rows:2,style:{width:"100%",padding:"8px 10px",backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"4px",color:"#cbd5e1",fontSize:"12px",fontFamily:"inherit",boxSizing:"border-box",resize:"vertical"}})})]})]}),n&&r.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255, 255, 255, 0.05)"},children:[r.jsxs("h3",{style:{fontSize:"13px",fontWeight:"600",color:"#cbd5e1",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Ct,{size:14}),"Document Attachment"]}),n.attachment&&r.jsxs("div",{style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flex:1,minWidth:0},children:[r.jsx(Ct,{size:18,color:"#3b82f6",style:{flexShrink:0}}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#e2e8f0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.attachment.filename}),r.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8",marginTop:"2px"},children:["Uploaded ",new Date(n.attachment.uploadedAt).toLocaleDateString()]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:[r.jsxs("a",{href:Oc(e,t,n._id),target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 10px",backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"6px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",textDecoration:"none",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.2)",N.currentTarget.style.borderColor="rgba(59, 130, 246, 0.4)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.1)",N.currentTarget.style.borderColor="rgba(59, 130, 246, 0.2)"},children:[r.jsx(ro,{size:12}),"View"]}),r.jsxs("a",{href:`${Oc(e,t,n._id)}?download=true`,style:{padding:"6px 10px",backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"6px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",textDecoration:"none",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.2)",N.currentTarget.style.borderColor="rgba(59, 130, 246, 0.4)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.1)",N.currentTarget.style.borderColor="rgba(59, 130, 246, 0.2)"},children:[r.jsx(Zm,{size:12}),"Download"]}),r.jsxs("button",{type:"button",onClick:Z,style:{padding:"6px 10px",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"6px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.2)",N.currentTarget.style.borderColor="rgba(239, 68, 68, 0.4)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)",N.currentTarget.style.borderColor="rgba(239, 68, 68, 0.2)"},children:[r.jsx($t,{size:12}),"Remove"]})]})]}),!n.attachment&&r.jsxs("div",{children:[r.jsx("input",{ref:p,type:"file",onChange:V,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.txt,.csv,.xls,.xlsx",style:{display:"none"}}),f?r.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"12px",marginBottom:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[r.jsx(Ct,{size:18,color:"#cbd5e1"}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:"13px",color:"#e2e8f0"},children:f.name}),r.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8"},children:[(f.size/1024).toFixed(1)," KB"]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{type:"button",onClick:P,disabled:x,style:{flex:1,padding:"8px 12px",backgroundColor:x?"#64748b":"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:x?"not-allowed":"pointer"},children:x?"Uploading...":"Upload File"}),r.jsx("button",{type:"button",onClick:()=>h(null),disabled:x,style:{padding:"8px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",color:"#cbd5e1",border:"none",borderRadius:"6px",fontSize:"12px",cursor:x?"not-allowed":"pointer"},children:"Cancel"})]})]}):r.jsxs("button",{type:"button",onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},style:{width:"100%",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px dashed rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#cbd5e1",fontSize:"13px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",N.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.03)",N.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)"},children:[r.jsx(so,{size:16}),"Choose File (PDF, Images, Documents - Max 10MB)"]}),b&&r.jsx("div",{style:{marginTop:"8px",padding:"8px 12px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"6px",color:"#ef4444",fontSize:"12px"},children:b})]})]})]})})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",padding:"20px 24px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0,backgroundColor:"rgba(0, 0, 0, 0.1)"},children:[a===2&&!n&&r.jsxs("button",{type:"button",onClick:()=>c(1),style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#f1f5f9",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)",onMouseLeave:N=>N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",children:[r.jsx(dv,{size:16}),"Back"]}),r.jsx("button",{type:"button",onClick:i,style:{padding:"10px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#f1f5f9",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)",onMouseLeave:N=>N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:z,style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",backgroundColor:z?"#94a3b8":"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:z?"not-allowed":"pointer",transition:"all 0.2s"},onMouseEnter:N=>{z||(N.currentTarget.style.backgroundColor="#2563eb",N.currentTarget.style.boxShadow="0 4px 12px rgba(37, 99, 235, 0.3)")},onMouseLeave:N=>{z||(N.currentTarget.style.backgroundColor="#3b82f6",N.currentTarget.style.boxShadow="none")},children:[z?"Saving...":n?"Save Changes":"Create Record",!z&&r.jsx(Ms,{size:16})]})]})]})})},Uw=({record:e,onConfirm:t,onCancel:n,isLoading:s=!1})=>{const[i,o]=S.useState(!1),l=async()=>{i&&await t()};return r.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"16px"},children:r.jsxs("div",{style:{backgroundColor:"#0f172a",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",width:"100%",maxWidth:"420px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(239, 68, 68, 0.2)",backgroundColor:"rgba(239, 68, 68, 0.05)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(at,{size:24,style:{color:"#ef4444"}}),r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"#ef4444",margin:0},children:"Delete Record"})]}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",color:"#94a3b8",padding:"4px"},onMouseEnter:a=>a.currentTarget.style.color="#f1f5f9",onMouseLeave:a=>a.currentTarget.style.color="#94a3b8",children:r.jsx(Et,{size:24})})]}),r.jsxs("div",{style:{padding:"24px"},children:[r.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",marginBottom:"16px"},children:[r.jsx("p",{style:{fontSize:"12px",color:"#94a3b8",margin:"0 0 8px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Record to Delete"}),r.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#f1f5f9",margin:0},children:e.name}),r.jsxs("p",{style:{fontSize:"13px",color:"#cbd5e1",margin:"6px 0 0 0"},children:["Type: ",e.recordType]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",padding:"12px",backgroundColor:"rgba(239, 68, 68, 0.05)",borderLeft:"3px solid #ef4444",marginBottom:"16px"},children:[r.jsx($t,{size:20,style:{color:"#ef4444",flexShrink:0,marginTop:"2px"}}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"13px",fontWeight:"600",color:"#ef4444",margin:"0 0 4px 0"},children:"This action cannot be undone"}),r.jsx("p",{style:{fontSize:"12px",color:"#cbd5e1",margin:0},children:"Once deleted, this record will be permanently removed from your account."})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"6px",marginBottom:"16px"},children:[r.jsx("input",{type:"checkbox",id:"confirm-delete",checked:i,onChange:a=>o(a.target.checked),style:{marginTop:"2px",cursor:"pointer",accentColor:"#ef4444"}}),r.jsx("label",{htmlFor:"confirm-delete",style:{fontSize:"13px",color:"#cbd5e1",cursor:"pointer",margin:0},children:"I understand this record will be permanently deleted"})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:n,disabled:s,style:{padding:"10px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#f1f5f9",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:s?"not-allowed":"pointer",opacity:s?.5:1,transition:"all 0.2s"},onMouseEnter:a=>{s||(a.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)")},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},children:"Cancel"}),r.jsx("button",{onClick:l,disabled:!i||s,style:{padding:"10px 16px",backgroundColor:i&&!s?"#ef4444":"#94a3b8",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:i&&!s?"pointer":"not-allowed",transition:"all 0.2s"},onMouseEnter:a=>{i&&!s&&(a.currentTarget.style.backgroundColor="#dc2626",a.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)")},onMouseLeave:a=>{i&&!s&&(a.currentTarget.style.backgroundColor="#ef4444",a.currentTarget.style.boxShadow="none")},children:s?"Deleting...":"Delete Record"})]})]})]})})},Vw=({domain:e,parentId:t,childRecords:n={},onAddRecord:s,onEditRecord:i,onDeleteRecord:o})=>{const a=(()=>{switch(e){case"finance":return["Finance"];case"services":return["Contact","ServiceHistory"];case"vehicles":return["ServiceHistory","Finance","Insurance","Government"];case"properties":return["ServiceHistory","Finance","Insurance","Government"];case"employments":return["Contact","Finance","Pension"];default:return["Contact","ServiceHistory","Finance","Insurance","Government","Pension"]}})(),[c,u]=S.useState(()=>{const p={};return a.forEach(m=>{const y=n[m]||[],j=rp(y);p[m]=_w(y,j)}),p}),[d,f]=S.useState({isOpen:!1}),[h,x]=S.useState({isOpen:!1}),g=p=>{u(m=>({...m,[p]:!m[p]}))},b=p=>e==="finance"&&p==="Finance"?"Bank Accounts":e==="services"&&p==="Contact"?"Service Providers":e==="vehicles"&&p==="ServiceHistory"?"Servicing & MOT":e==="properties"&&p==="ServiceHistory"?"Maintenance History":{Contact:"Contacts",ServiceHistory:"Service History",Finance:"Finance",Insurance:"Insurance",Government:"Government",Pension:"Pensions"}[p]||p,v=p=>e==="finance"&&p==="Finance"?"":{Contact:"",ServiceHistory:"",Finance:"",Insurance:"",Government:"",Pension:""}[p]||"";return r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{style:{paddingBottom:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#f1f5f9",margin:"0 0 8px 0"},children:"Related Records"}),r.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",margin:0},children:"Manage contacts, finance, insurance, and other information"})]}),a.map(p=>{const m=n[p]||[],y=c[p],j=rp(m);return r.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",overflow:"hidden"},children:[r.jsxs("button",{onClick:()=>g(p),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="transparent"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[r.jsx("span",{style:{fontSize:"20px"},children:v(p)}),r.jsxs("div",{style:{textAlign:"left"},children:[r.jsx("p",{style:{fontSize:"16px",fontWeight:"600",color:"#f1f5f9",margin:0},children:b(p)}),r.jsxs("p",{style:{fontSize:"12px",color:"#94a3b8",margin:"4px 0 0 0"},children:[m.length," record",m.length!==1?"s":"",j&&r.jsx("span",{style:{marginLeft:"8px",color:"#ef4444",fontWeight:"600"},children:"  Has urgent renewals"})]})]})]}),r.jsx(Bl,{size:20,style:{color:"#94a3b8",transition:"transform 0.3s",transform:y?"rotate(180deg)":"rotate(0)"}})]}),y&&r.jsxs("div",{style:{padding:"0 16px 16px 16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",gap:"12px"},children:[m.length===0?r.jsxs("div",{style:{padding:"32px 16px",textAlign:"center",color:"#64748b"},children:[r.jsxs("p",{style:{fontSize:"14px",margin:"0 0 12px 0"},children:["No ",b(p).toLowerCase()," yet"]}),r.jsxs("button",{onClick:()=>f({isOpen:!0,recordType:p}),style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="#2563eb",k.currentTarget.style.boxShadow="0 4px 12px rgba(37, 99, 235, 0.3)"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="#3b82f6",k.currentTarget.style.boxShadow="none"},children:[r.jsx(ct,{size:14}),"Add ",b(p).slice(0,-1)]})]}):m.map(k=>{var _,T,W,V;const D=Ex(k.renewalDate),R={critical:{border:"#ef4444",bg:"#fef2f2",text:"#991b1b"},important:{border:"#f97316",bg:"#fff7ed",text:"#92400e"},upcoming:{border:"#3b82f6",bg:"#eff6ff",text:"#1e3a8a"},none:{border:"#cbd5e1",bg:"#f1f5f9",text:"#64748b"}}[D.level];return r.jsx("div",{style:{padding:"12px",backgroundColor:R.bg,border:`2px solid ${R.border}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:P=>{P.currentTarget.style.transform="translateX(4px)",P.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)"},onMouseLeave:P=>{P.currentTarget.style.transform="translateX(0)",P.currentTarget.style.boxShadow="none"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"12px"},children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[r.jsx("p",{style:{fontSize:"15px",fontWeight:"600",color:R.text,margin:0,wordBreak:"break-word"},children:k.name}),k.attachment&&r.jsxs("a",{href:Oc(e,t,k._id),target:"_blank",rel:"noopener noreferrer",onClick:P=>P.stopPropagation(),style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",fontSize:"11px",fontWeight:"500",color:"#3b82f6",whiteSpace:"nowrap",textDecoration:"none",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.2)",P.currentTarget.style.borderColor="rgba(59, 130, 246, 0.5)"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.1)",P.currentTarget.style.borderColor="rgba(59, 130, 246, 0.3)"},children:[r.jsx(Xv,{size:12}),"File"]})]}),(((_=k.fields)==null?void 0:_.phone)||((T=k.fields)==null?void 0:T.email))&&r.jsxs("div",{style:{marginBottom:"8px"},children:[((W=k.fields)==null?void 0:W.phone)&&r.jsxs("p",{style:{fontSize:"13px",color:R.text,margin:"4px 0",opacity:.9},children:[" ",k.fields.phone]}),((V=k.fields)==null?void 0:V.email)&&r.jsxs("p",{style:{fontSize:"13px",color:R.text,margin:"4px 0",opacity:.9},children:[" ",k.fields.email]})]}),D.level!=="none"&&r.jsx("p",{style:{fontSize:"13px",fontWeight:"600",color:R.text,margin:"4px 0",opacity:.9},children:D.message})]}),r.jsxs("div",{style:{display:"flex",gap:"6px",flexShrink:0},children:[r.jsx("button",{onClick:()=>f({isOpen:!0,record:k,recordType:p}),style:{padding:"6px 10px",backgroundColor:"rgba(59, 130, 246, 0.2)",color:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"4px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.3)"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.2)"},children:"Edit"}),r.jsx("button",{onClick:()=>x({isOpen:!0,record:k}),style:{padding:"6px 10px",backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid #ef4444",borderRadius:"4px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.3)"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.2)"},children:"Delete"})]})]})},k._id)}),m.length>0&&r.jsxs("button",{onClick:()=>f({isOpen:!0,recordType:p}),style:{padding:"10px 16px",backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px dashed #3b82f6",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s",marginTop:"8px"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.2)"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.1)"},children:["+ Add another ",b(p).slice(0,-1)]})]})]},p)}),d.isOpen&&r.jsx($w,{domain:e,parentId:t,record:d.record,recordType:d.recordType,onClose:()=>f({isOpen:!1}),onSuccess:()=>{f({isOpen:!1}),s==null||s(d.recordType||"Contact")}}),h.isOpen&&h.record&&r.jsx(Uw,{record:h.record,isLoading:h.isLoading,onConfirm:async()=>{x({...h,isLoading:!0});try{o==null||o(h.record.recordType,h.record._id),x({isOpen:!1})}finally{x({...h,isLoading:!1})}},onCancel:()=>x({isOpen:!1})})]})},Hw=e=>{switch(e){case"Vehicle":return r.jsx(Wt,{size:32,strokeWidth:1.5});case"Property":return r.jsx(In,{size:32,strokeWidth:1.5});case"Employment":return r.jsx(xr,{size:32,strokeWidth:1.5});case"Services":return r.jsx(Rn,{size:32,strokeWidth:1.5});case"Finance":return r.jsx(Hr,{size:32,strokeWidth:1.5});default:return r.jsx(Wt,{size:32,strokeWidth:1.5})}},oi=e=>({vehicles:"Vehicle",properties:"Property",employments:"Employment",services:"Service Provider",finance:"Finance"})[e]||e,Ca=e=>({vehicles:"/vehicles-new",properties:"/properties-new",employments:"/employments-new",services:"/services-new",finance:"/finance"})[e]||"/vehicles-new",qw=e=>e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()).trim(),ao=({domain:e,parentId:t})=>{const n=Me(),[s,i]=S.useState(!1),[o,l]=S.useState(!1),{data:a,isLoading:c,error:u}=bS(e,t),d=Nx(e),f=()=>{n(Ca(e))},h=async()=>{await d.mutateAsync(t),f()};if(c)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",color:"#64748b"},children:[r.jsx(Mc,{size:32,style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),r.jsxs("p",{children:["Loading ",oi(e).toLowerCase(),"..."]})]});if(u||!a)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",padding:"24px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b"},children:[r.jsx(at,{size:32,style:{marginBottom:"16px"}}),r.jsxs("p",{style:{fontSize:"18px",fontWeight:"500",marginBottom:"8px"},children:[oi(e)," not found"]}),r.jsx("p",{style:{fontSize:"14px",marginBottom:"16px"},children:(u==null?void 0:u.message)||"Unable to load this entity"}),r.jsxs(ge,{to:Ca(e),style:{color:"#dc2626",textDecoration:"underline",fontSize:"14px"},children:["Back to ",oi(e),"s"]})]});const x=a.childRecords?Object.values(a.childRecords).flat().length:0;return r.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"24px 16px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px",fontSize:"14px",color:"#64748b"},children:[r.jsxs(ge,{to:Ca(e),style:{display:"flex",alignItems:"center",gap:"4px",color:"#3b82f6",textDecoration:"none",transition:"color 0.2s"},onMouseEnter:g=>g.currentTarget.style.color="#2563eb",onMouseLeave:g=>g.currentTarget.style.color="#3b82f6",children:[r.jsx(no,{size:16}),"Back to ",oi(e),"s"]}),r.jsx("span",{children:"/"}),r.jsx("span",{children:a.name})]}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"24px",marginBottom:"32px",padding:"24px",backgroundColor:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(4px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flex:1},children:[r.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center"},children:Hw(a.domainType)}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",color:"#f1f5f9",margin:"0 0 8px 0"},children:a.name}),r.jsxs("p",{style:{fontSize:"14px",color:"#94a3b8",margin:0},children:[oi(a.domainType),"  ",x," record",x!==1?"s":""]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"},children:[r.jsxs("button",{onClick:()=>i(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor="#2563eb",g.currentTarget.style.boxShadow="0 4px 12px rgba(37, 99, 235, 0.3)"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="#3b82f6",g.currentTarget.style.boxShadow="none"},children:[r.jsx(ix,{size:16}),"Edit"]}),r.jsxs("button",{onClick:()=>l(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor="#dc2626",g.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="#ef4444",g.currentTarget.style.boxShadow="none"},children:[r.jsx($t,{size:16}),"Delete"]})]})]}),Object.keys(a.fields||{}).length>0&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},children:Object.entries(a.fields).map(([g,b])=>r.jsxs("div",{style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px"},children:[r.jsx("p",{style:{fontSize:"12px",color:"#94a3b8",margin:"0 0 8px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:qw(g)}),r.jsx("p",{style:{fontSize:"14px",color:"#f1f5f9",margin:0,wordBreak:"break-word"},children:b?String(b):""})]},g))}),r.jsx(Vw,{domain:e,parentId:t,childRecords:a.childRecords,onAddRecord:g=>{console.log("Add record:",g)},onEditRecord:(g,b)=>{console.log("Edit record:",g,b)},onDeleteRecord:(g,b)=>{console.log("Delete record:",g,b)}}),r.jsx(Qs,{domain:e,entity:a,isOpen:s,onClose:()=>i(!1),onSuccess:()=>i(!1)},a._id),o&&r.jsx(Ks,{entity:a,childRecordCount:x,onConfirm:h,onCancel:()=>l(!1),isLoading:d.isPending})]})},Qw=()=>{const{id:e}=Bt();return e?r.jsx("div",{style:{backgroundColor:"#0f172a",minHeight:"100vh",color:"#f1f5f9",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:r.jsx(ao,{domain:"vehicles",parentId:e})}):r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",backgroundColor:"#0f172a",color:"#ef4444"},children:"Vehicle ID not found"})},Kw=()=>{const{id:e}=Bt();return e?r.jsx("div",{style:{backgroundColor:"#0f172a",minHeight:"100vh",color:"#f1f5f9",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:r.jsx(ao,{domain:"properties",parentId:e})}):r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",backgroundColor:"#0f172a",color:"#ef4444"},children:"Property ID not found"})},Gw=()=>{const{id:e}=Bt();return e?r.jsx("div",{style:{backgroundColor:"#0f172a",minHeight:"100vh",color:"#f1f5f9",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:r.jsx(ao,{domain:"employments",parentId:e})}):r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",backgroundColor:"#0f172a",color:"#ef4444"},children:"Employment ID not found"})},Yw=()=>{const{id:e}=Bt();return e?r.jsx("div",{style:{backgroundColor:"#0f172a",minHeight:"100vh",color:"#f1f5f9",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:r.jsx(ao,{domain:"services",parentId:e})}):r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",backgroundColor:"#0f172a",color:"#ef4444"},children:"Service Provider ID not found"})},Jw=()=>{const{id:e}=Bt();return e?r.jsx("div",{style:{backgroundColor:"#0f172a",minHeight:"100vh",color:"#f1f5f9",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:r.jsx(ao,{domain:"finance",parentId:e})}):r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",backgroundColor:"#0f172a",color:"#ef4444"},children:"Finance ID not found"})},Zd="/api/admin/domain-config";async function Xw(){const e=await fetch(Zd,{credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch domain configs: ${e.statusText}`);return e.json()}async function Zw(e,t){const n=await fetch(`${Zd}/${e}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({allowedRecordTypes:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update domain config")}return n.json()}async function e4(e){const t=await fetch(`${Zd}/record-types`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create custom record type")}return t.json()}function t4(){return Ye({queryKey:["domainConfig"],queryFn:Xw,staleTime:5*60*1e3})}function n4(){const e=be();return Te({mutationFn:({domain:t,allowedRecordTypes:n})=>Zw(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["domainConfig"]}),e.invalidateQueries({queryKey:["childRecordTypes"]})}})}function r4(){const e=be();return Te({mutationFn:t=>e4(t),onSuccess:()=>{e.invalidateQueries({queryKey:["domainConfig"]}),e.invalidateQueries({queryKey:["childRecordTypes"]})}})}const s4=["Contact","ServiceHistory","Finance","Insurance","Government","Pension"],i4=({config:e,onClose:t})=>{const[n,s]=S.useState(e.allowedRecordTypes),[i,o]=S.useState(!1),l=n4(),a=f=>{s(h=>h.includes(f)?h.filter(x=>x!==f):[...h,f])},c=async()=>{if(n.length===0){alert("At least one record type must be selected");return}o(!0);try{await l.mutateAsync({domain:e.domainType.toLowerCase(),allowedRecordTypes:n}),alert(`${e.domainType} configuration updated successfully`),t()}catch(f){alert(`Error updating configuration: ${f instanceof Error?f.message:"Unknown error"}`)}finally{o(!1)}},u=Array.from(new Set([...s4,...e.customRecordTypes.map(f=>f.name)])),d=JSON.stringify(n.sort())!==JSON.stringify(e.allowedRecordTypes.sort());return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onClick:t,children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto"},onClick:f=>f.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid #e2e8f0",position:"sticky",top:0,backgroundColor:"#ffffff",zIndex:10},children:[r.jsxs("div",{children:[r.jsxs("h2",{style:{fontSize:"18px",fontWeight:"600",margin:"0",color:"#0f172a"},children:["Configure ",e.domainType," Record Types"]}),r.jsxs("p",{style:{fontSize:"13px",color:"#64748b",margin:"4px 0 0 0"},children:["Select which record types are available for ",e.domainType.toLowerCase()," entries"]})]}),r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",color:"#64748b",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.3s ease"},onMouseEnter:f=>{f.currentTarget.style.color="#0f172a"},onMouseLeave:f=>{f.currentTarget.style.color="#64748b"},children:r.jsx(Et,{size:20})})]}),r.jsxs("div",{style:{padding:"24px"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"},children:u.map(f=>{const h=n.includes(f),x=e.customRecordTypes.some(g=>g.name===f);return r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",cursor:"pointer",backgroundColor:h?"#f0f9ff":"#ffffff",transition:"all 0.3s ease"},onMouseEnter:g=>{h||(g.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:g=>{g.currentTarget.style.backgroundColor=h?"#f0f9ff":"#ffffff"},children:[r.jsx("input",{type:"checkbox",checked:h,onChange:()=>a(f),style:{display:"none"}}),r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",color:h?"#0369a1":"#cbd5e1"},children:h?r.jsx(Xm,{size:20}):r.jsx(bv,{size:20})}),r.jsx("div",{style:{flex:1},children:r.jsxs("div",{style:{fontSize:"14px",fontWeight:"500",color:"#0f172a"},children:[f,x&&r.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",fontWeight:"500",color:"#f59e0b",backgroundColor:"#fef3c7",padding:"2px 6px",borderRadius:"4px"},children:"Custom"})]})})]},f)})}),n.length===0&&r.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",display:"flex",gap:"8px",fontSize:"13px",color:"#991b1b"},children:[r.jsx(at,{size:16,style:{marginTop:"2px",flexShrink:0}}),r.jsx("div",{children:"At least one record type must be selected"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"12px",padding:"16px 24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc",position:"sticky",bottom:0},children:[r.jsx("button",{onClick:t,style:{padding:"10px 20px",backgroundColor:"#ffffff",color:"#0f172a",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f1f5f9"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="#ffffff"},children:"Cancel"}),r.jsx("button",{onClick:c,disabled:!d||i||n.length===0,style:{padding:"10px 20px",backgroundColor:!d||i||n.length===0?"#cbd5e1":"#0f172a",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:!d||i||n.length===0?"not-allowed":"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:f=>{d&&!i&&n.length>0&&(f.currentTarget.style.backgroundColor="#1e293b")},onMouseLeave:f=>{d&&!i&&n.length>0&&(f.currentTarget.style.backgroundColor="#0f172a")},children:i?"Saving":"Save Changes"})]})]})})},o4={Vehicle:"",Property:"",Employment:"",Services:"",Finance:""},l4={Vehicle:"Cars, motorcycles, and other vehicles",Property:"Houses, apartments, and real estate",Employment:"Jobs and employment relationships",Services:"Tradespeople and service providers",Finance:"Financial products and accounts"},a4=()=>{const{data:e,isLoading:t,error:n}=t4(),[s,i]=S.useState(null),[o,l]=S.useState(!1),a=u=>{i(u),l(!0)},c=()=>{l(!1),i(null)};return t?r.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Loading domain configurations"}):n?r.jsxs("div",{style:{padding:"24px",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"12px",display:"flex",gap:"12px",alignItems:"flex-start",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx(at,{size:20,style:{color:"#dc2626",marginTop:"2px"}}),r.jsxs("div",{style:{color:"#991b1b"},children:[r.jsx("strong",{children:"Error loading domain configurations"}),r.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px"},children:n instanceof Error?n.message:"Unknown error"})]})]}):!e||e.length===0?r.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"No domain configurations available."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:e.map(u=>r.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)",fontFamily:"Inter, system-ui, -apple-system, sans-serif",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:d=>{d.currentTarget.style.boxShadow="0 10px 25px rgba(0, 0, 0, 0.1)",d.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:d=>{d.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.05)",d.currentTarget.style.transform="translateY(0)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[r.jsx("div",{style:{fontSize:"28px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9",borderRadius:"8px"},children:o4[u.domainType]||""}),r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0",color:"#0f172a"},children:u.domainType}),r.jsx("p",{style:{fontSize:"12px",color:"#64748b",margin:"4px 0 0 0"},children:l4[u.domainType]||"Domain"})]})]}),r.jsx("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"16px"},children:r.jsxs("p",{style:{fontSize:"13px",color:"#475569",margin:"0"},children:[r.jsx("span",{style:{fontWeight:"600"},children:u.allowedRecordTypes.length})," ","record type",u.allowedRecordTypes.length!==1?"s":""," available"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"16px"},children:u.allowedRecordTypes.map(d=>r.jsx("span",{style:{padding:"6px 12px",backgroundColor:"#e0f2fe",color:"#0369a1",borderRadius:"6px",fontSize:"12px",fontWeight:"500"},children:d},d))}),r.jsxs("button",{onClick:()=>a(u),style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"10px 16px",backgroundColor:"#0f172a",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#1e293b"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="#0f172a"},children:[r.jsx(Ud,{size:16}),"Configure"]})]},u.domainType))}),o&&s&&r.jsx(i4,{config:s,onClose:c})]})},c4=["Phone","Mail","Calendar","DollarSign","Shield","Wrench","Home","Car","Briefcase","Users","FileText","Clock","AlertCircle","CheckCircle","Heart","Award"],d4=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#6366f1"],u4=({onClose:e})=>{const[t,n]=S.useState({name:"",icon:"FileText",color:"#3b82f6",description:""}),[s,i]=S.useState(!1),[o,l]=S.useState(null),a=r4(),c=d=>{const{name:f,value:h}=d.target;n(x=>({...x,[f]:h})),l(null)},u=async d=>{if(d.preventDefault(),l(null),!t.name.trim()){l("Name is required");return}if(t.name.length>50){l("Name must be less than 50 characters");return}if(!t.icon.trim()){l("Icon is required");return}if(!t.color.match(/^#[0-9a-f]{6}$/i)){l("Color must be a valid hex color (e.g., #3b82f6)");return}i(!0);try{await a.mutateAsync({name:t.name.trim(),icon:t.icon.trim(),color:t.color,description:t.description.trim(),requiredFields:[]}),alert("Custom record type created successfully"),e()}catch(f){l(f instanceof Error?f.message:"Failed to create custom record type")}finally{i(!1)}};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onClick:e,children:r.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto"},onClick:d=>d.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid #e2e8f0",position:"sticky",top:0,backgroundColor:"#ffffff",zIndex:10},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",margin:"0",color:"#0f172a"},children:"Create Custom Record Type"}),r.jsx("p",{style:{fontSize:"13px",color:"#64748b",margin:"4px 0 0 0"},children:"Add a new record type for your organization"})]}),r.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",color:"#64748b",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.3s ease"},onMouseEnter:d=>{d.currentTarget.style.color="#0f172a"},onMouseLeave:d=>{d.currentTarget.style.color="#64748b"},children:r.jsx(Et,{size:20})})]}),r.jsxs("form",{onSubmit:u,children:[r.jsxs("div",{style:{padding:"24px"},children:[o&&r.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",display:"flex",gap:"8px",fontSize:"13px",color:"#991b1b"},children:[r.jsx(at,{size:16,style:{marginTop:"2px",flexShrink:0}}),r.jsx("div",{children:o})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"600",color:"#0f172a",marginBottom:"6px"},children:["Name ",r.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),r.jsx("input",{type:"text",name:"name",value:t.name,onChange:c,placeholder:"e.g., Warranty",maxLength:50,style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:d=>{d.target.style.borderColor="#0369a1"},onBlur:d=>{d.target.style.borderColor="#e2e8f0"}}),r.jsxs("p",{style:{fontSize:"12px",color:"#64748b",margin:"4px 0 0 0"},children:[t.name.length,"/50 characters"]})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"600",color:"#0f172a",marginBottom:"6px"},children:["Icon ",r.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),r.jsxs("select",{name:"icon",value:t.icon,onChange:d=>n(f=>({...f,icon:d.target.value})),style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:d=>{d.currentTarget.style.borderColor="#0369a1"},onBlur:d=>{d.currentTarget.style.borderColor="#e2e8f0"},children:[r.jsx("option",{value:"",children:"Select an icon"}),c4.map(d=>r.jsx("option",{value:d,children:d},d))]}),r.jsx("p",{style:{fontSize:"12px",color:"#64748b",margin:"4px 0 0 0"},children:"Lucide React icon name"})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"600",color:"#0f172a",marginBottom:"6px"},children:["Color ",r.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[r.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:t.color,borderRadius:"8px",border:"2px solid #e2e8f0"}}),r.jsx("input",{type:"text",name:"color",value:t.color,onChange:c,placeholder:"#3b82f6",style:{flex:1,padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:d=>{d.target.style.borderColor="#0369a1"},onBlur:d=>{d.target.style.borderColor="#e2e8f0"}})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:d4.map(d=>r.jsx("button",{type:"button",onClick:()=>n(f=>({...f,color:d})),style:{width:"100%",aspectRatio:"1",backgroundColor:d,border:t.color===d?"3px solid #0f172a":"1px solid #e2e8f0",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:f=>{t.color!==d&&(f.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)")},onMouseLeave:f=>{f.currentTarget.style.boxShadow="none"}},d))})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"600",color:"#0f172a",marginBottom:"6px"},children:"Description"}),r.jsx("textarea",{name:"description",value:t.description,onChange:c,placeholder:"What is this record type for?",maxLength:200,style:{width:"100%",minHeight:"80px",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontFamily:"Inter, system-ui, -apple-system, sans-serif",transition:"border-color 0.3s ease",boxSizing:"border-box",resize:"vertical"},onFocus:d=>{d.target.style.borderColor="#0369a1"},onBlur:d=>{d.target.style.borderColor="#e2e8f0"}}),r.jsxs("p",{style:{fontSize:"12px",color:"#64748b",margin:"4px 0 0 0"},children:[t.description.length,"/200 characters"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"12px",padding:"16px 24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc",position:"sticky",bottom:0},children:[r.jsx("button",{type:"button",onClick:e,style:{padding:"10px 20px",backgroundColor:"#ffffff",color:"#0f172a",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#f1f5f9"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="#ffffff"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:s,style:{padding:"10px 20px",backgroundColor:s?"#cbd5e1":"#0f172a",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:s?"not-allowed":"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:d=>{s||(d.currentTarget.style.backgroundColor="#1e293b")},onMouseLeave:d=>{s||(d.currentTarget.style.backgroundColor="#0f172a")},children:s?"Creating":"Create Record Type"})]})]})]})})},f4=()=>{const{user:e,loading:t}=yr(),[n,s]=S.useState(!1);if(t)return r.jsx("div",{style:{padding:"20px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:"Checking authentication"});if(!e||e.role!=="admin")return r.jsx(_n,{to:"/",replace:!0});const i=()=>{s(!1)},o={display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#0f172a",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},l={...o,backgroundColor:"#1e293b"};return r.jsxs("div",{className:"container mx-auto px-4 py-8",style:{maxWidth:"1400px",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:[r.jsx("header",{style:{marginBottom:"32px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[r.jsx("div",{style:{padding:"10px",borderRadius:"12px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Ud,{size:24,style:{color:"#0f172a"}})}),r.jsx("div",{children:r.jsx("h1",{style:{fontSize:"28px",fontWeight:"700",margin:"0",color:"#0f172a"},children:"Domain Configuration"})})]}),r.jsx("p",{style:{fontSize:"14px",color:"#64748b",margin:"0",marginTop:"8px"},children:"Configure which record types are available for each parent domain and manage custom record types."})]}),r.jsxs("button",{onMouseEnter:a=>{Object.assign(a.currentTarget.style,l)},onMouseLeave:a=>{Object.assign(a.currentTarget.style,o)},onClick:()=>s(!0),style:o,children:[r.jsx(ct,{size:18}),"Create Custom Type"]})]})}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:r.jsx(a4,{})}),n&&r.jsx(u4,{onClose:i})]})};function p4(){const[e,t]=S.useState(null),[n,s]=S.useState(!0),[i,o]=S.useState(null),[l,a]=S.useState(!1),c=async()=>{s(!0),o(null);try{const x=await fetch("/api/admin/system-status",{credentials:"include"});if(!x.ok)throw new Error("Failed to fetch system status");const g=await x.json();t(g)}catch(x){o(x.message||"Failed to load system status")}finally{s(!1)}},u=async()=>{a(!0),o(null);try{const x=await fetch("/api/admin/system-status/seed-configs",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!x.ok){const g=await x.json();throw new Error(g.error||"Failed to seed configs")}await c()}catch(x){o(x.message||"Failed to seed domain configs")}finally{a(!1)}};S.useEffect(()=>{c()},[]);const d={backgroundColor:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(4px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"24px"},f={backgroundColor:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"8px",padding:"16px",textAlign:"center"};if(n)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",color:"#64748b"},children:[r.jsx(Mc,{size:32,style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),r.jsx("p",{children:"Loading system status..."})]});if(i||!e)return r.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"24px 16px"},children:r.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",color:"#991b1b",textAlign:"center"},children:[r.jsx(at,{size:48,style:{marginBottom:"16px"}}),r.jsx("h2",{style:{fontSize:"20px",marginBottom:"8px"},children:"Failed to load system status"}),r.jsx("p",{style:{marginBottom:"16px"},children:i||"Unknown error occurred"}),r.jsxs("button",{onClick:c,style:{padding:"12px 24px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:[r.jsx(Lf,{size:16,style:{marginRight:"8px",verticalAlign:"text-top"}}),"Retry"]})]})});const h=e.domainConfigs.missing.length===0;return r.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"24px 16px"},children:[r.jsxs("div",{style:{marginBottom:"32px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"32px",fontWeight:"600",color:"#f1f5f9",margin:"0 0 8px 0"},children:"System Status"}),r.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",margin:0},children:"Epic 6 Migration Status & Database Health"})]}),r.jsxs("button",{onClick:c,disabled:n,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:n?"not-allowed":"pointer",opacity:n?.6:1},children:[r.jsx(Lf,{size:16}),"Refresh"]})]}),r.jsxs("div",{style:{...d,marginBottom:"24px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[r.jsx(kv,{size:24,color:"#3b82f6",strokeWidth:1.5}),r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#f1f5f9",margin:0},children:"Database Connection"}),e.database.connected?r.jsx(_s,{size:20,color:"#10b981",strokeWidth:2}):r.jsx(at,{size:20,color:"#ef4444",strokeWidth:2})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[r.jsxs("div",{style:f,children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Status"}),r.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:e.database.connected?"#10b981":"#ef4444"},children:e.database.readyStateLabel})]}),r.jsxs("div",{style:f,children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Database"}),r.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#f1f5f9"},children:e.database.name})]}),r.jsxs("div",{style:f,children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Host"}),r.jsx("div",{style:{fontSize:"14px",fontWeight:"500",color:"#f1f5f9"},children:e.database.host||"localhost"})]})]})]}),r.jsxs("div",{style:{...d,marginBottom:"24px",borderColor:h?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx(ev,{size:24,color:h?"#10b981":"#ef4444",strokeWidth:1.5}),r.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#f1f5f9",margin:0},children:"Domain Configurations"}),h?r.jsx(_s,{size:20,color:"#10b981",strokeWidth:2}):r.jsx(at,{size:20,color:"#ef4444",strokeWidth:2})]}),!h&&r.jsxs("button",{onClick:u,disabled:l,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},children:[l&&r.jsx(Mc,{size:16,style:{animation:"spin 1s linear infinite"}}),"Seed Missing Configs"]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"16px"},children:[r.jsxs("div",{style:f,children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Configured"}),r.jsxs("div",{style:{fontSize:"28px",fontWeight:"600",color:"#f1f5f9"},children:[e.domainConfigs.total," / ",e.domainConfigs.expected]})]}),r.jsxs("div",{style:f,children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Missing"}),r.jsx("div",{style:{fontSize:"28px",fontWeight:"600",color:e.domainConfigs.missing.length>0?"#ef4444":"#10b981"},children:e.domainConfigs.missing.length})]})]}),e.domainConfigs.missing.length>0&&r.jsxs("div",{style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[r.jsx("div",{style:{fontSize:"14px",color:"#fca5a5",fontWeight:"500",marginBottom:"8px"},children:"Missing Configurations:"}),r.jsx("div",{style:{fontSize:"14px",color:"#f1f5f9"},children:e.domainConfigs.missing.join(", ")})]}),e.domainConfigs.details.length>0&&r.jsxs("div",{style:{marginTop:"16px"},children:[r.jsx("div",{style:{fontSize:"14px",color:"#94a3b8",marginBottom:"12px",fontWeight:"500"},children:"Configured Domains:"}),r.jsx("div",{style:{display:"grid",gap:"12px"},children:e.domainConfigs.details.map(x=>r.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"8px",padding:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#f1f5f9",marginBottom:"4px"},children:x.domainType}),r.jsxs("div",{style:{fontSize:"13px",color:"#94a3b8"},children:[x.allowedRecordTypes.length," record types",x.customRecordTypesCount>0&&` (${x.customRecordTypesCount} custom)`]})]}),r.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:["Updated: ",new Date(x.updatedAt).toLocaleDateString()]})]},x.domainType))})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},children:[r.jsxs("div",{style:d,children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#f1f5f9",marginBottom:"16px"},children:"Parent Entities"}),r.jsxs("div",{style:{...f,marginBottom:"16px"},children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total"}),r.jsx("div",{style:{fontSize:"36px",fontWeight:"600",color:"#3b82f6"},children:e.parentEntities.total})]}),Object.keys(e.parentEntities.byDomain).length>0&&r.jsx("div",{children:Object.entries(e.parentEntities.byDomain).map(([x,g])=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"14px"},children:[r.jsx("span",{style:{color:"#94a3b8"},children:x}),r.jsx("span",{style:{color:"#f1f5f9",fontWeight:"500"},children:g})]},x))})]}),r.jsxs("div",{style:d,children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#f1f5f9",marginBottom:"16px"},children:"Child Records"}),r.jsxs("div",{style:{...f,marginBottom:"16px"},children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total"}),r.jsx("div",{style:{fontSize:"36px",fontWeight:"600",color:"#10b981"},children:e.childRecords.total})]}),Object.keys(e.childRecords.byType).length>0&&r.jsx("div",{children:Object.entries(e.childRecords.byType).map(([x,g])=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"14px"},children:[r.jsx("span",{style:{color:"#94a3b8"},children:x}),r.jsx("span",{style:{color:"#f1f5f9",fontWeight:"500"},children:g})]},x))})]}),r.jsxs("div",{style:d,children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#f1f5f9",marginBottom:"16px"},children:"Users"}),r.jsxs("div",{style:{...f,marginBottom:"16px"},children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total"}),r.jsx("div",{style:{fontSize:"36px",fontWeight:"600",color:"#8b5cf6"},children:e.users.total})]}),r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"14px"},children:[r.jsx("span",{style:{color:"#94a3b8"},children:"Admins"}),r.jsx("span",{style:{color:"#f1f5f9",fontWeight:"500"},children:e.users.admins})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"14px"},children:[r.jsx("span",{style:{color:"#94a3b8"},children:"Approved"}),r.jsx("span",{style:{color:"#f1f5f9",fontWeight:"500"},children:e.users.approved})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",fontSize:"14px"},children:[r.jsx("span",{style:{color:"#94a3b8"},children:"Pending"}),r.jsx("span",{style:{color:e.users.pending>0?"#f59e0b":"#10b981",fontWeight:"500"},children:e.users.pending})]})]})]})]}),r.jsxs("div",{style:{...d,marginTop:"24px"},children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#f1f5f9",marginBottom:"16px"},children:"Database Collections"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:Object.entries(e.collections).map(([x,g])=>r.jsxs("div",{style:{...f,textAlign:"left"},children:[r.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"4px",fontFamily:"monospace"},children:x}),r.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#f1f5f9"},children:g})]},x))})]}),r.jsxs("div",{style:{marginTop:"24px",textAlign:"center",fontSize:"12px",color:"#64748b"},children:["Last updated: ",new Date(e.timestamp).toLocaleString()]})]})}function h4({user:e,onSignOut:t}){const n=mr(),[s,i]=S.useState(!1),o=v=>v==="/"?n.pathname==="/"||/^\/(property|vehicles|finance|employment|government|insurance|legal|services)(\/|$)/.test(n.pathname):n.pathname.startsWith(v),l={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 40px",backgroundColor:"#ffffff",borderBottom:"1px solid #f1f5f9",boxShadow:"0 1px 3px 0 rgba(15, 23, 42, 0.08)",fontFamily:"Inter, system-ui, -apple-system, sans-serif",backdropFilter:"blur(8px)"},a={display:"flex",alignItems:"center",gap:"40px"},c={display:"flex",alignItems:"center",gap:"8px"},u={display:"flex",alignItems:"center",gap:"4px"},d={display:"flex",alignItems:"center",gap:"16px"},f={display:"flex",alignItems:"center",gap:"12px",padding:"8px 16px",borderRadius:"12px",backgroundColor:"#f8fafc",border:"1px solid #f1f5f9"},h={fontSize:"14px",fontWeight:"500",color:"#334155",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},x={display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",fontSize:"14px",fontWeight:"500",border:"1px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#ffffff",color:"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",fontFamily:"Inter, system-ui, -apple-system, sans-serif",textDecoration:"none"},g=v=>({display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"12px",textDecoration:"none",fontSize:"14px",fontWeight:v?"600":"500",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:v?"#0f172a":"transparent",color:v?"#ffffff":"#64748b",border:`1px solid ${v?"#0f172a":"transparent"}`,fontFamily:"Inter, system-ui, -apple-system, sans-serif"}),b=v=>({display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"8px",textDecoration:"none",fontSize:"13px",fontWeight:v?"600":"500",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:v?"#f1f5f9":"transparent",color:v?"#0f172a":"#64748b",border:`1px solid ${v?"#e2e8f0":"transparent"}`,fontFamily:"Inter, system-ui, -apple-system, sans-serif"});return r.jsxs("nav",{style:l,children:[r.jsxs("div",{style:a,children:[r.jsxs("div",{style:c,children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",backgroundColor:"#0f172a",borderRadius:"8px"},children:r.jsx(cr,{size:18,color:"#ffffff",strokeWidth:2})}),r.jsx("h1",{style:{fontSize:"20px",fontWeight:"600",color:"#0f172a",margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif",letterSpacing:"-0.025em"},children:"LegacyLock"})]}),r.jsxs("div",{style:u,children:[r.jsxs(ge,{to:"/",style:g(o("/")),children:[r.jsx(Bv,{size:18,strokeWidth:1.5}),"Home"]}),r.jsxs(ge,{to:"/vehicles-new",style:g(o("/vehicles-new")),children:[r.jsx(Wt,{size:18,strokeWidth:1.5}),"Vehicles"]}),r.jsxs(ge,{to:"/properties-new",style:g(o("/properties-new")),children:[r.jsx(In,{size:18,strokeWidth:1.5}),"Properties"]}),r.jsxs(ge,{to:"/employments-new",style:g(o("/employments-new")),children:[r.jsx(xr,{size:18,strokeWidth:1.5}),"Employments"]}),r.jsxs(ge,{to:"/services-new",style:g(o("/services-new")),children:[r.jsx(Rn,{size:18,strokeWidth:1.5}),"Services"]}),r.jsxs(ge,{to:"/finance-new",style:g(o("/finance-new")),children:[r.jsx(Hr,{size:18,strokeWidth:1.5}),"Finance"]})]})]}),r.jsxs("div",{style:d,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsxs("button",{onClick:()=>i(!s),onBlur:()=>setTimeout(()=>i(!1),200),style:{...b(o("/bank-import")||o("/transactions")||o("/renewals")),cursor:"pointer",border:"1px solid #e2e8f0"},children:[r.jsx(Rv,{size:16,strokeWidth:1.5}),"Tools",r.jsx(Bl,{size:14,strokeWidth:1.5})]}),s&&r.jsxs("div",{style:{position:"absolute",top:"calc(100% + 4px)",right:0,backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",minWidth:"180px",zIndex:50,overflow:"hidden"},children:[r.jsxs(ge,{to:"/bank-import",onClick:()=>i(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",textDecoration:"none",fontSize:"13px",fontWeight:"500",color:o("/bank-import")?"#0f172a":"#64748b",backgroundColor:o("/bank-import")?"#f8fafc":"transparent",transition:"all 0.2s",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:v=>{o("/bank-import")||(v.currentTarget.style.backgroundColor="#f8fafc",v.currentTarget.style.color="#0f172a")},onMouseLeave:v=>{o("/bank-import")||(v.currentTarget.style.backgroundColor="transparent",v.currentTarget.style.color="#64748b")},children:[r.jsx(so,{size:16,strokeWidth:1.5}),"Bank Import"]}),r.jsxs(ge,{to:"/transactions",onClick:()=>i(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",textDecoration:"none",fontSize:"13px",fontWeight:"500",color:o("/transactions")?"#0f172a":"#64748b",backgroundColor:o("/transactions")?"#f8fafc":"transparent",transition:"all 0.2s",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:v=>{o("/transactions")||(v.currentTarget.style.backgroundColor="#f8fafc",v.currentTarget.style.color="#0f172a")},onMouseLeave:v=>{o("/transactions")||(v.currentTarget.style.backgroundColor="transparent",v.currentTarget.style.color="#64748b")},children:[r.jsx(Hi,{size:16,strokeWidth:1.5}),"Transactions"]}),r.jsxs(ge,{to:"/renewals",onClick:()=>i(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",textDecoration:"none",fontSize:"13px",fontWeight:"500",color:o("/renewals")?"#0f172a":"#64748b",backgroundColor:o("/renewals")?"#f8fafc":"transparent",transition:"all 0.2s",fontFamily:"Inter, system-ui, -apple-system, sans-serif"},onMouseEnter:v=>{o("/renewals")||(v.currentTarget.style.backgroundColor="#f8fafc",v.currentTarget.style.color="#0f172a")},onMouseLeave:v=>{o("/renewals")||(v.currentTarget.style.backgroundColor="transparent",v.currentTarget.style.color="#64748b")},children:[r.jsx(Nn,{size:16,strokeWidth:1.5}),"Renewals"]})]})]}),r.jsxs(ge,{to:"/emergency",style:{...b(o("/emergency")),backgroundColor:o("/emergency")?"#dc2626":"#fef2f2",color:o("/emergency")?"#ffffff":"#dc2626",border:"1px solid #fecaca"},children:[r.jsx(at,{size:16,strokeWidth:1.5}),"Emergency"]}),(e==null?void 0:e.role)==="admin"&&r.jsxs(ge,{to:"/admin/domains",style:b(o("/admin/domains")),children:[r.jsx(cr,{size:16,strokeWidth:1.5}),"Admin"]})]}),e?r.jsxs(r.Fragment,{children:[r.jsxs(ge,{to:"/settings",style:{...b(o("/settings")),padding:"8px 14px"},children:[r.jsx(Ud,{size:16,strokeWidth:1.5}),"Settings"]}),r.jsxs("div",{style:f,children:[r.jsx(Sb,{size:16,color:"#64748b",strokeWidth:1.5}),r.jsx("span",{style:h,children:e.displayName})]}),r.jsxs("a",{href:"/auth/logout",style:x,onMouseEnter:v=>{v.currentTarget.style.backgroundColor="#f8fafc",v.currentTarget.style.borderColor="#cbd5e1",v.currentTarget.style.color="#475569"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="#ffffff",v.currentTarget.style.borderColor="#e2e8f0",v.currentTarget.style.color="#64748b"},children:[r.jsx(Qv,{size:16,strokeWidth:1.5}),"Logout"]})]}):r.jsx(ge,{to:"/login",style:x,children:"Sign in"})]})]})}function m4({children:e,user:t,onSignOut:n}){return r.jsxs("div",{className:"min-h-screen",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif",background:"#fefefe",color:"#0f172a"},children:[r.jsx(h4,{user:t,onSignOut:n}),r.jsx("main",{style:{background:"#fefefe",minHeight:"calc(100vh - 84px)"},children:e})]})}function x4(){const{user:e,loading:t,signOut:n}=yr();return mr().pathname==="/login"?r.jsx(Sf,{children:r.jsx(re,{path:"/login",element:r.jsx(lS,{})})}):r.jsx(m4,{user:e,onSignOut:n,children:r.jsxs(Sf,{children:[r.jsx(re,{path:"/auth/google",element:r.jsx(oS,{})}),r.jsx(re,{path:"/",element:r.jsx(ue,{children:r.jsx(Pb,{})})}),r.jsx(re,{path:"/dashboard",element:r.jsx(ue,{children:r.jsx(eS,{})})}),r.jsx(re,{path:"/vehicles-new",element:r.jsx(ue,{children:r.jsx(Ew,{})})}),r.jsx(re,{path:"/properties-new",element:r.jsx(ue,{children:r.jsx(Tw,{})})}),r.jsx(re,{path:"/employments-new",element:r.jsx(ue,{children:r.jsx(Iw,{})})}),r.jsx(re,{path:"/services-new",element:r.jsx(ue,{children:r.jsx(Rw,{})})}),r.jsx(re,{path:"/finance-new",element:r.jsx(ue,{children:r.jsx(Fw,{})})}),r.jsx(re,{path:"/vehicles/:id",element:r.jsx(ue,{children:r.jsx(Qw,{})})}),r.jsx(re,{path:"/properties/:id",element:r.jsx(ue,{children:r.jsx(Kw,{})})}),r.jsx(re,{path:"/employments/:id",element:r.jsx(ue,{children:r.jsx(Gw,{})})}),r.jsx(re,{path:"/services/:id",element:r.jsx(ue,{children:r.jsx(Yw,{})})}),r.jsx(re,{path:"/finance/:id",element:r.jsx(ue,{children:r.jsx(Jw,{})})}),r.jsx(re,{path:"/vehicles",element:r.jsx(_n,{to:"/vehicles-new",replace:!0})}),r.jsx(re,{path:"/property",element:r.jsx(_n,{to:"/properties-new",replace:!0})}),r.jsx(re,{path:"/employment",element:r.jsx(_n,{to:"/employments-new",replace:!0})}),r.jsx(re,{path:"/services",element:r.jsx(_n,{to:"/services-new",replace:!0})}),r.jsx(re,{path:"/property/:recordId",element:r.jsx(ue,{children:r.jsx(p2,{})})}),r.jsx(re,{path:"/vehicles/:recordId",element:r.jsx(ue,{children:r.jsx(g2,{})})}),r.jsx(re,{path:"/finance",element:r.jsx(_n,{to:"/finance-new",replace:!0})}),r.jsx(re,{path:"/finance/:recordId",element:r.jsx(_n,{to:"/finance-new",replace:!0})}),r.jsx(re,{path:"/government",element:r.jsx(ue,{children:r.jsx(q2,{})})}),r.jsx(re,{path:"/government/:recordId",element:r.jsx(ue,{children:r.jsx(G2,{})})}),r.jsx(re,{path:"/insurance",element:r.jsx(ue,{children:r.jsx(rj,{})})}),r.jsx(re,{path:"/insurance/:recordId",element:r.jsx(ue,{children:r.jsx(oj,{})})}),r.jsx(re,{path:"/legal",element:r.jsx(ue,{children:r.jsx(hj,{})})}),r.jsx(re,{path:"/legal/:recordId",element:r.jsx(ue,{children:r.jsx(yj,{})})}),r.jsx(re,{path:"/services/:recordId",element:r.jsx(ue,{children:r.jsx(kj,{})})}),r.jsx(re,{path:"/domains",element:r.jsx(ue,{children:r.jsx(sS,{})})}),r.jsx(re,{path:"/renewals",element:r.jsx(ue,{children:r.jsx(Mj,{})})}),r.jsx(re,{path:"/emergency",element:r.jsx(ue,{children:r.jsx(Hj,{})})}),r.jsx(re,{path:"/settings",element:r.jsx(ue,{children:r.jsx(dS,{})})}),r.jsx(re,{path:"/admin/domains",element:r.jsx(ue,{children:r.jsx(f4,{})})}),r.jsx(re,{path:"/admin/system-status",element:r.jsx(ue,{children:r.jsx(p4,{})})}),r.jsx(re,{path:"/bank-import",element:r.jsx(ue,{children:r.jsx(fS,{})})}),r.jsx(re,{path:"/transactions",element:r.jsx(ue,{children:r.jsx(TS,{})})}),r.jsx(re,{path:"/entry/:id",element:r.jsx(ue,{children:r.jsx(iS,{})})}),r.jsx(re,{path:"/old-dashboard",element:r.jsx(ue,{children:r.jsx(Jj,{})})})]})})}const y4=[{_id:"fallback-accounts",name:"Accounts",description:"Bank accounts and building society accounts",parentId:null,userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),children:[{_id:"fallback-current-accounts",name:"Current Accounts",parentId:"fallback-accounts",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"fallback-savings-accounts",name:"Savings Accounts",parentId:"fallback-accounts",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"fallback-isas",name:"ISAs",description:"Individual Savings Accounts",parentId:"fallback-accounts",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]},{_id:"fallback-bills",name:"Bills",description:"Utilities and recurring bills",parentId:null,userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),children:[{_id:"fallback-gas-electricity",name:"Gas & Electricity",parentId:"fallback-bills",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"fallback-water",name:"Water",parentId:"fallback-bills",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"fallback-council-tax",name:"Council Tax",parentId:"fallback-bills",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"fallback-tv-licence",name:"TV Licence",parentId:"fallback-bills",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]},{_id:"fallback-pensions",name:"Pensions",description:"Pension schemes and retirement savings",parentId:null,userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),children:[{_id:"fallback-sipps",name:"SIPPs",description:"Self-Invested Personal Pensions",parentId:"fallback-pensions",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"fallback-workplace-pensions",name:"Workplace Pensions",parentId:"fallback-pensions",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]},{_id:"fallback-investments",name:"Investments",description:"Investment accounts and savings",parentId:null,userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),children:[{_id:"fallback-premium-bonds",name:"Premium Bonds",parentId:"fallback-investments",userId:"system",isSystemCategory:!0,isDeleted:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]}],g4=S.createContext(void 0),wl="categories-data",v4=5*60*1e3;function b4(){try{const e=sessionStorage.getItem(wl);if(!e)return null;const{data:t,timestamp:n}=JSON.parse(e);return Date.now()-n>v4?(sessionStorage.removeItem(wl),null):t}catch{return null}}function j4(e){try{const t={data:e,timestamp:Date.now()};sessionStorage.setItem(wl,JSON.stringify(t))}catch{}}function S4(){try{sessionStorage.removeItem(wl)}catch{}}function w4({children:e}){const[t,n]=S.useState([]),[s,i]=S.useState(!0),[o,l]=S.useState(null),[a,c]=S.useState(!1),u=S.useCallback(async()=>{i(!0),l(null);try{const b=b4();if(b){n(b.categories),c(!1),i(!1);return}const v=await Yj();n(v.categories),c(!1),j4(v)}catch(b){console.warn("Failed to fetch categories, using fallback:",b.message),n(y4),c(!0),l(b.message||"Failed to load categories")}finally{i(!1)}},[]);S.useEffect(()=>{u()},[u]);const d=S.useCallback(b=>{const v=p=>{for(const m of p){if(m._id===b)return m;if(m.children){const y=v(m.children);if(y)return y}}};return v(t)},[t]),f=S.useCallback(b=>{if(b===null)return t.filter(p=>!p.parentId);const v=d(b);return(v==null?void 0:v.children)||[]},[t,d]),h=S.useCallback(()=>t.filter(b=>!b.parentId),[t]),x=S.useCallback(async()=>{S4(),await u()},[u]),g={categories:t,loading:s,error:o,isUsingFallback:a,refresh:u,clearCache:x,getCategoryById:d,getCategoriesByParent:f,getRootCategories:h};return r.jsx(g4.Provider,{value:g,children:e})}const C4=new D1;Em(document.getElementById("root")).render(r.jsx(se.StrictMode,{children:r.jsx(P1,{client:C4,children:r.jsx(tS,{children:r.jsx(w4,{children:r.jsx(l1,{children:r.jsx(x4,{})})})})})}));
